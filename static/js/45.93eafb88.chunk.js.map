{"version":3,"sources":["MainPage/Sidebar/Modal/FaceSelect/styles/FaceSelectStyles.js","../node_modules/@material-ui/icons/Add.js","MainPage/Sidebar/SidebarBody/ChainMaker/ChainAniFaceDetails.js","MainPage/Sidebar/SidebarBody/ChainMaker/ChainAniFace.js","MainPage/Sidebar/SidebarBody/ChainMaker/ChainAniAdvanced.js"],"names":["faceBGSize","useStyles","eyeOffsetFix","mouthOffsetFix","baseOffset","Array","fill","map","_","i","idx","Math","floor","eyeX","x","eyeY","y","eyeXFix","eyeYFix","eyeBgPos","offsetX","offsetY","mouthX","mouthY","mouthXFix","mouthYFix","mouthBgPos","faceSize","styles","root","display","gridTemplateColumns","gridGap","margin","faceBox","flexDirection","cursor","eyeBox","width","height","backgroundSize","borderRadius","mouthBox","backgroundPosition","makeStyles","_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","ChainAniFaceDetails","props","change","id","time","eyeIdx","mouthIdx","deleteFaceChange","handleChange","handleClick","useContext","SettingsContext","model","eyeTexture","mouthTexture","eyeImgPath","fbxSource","mouthImgPath","faceOffsetFix","classes","eye","className","style","backgroundImage","mouth","onClick","TextField","onChange","inputProps","type","min","max","step","data-target","data-id","ChainAniFace","faceChanges","updateFaceChange","addFaceChange","openModal","handleParamsChange","event","currentTarget","dataset","name","changeToUpdate","find","newChange","target","key","details","length","ChainAniAdvanced","timeScale","repetitions","updateParams","handleParamChange","updateValue","updateFaceChanges","newFaceChanges","label","size","variant","filter","newFaceChange","blankChange","uuid"],"mappings":"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","file":"static/js/45.93eafb88.chunk.js","sourcesContent":["import { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst faceBGSize = \"512px 512px\";\r\nconst faceSize = 64;\r\n\r\nconst useStyles = (eyeOffsetFix, mouthOffsetFix) => {\r\n    const indexes = Array(9)\r\n        .fill()\r\n        .map((_, i) => i + 1);\r\n    const baseOffset = indexes.map(idx => {\r\n        if (idx === 1) return [-280, -170];\r\n\r\n        const n = (idx - 2) % 4;\r\n        const m = Math.floor(idx / 6);\r\n        const offsetX = -(24 + n * 128);\r\n        const offsetY = -(298 + m * 128);\r\n        return [offsetX, offsetY];\r\n    });\r\n    const { x: eyeX, y: eyeY } = eyeOffsetFix;\r\n    const eyeXFix = eyeX * 128;\r\n    const eyeYFix = eyeY * 128;\r\n    const eyeBgPos = i => {\r\n        const [offsetX, offsetY] = baseOffset[i - 1];\r\n        return `${offsetX - eyeXFix}px ${offsetY + eyeYFix}px`;\r\n    };\r\n    const { x: mouthX, y: mouthY } = mouthOffsetFix;\r\n    const mouthXFix = mouthX * 128;\r\n    const mouthYFix = mouthY * 128;\r\n    const mouthBgPos = i => {\r\n        const [offsetX, offsetY] = baseOffset[i - 1];\r\n        return `${offsetX - mouthXFix}px ${\r\n            offsetY + mouthYFix - faceSize / 2\r\n        }px`;\r\n    };\r\n\r\n    const styles = {\r\n        root: {\r\n            display: \"grid\",\r\n            gridTemplateColumns: \"1fr 1fr 1fr\",\r\n            gridGap: \"0.5rem\",\r\n            margin: \"0.5rem\",\r\n        },\r\n        faceBox: {\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            cursor: \"pointer\",\r\n        },\r\n        eyeBox: {\r\n            width: `${faceSize}px`,\r\n            height: `${faceSize / 2}px`,\r\n            backgroundSize: faceBGSize,\r\n            borderRadius: \"0.5rem 0.5rem 0 0\",\r\n        },\r\n        mouthBox: {\r\n            width: `${faceSize}px`,\r\n            height: `${faceSize / 2}px`,\r\n            backgroundSize: faceBGSize,\r\n            borderRadius: \"0 0 0.5rem 0.5rem\",\r\n        },\r\n    };\r\n    for (let i = 1; i <= 9; i++) {\r\n        styles[`eye${i}`] = {\r\n            backgroundPosition: eyeBgPos(i),\r\n        };\r\n        styles[`mouth${i}`] = {\r\n            backgroundPosition: mouthBgPos(i),\r\n        };\r\n    }\r\n    return makeStyles(styles)();\r\n};\r\n\r\nexport default useStyles;\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"\n}), 'Add');\n\nexports.default = _default;","import { useContext } from \"react\";\r\nimport { SettingsContext } from \"context/SettingsContext\";\r\nimport useStyles from \"MainPage/Sidebar/Modal/FaceSelect/styles/FaceSelectStyles\";\r\n\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nimport Close from \"@material-ui/icons/Close\";\r\n\r\nimport { fbxSource } from \"App\";\r\nimport faceOffsetFix from \"data/face_offset\";\r\n\r\nfunction ChainAniFaceDetails(props) {\r\n    const {\r\n        change: { id, time, eyeIdx, mouthIdx },\r\n        deleteFaceChange,\r\n        handleChange,\r\n        handleClick,\r\n    } = props;\r\n\r\n    const {\r\n        model: { eyeTexture, mouthTexture },\r\n    } = useContext(SettingsContext);\r\n\r\n    const eyeImgPath = `${fbxSource}/fbx/${eyeTexture}/${eyeTexture}.png`;\r\n    const mouthImgPath = `${fbxSource}/fbx/${mouthTexture}/${mouthTexture}.png`;\r\n    const eyeOffsetFix = faceOffsetFix[eyeTexture] || { x: 0, y: 0 };\r\n    const mouthOffsetFix = faceOffsetFix[mouthTexture] || { x: 0, y: 0 };\r\n\r\n    const classes = useStyles(eyeOffsetFix, mouthOffsetFix);\r\n\r\n    const eye = eyeIdx ? (\r\n        <div\r\n            className={`${classes[`eye${eyeIdx}`]} ${classes[\"eyeBox\"]}`}\r\n            style={{ backgroundImage: `url(${eyeImgPath})` }}\r\n        />\r\n    ) : (\r\n        \"Set\"\r\n    );\r\n    const mouth = mouthIdx ? (\r\n        <div\r\n            className={`${classes[`mouth${mouthIdx}`]} ${classes[\"mouthBox\"]}`}\r\n            style={{ backgroundImage: `url(${mouthImgPath})` }}\r\n        />\r\n    ) : (\r\n        \"Set\"\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <div\r\n                className=\"ChainAniFace-delete\"\r\n                onClick={deleteFaceChange}\r\n                id={id}\r\n            >\r\n                <Close />\r\n            </div>\r\n            <TextField\r\n                onChange={handleChange}\r\n                inputProps={{\r\n                    type: \"number\",\r\n                    min: 0,\r\n                    max: 100,\r\n                    step: 1,\r\n                    \"data-name\": \"time\",\r\n                    \"data-id\": id,\r\n                }}\r\n                value={time}\r\n            />\r\n            <div onClick={handleClick} data-target=\"eye\" data-id={id}>\r\n                {eye}\r\n            </div>\r\n            <div onClick={handleClick} data-target=\"mouth\" data-id={id}>\r\n                {mouth}\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ChainAniFaceDetails;\r\n","import ChainAniFaceDetails from \"./ChainAniFaceDetails\";\r\n\r\nimport Add from \"@material-ui/icons/Add\";\r\n\r\nfunction ChainAniFace(props) {\r\n    const {\r\n        faceChanges,\r\n        deleteFaceChange,\r\n        updateFaceChange,\r\n        addFaceChange,\r\n        openModal,\r\n    } = props;\r\n\r\n    const handleParamsChange = event => {\r\n        const {\r\n            value,\r\n            dataset: { id, name },\r\n        } = event.currentTarget;\r\n        const changeToUpdate = faceChanges.find(change => change.id === id);\r\n        const newChange = { ...changeToUpdate, [name]: value };\r\n        updateFaceChange(id, newChange);\r\n    };\r\n\r\n    const handleClick = event => {\r\n        const { id, target } = event.currentTarget.dataset;\r\n        const key = `${target}Idx`;\r\n        const handler = idx => {\r\n            const changeToUpdate = faceChanges.find(change => change.id === id);\r\n            const newChange = { ...changeToUpdate, [key]: idx };\r\n            updateFaceChange(id, newChange);\r\n        };\r\n        openModal(target, handler);\r\n    };\r\n\r\n    const details = faceChanges?.map(change => (\r\n        <ChainAniFaceDetails\r\n            key={change.id}\r\n            change={change}\r\n            handleClick={handleClick}\r\n            deleteFaceChange={deleteFaceChange}\r\n            handleChange={handleParamsChange}\r\n        />\r\n    ));\r\n\r\n    return (\r\n        <>\r\n            <div className=\"ChainAniFace-title\">Facial Expression</div>\r\n            <div className=\"ChainAniFace-list\">\r\n                {faceChanges?.length > 0 && (\r\n                    <>\r\n                        <div></div>\r\n                        <div>Time (%)</div>\r\n                        <div>Eye</div>\r\n                        <div>Mouth</div>\r\n                        {details}\r\n                    </>\r\n                )}\r\n                <div className=\"ChainAniFace-delete\" onClick={addFaceChange}>\r\n                    <Add />\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ChainAniFace;\r\n","import TextField from \"@material-ui/core/TextField\";\r\n\r\nimport ChainAniFace from \"./ChainAniFace\";\r\n\r\nimport { v4 as uuid } from \"uuid\";\r\n\r\nfunction ChainAniAdvanced(props) {\r\n    const {\r\n        timeScale,\r\n        repetitions,\r\n        faceChanges,\r\n        updateParams,\r\n        openModal,\r\n    } = props;\r\n\r\n    const handleParamChange = event => {\r\n        const { name, value } = event.target;\r\n        const updateValue = { [name]: value };\r\n        updateParams(updateValue);\r\n    };\r\n\r\n    const updateFaceChanges = newFaceChanges => {\r\n        const updateValue = { faceChanges: newFaceChanges };\r\n        updateParams(updateValue);\r\n    };\r\n\r\n    const deleteFaceChange = event => {\r\n        const { id } = event.currentTarget;\r\n        const newFaceChanges = faceChanges.filter(change => change.id !== id);\r\n        updateFaceChanges(newFaceChanges);\r\n    };\r\n\r\n    const updateFaceChange = (id, newFaceChange) => {\r\n        const newFaceChanges = faceChanges.map(change =>\r\n            change.id === id ? newFaceChange : change\r\n        );\r\n        updateFaceChanges(newFaceChanges);\r\n    };\r\n\r\n    const addFaceChange = () => {\r\n        const blankChange = { id: uuid(), time: \"\", eyeIdx: \"\", mouthIdx: \"\" };\r\n        const newFaceChanges = [...faceChanges, blankChange];\r\n        updateFaceChanges(newFaceChanges);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"ChainAni-fields\">\r\n                <TextField\r\n                    onChange={handleParamChange}\r\n                    label=\"Speed\"\r\n                    size=\"small\"\r\n                    margin=\"dense\"\r\n                    variant=\"outlined\"\r\n                    inputProps={{\r\n                        type: \"number\",\r\n                        step: 0.25,\r\n                        name: \"timeScale\",\r\n                    }}\r\n                    value={timeScale}\r\n                />\r\n                <TextField\r\n                    onChange={handleParamChange}\r\n                    label=\"Repetitions\"\r\n                    size=\"small\"\r\n                    margin=\"dense\"\r\n                    variant=\"outlined\"\r\n                    inputProps={{\r\n                        type: \"number\",\r\n                        name: \"repetitions\",\r\n                    }}\r\n                    value={repetitions}\r\n                />\r\n            </div>\r\n            <ChainAniFace\r\n                openModal={openModal}\r\n                faceChanges={faceChanges}\r\n                deleteFaceChange={deleteFaceChange}\r\n                updateFaceChange={updateFaceChange}\r\n                addFaceChange={addFaceChange}\r\n            />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ChainAniAdvanced;\r\n"],"sourceRoot":""}