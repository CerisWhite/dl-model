{"version":3,"sources":["ColorSettings.js"],"names":["ChromePicker","lazy","then","module","default","ColorSettings","initColor","title","commonColor","toggleControlOpen","mode","dispatch","useContext","DispatchContext","settings","SettingsContext","scene","background","commonBG","outline","color","split","key","subkey","lights","find","lightId","useState","setColor","setNewColor","event","value","currentTarget","commonBGBtn","Object","keys","map","onClick","style","backgroundColor","complementaryColor","onClose","dividers","className","colorToSet","action","type","newLights","light","textShadow","fallback","onChangeComplete","hex"],"mappings":"2NAUMA,G,OAAeC,gBAAK,kBACtB,8BAAsBC,MAAK,SAAAC,GAAM,MAAK,CAAEC,QAASD,EAAOH,qBA0H7CK,UAvHf,YAAqD,IAG7CC,EAAWC,EAAOC,EAHDC,EAA2B,EAA3BA,kBAAmBC,EAAQ,EAARA,KAClCC,EAAWC,qBAAWC,KACtBC,EAAWF,qBAAWG,KAE5B,OAAQL,GACJ,IAAK,aACDJ,EAAYQ,EAASE,MAAMC,WAC3BT,EAAcU,IACdX,EAAQ,sBACR,MACJ,IAAK,eACDD,EAAYQ,EAASK,QAAQC,MAC7BZ,EAAc,GACdD,EAAQ,gBACR,MACJ,QAAQ,IAAR,EAC0BG,EAAKW,MAAM,KADrC,mBACWC,EADX,KACgBC,EADhB,KAEI,GAAY,WAARD,EAIAhB,EAHqBQ,EAASE,MAAMQ,OAAOC,MACvC,qBAAGC,UAA0BH,KAERH,WAEzBd,EAAYQ,EAASQ,GAAKC,GAE9Bf,EAAcU,IACdX,EAAQ,eA1BgC,MA4BtBoB,mBAASrB,GA5Ba,mBA4BzCc,EA5ByC,KA4BlCQ,EA5BkC,KAqE1CC,EAAc,SAAAC,GAChB,IAAMC,EAAQD,EAAME,cAAcD,MAClCH,EAASG,IAGPE,EAAcC,OAAOC,KAAK3B,GAAa4B,KAAI,SAAAhB,GAAK,OAClD,cAAC,IAAD,CACIiB,QAASR,EACTS,MAAO,CACHC,gBAAiBrB,IAASE,GAC1BA,MAAOoB,YAAmBtB,IAASE,KAEvCW,MAAOb,IAASE,GANpB,SASKA,GAFIA,MAMb,OACI,qCACI,cAAC,IAAD,UACI,cAAC,IAAD,CAAaqB,QAAShC,EAAtB,SAA0CF,MAE9C,eAAC,IAAD,CAAemC,UAAQ,EAACC,UAAU,gBAAlC,UACI,sBAAKA,UAAU,oBAAf,UACI,cAAC,IAAD,CACIN,QA9DD,SAAAP,GACf,IAAMC,EAAQD,EAAME,cAAcD,MAC5Ba,EAAuB,WAAVb,EAAqBX,EAAQW,EAC5Cc,EAAS,CAAEC,KAAM,UACrB,OAAQpC,GACJ,IAAK,aACDmC,EAAOvB,IAAM,QACbuB,EAAOd,MAAQ,CAAEd,WAAY2B,GAC7B,MACJ,IAAK,eACDC,EAAOvB,IAAM,UACbuB,EAAOd,MAAQ,CAAEX,MAAOwB,GACxB,MACJ,QAAQ,IAAR,EAC0BlC,EAAKW,MAAM,KADrC,mBACWC,EADX,KACgBC,EADhB,KAEI,GAAY,WAARD,EAAkB,CAAC,IAEbyB,EADajC,EAASE,MAApBQ,OACiBY,KAAI,SAAAY,GACzB,OAAIA,EAAMtB,UAAYH,EACX,2BAAKyB,GAAZ,IAAmB5B,MAAOwB,IAEvBI,KAGXH,EAAOvB,IAAM,QACbuB,EAAOd,MAAQ,CAAEP,OAAQuB,QAEzBF,EAAOvB,IAAMA,EACbuB,EAAOd,MAAP,eAAkBR,EAASqB,GAGvCjC,EAASkC,GACTpC,KA+BgB6B,MAAO,CACHC,gBAAiBnB,EACjBA,MAAOoB,YAAmBpB,GAC1B6B,WAAW,qBAEflB,MAAM,SAPV,mBAWA,qBAAKY,UAAU,uBAAf,SAAuCV,OAE3C,cAAC,WAAD,CAAUiB,SAAU,KAApB,SACI,cAAClD,EAAD,CACIoB,MAAOA,EACP+B,iBAjFS,SAAA/B,GACzBQ,EAASR,EAAMgC","file":"static/js/31.04fcbac9.chunk.js","sourcesContent":["import { lazy, Suspense, useState, useContext } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nimport { DialogContent, DialogTitle, DialogTop } from \"./CustomDialog\";\r\nimport { complementaryColor } from \"./helpers\";\r\nimport { commonBG } from \"./consts\";\r\nimport { DispatchContext, SettingsContext } from \"./context/SettingsContext\";\r\n\r\nimport \"./styles/ColorSettings.css\";\r\n\r\nconst ChromePicker = lazy(() =>\r\n    import(\"react-color\").then(module => ({ default: module.ChromePicker }))\r\n);\r\n\r\nfunction ColorSettings({ toggleControlOpen, mode }) {\r\n    const dispatch = useContext(DispatchContext);\r\n    const settings = useContext(SettingsContext);\r\n    let initColor, title, commonColor;\r\n    switch (mode) {\r\n        case \"background\":\r\n            initColor = settings.scene.background;\r\n            commonColor = commonBG;\r\n            title = \"Background Settings\";\r\n            break;\r\n        case \"outlineColor\":\r\n            initColor = settings.outline.color;\r\n            commonColor = {};\r\n            title = \"Outline Color\";\r\n            break;\r\n        default:\r\n            const [key, subkey] = mode.split(\"-\");\r\n            if (key === \"Lights\") {\r\n                const currentLight = settings.scene.lights.find(\r\n                    ({ lightId }) => lightId === subkey\r\n                );\r\n                initColor = currentLight.color;\r\n            } else {\r\n                initColor = settings[key][subkey];\r\n            }\r\n            commonColor = commonBG;\r\n            title = \"Pick a Color\";\r\n    }\r\n    const [color, setColor] = useState(initColor);\r\n\r\n    const handleChangeComplete = color => {\r\n        setColor(color.hex);\r\n    };\r\n\r\n    const applyColor = event => {\r\n        const value = event.currentTarget.value;\r\n        const colorToSet = value === \"picker\" ? color : value;\r\n        let action = { type: \"update\" };\r\n        switch (mode) {\r\n            case \"background\":\r\n                action.key = \"scene\";\r\n                action.value = { background: colorToSet };\r\n                break;\r\n            case \"outlineColor\":\r\n                action.key = \"outline\";\r\n                action.value = { color: colorToSet };\r\n                break;\r\n            default:\r\n                const [key, subkey] = mode.split(\"-\");\r\n                if (key === \"Lights\") {\r\n                    const { lights } = settings.scene;\r\n                    const newLights = lights.map(light => {\r\n                        if (light.lightId === subkey) {\r\n                            return { ...light, color: colorToSet };\r\n                        }\r\n                        return light;\r\n                    });\r\n\r\n                    action.key = \"scene\";\r\n                    action.value = { lights: newLights };\r\n                } else {\r\n                    action.key = key;\r\n                    action.value = { [subkey]: colorToSet };\r\n                }\r\n        }\r\n        dispatch(action);\r\n        toggleControlOpen();\r\n    };\r\n\r\n    const setNewColor = event => {\r\n        const value = event.currentTarget.value;\r\n        setColor(value);\r\n    };\r\n\r\n    const commonBGBtn = Object.keys(commonColor).map(color => (\r\n        <Button\r\n            onClick={setNewColor}\r\n            style={{\r\n                backgroundColor: commonBG[color],\r\n                color: complementaryColor(commonBG[color]),\r\n            }}\r\n            value={commonBG[color]}\r\n            key={color}\r\n        >\r\n            {color}\r\n        </Button>\r\n    ));\r\n\r\n    return (\r\n        <>\r\n            <DialogTop>\r\n                <DialogTitle onClose={toggleControlOpen}>{title}</DialogTitle>\r\n            </DialogTop>\r\n            <DialogContent dividers className=\"ColorSettings\">\r\n                <div className=\"ColorSettings-btn\">\r\n                    <Button\r\n                        onClick={applyColor}\r\n                        style={{\r\n                            backgroundColor: color,\r\n                            color: complementaryColor(color),\r\n                            textShadow: `0px 0px 3px white`,\r\n                        }}\r\n                        value=\"picker\"\r\n                    >\r\n                        Apply\r\n                    </Button>\r\n                    <div className=\"ColorSettings-common\">{commonBGBtn}</div>\r\n                </div>\r\n                <Suspense fallback={null}>\r\n                    <ChromePicker\r\n                        color={color}\r\n                        onChangeComplete={handleChangeComplete}\r\n                    />\r\n                </Suspense>\r\n            </DialogContent>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ColorSettings;\r\n"],"sourceRoot":""}