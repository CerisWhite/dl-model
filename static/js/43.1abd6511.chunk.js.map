{"version":3,"sources":["../node_modules/@material-ui/icons/Close.js","MainPage/Sidebar/SidebarBody/ChainMaker/ChainMaker.js"],"names":["_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","ChainAniList","lazy","aniSelectMode","adv","dragon","ani","ChainMaker","openModal","useContext","SettingsContext","chain","chainMaker","viewerType","app","dispatch","DispatchContext","updateSettings","key","type","setChain","applyCode","code","className","onClick","sidebarContent","fallback","Button","generateChainCode","aniCode","name","chainList","chainCodeToList","newChain","playAni","event","id","currentTarget","find","a","deleteAni","length","filter","updateAni","newAni","map"],"mappings":"6GAEA,IAAIA,EAAyBC,EAAQ,IAEjCC,EAA0BD,EAAQ,IAEtCE,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQE,aAAU,EAElB,IAAIC,EAAQN,EAAwBD,EAAQ,IAIxCQ,GAAW,EAFMT,EAAuBC,EAAQ,KAElBM,SAAuBC,EAAME,cAAc,OAAQ,CACnFC,EAAG,0GACD,SAEJN,EAAQE,QAAUE,G,4LCNZG,EAAeC,gBAAK,kBAAM,kCAE1BC,EAAgB,CAClBC,IAAK,YACLC,OAAQ,cACRC,IAAK,eA2FMC,MAxFf,YAAoC,IAAdC,EAAa,EAAbA,UAAa,EAI3BC,qBAAWC,KAFGC,EAFa,EAE3BC,WAAcD,MACPE,EAHoB,EAG3BC,IAAOD,WAELE,EAAWN,qBAAWO,KAEtBC,EAAiB,SAACC,EAAKvB,GAEzBoB,EADe,CAAEI,KAAM,SAAUD,MAAKvB,WAIpCyB,EAAW,SAAAT,GAAK,OAAIM,EAAe,aAAc,CAAEN,WAMnDU,EAAY,SAAAC,GACdL,EAAe,YAAa,CAAEK,UAsClC,OACI,sBAAKC,UAAU,aAAf,UACI,sBAAKA,UAAU,oBAAf,UACI,qBAAKA,UAAU,mBAAf,yBACA,qBAAKA,UAAU,mBAAmBC,QA/ChC,WACVP,EAAe,MAAO,CAAEQ,eAAgB,cA8ChC,SACI,cAAC,IAAD,SAGR,eAAC,WAAD,CAAUC,SAAU,0CAApB,UACI,sBAAKH,UAAU,kBAAf,UACI,cAACI,EAAA,EAAD,CAAQH,QA7BR,WACZ,IAAMF,EAAOM,YAAkBjB,GAC/BU,EAAUC,IA2B4BC,UAAU,iBAApC,sBAGA,cAACI,EAAA,EAAD,CAAQH,QA3BH,WAMjBhB,EAAUL,EAAcU,IALR,SAACgB,EAASC,GACtB,IAAMC,EAAYC,YAAgBH,EAASC,GACrCG,EAAQ,sBAAOtB,GAAP,YAAiBoB,IAC/BX,EAASa,OAuB8BV,UAAU,iBAAzC,oBAIJ,qBAAKA,UAAU,kBAAf,SACI,cAACtB,EAAD,CACIO,UAAWA,EACX0B,QAvDJ,SAAAC,GAAU,IACdC,EAAOD,EAAME,cAAbD,GAEF9B,EAAMK,EAAM2B,MAAK,SAAAC,GAAC,OAAIA,EAAEH,KAAOA,KAC/Bd,EAAOM,YAAkB,CAACtB,IAChCe,EAAUC,IAmDMkB,UAhDM,SAAAL,GACtB,GAAqB,IAAjBxB,EAAM8B,OAAV,CAD+B,IAGvBL,EAAOD,EAAME,cAAbD,GACFH,EAAWtB,EAAM+B,QAAO,SAAApC,GAAG,OAAIA,EAAI8B,KAAOA,KAChDhB,EAASa,KA4COU,UA3BK,SAACP,EAAIQ,GAC1B,IAAMX,EAAWtB,EAAMkC,KAAI,SAAAvC,GAAG,OAAKA,EAAI8B,KAAOA,EAAKQ,EAAStC,KAC5Dc,EAASa,IA0BOtB,MAAOA","file":"static/js/43.1abd6511.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Close');\n\nexports.default = _default;","import { lazy, Suspense, useContext } from \"react\";\r\n\r\nimport { DispatchContext, SettingsContext } from \"context/SettingsContext\";\r\n\r\nimport Close from \"@material-ui/icons/Close\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nimport { generateChainCode } from \"helpers/helpers\";\r\nimport { chainCodeToList } from \"helpers/viewerHelpers\";\r\n\r\nimport \"./styles/ChainMaker.css\";\r\n\r\nconst ChainAniList = lazy(() => import(\"./ChainAniList\"));\r\n\r\nconst aniSelectMode = {\r\n    adv: \"animation\",\r\n    dragon: \"nonHumanAni\",\r\n    ani: \"nonHumanAni\",\r\n};\r\n\r\nfunction ChainMaker({ openModal }) {\r\n    const {\r\n        chainMaker: { chain },\r\n        app: { viewerType },\r\n    } = useContext(SettingsContext);\r\n    const dispatch = useContext(DispatchContext);\r\n\r\n    const updateSettings = (key, value) => {\r\n        const action = { type: \"update\", key, value };\r\n        dispatch(action);\r\n    };\r\n\r\n    const setChain = chain => updateSettings(\"chainMaker\", { chain });\r\n\r\n    const close = () => {\r\n        updateSettings(\"app\", { sidebarContent: \"settings\" });\r\n    };\r\n\r\n    const applyCode = code => {\r\n        updateSettings(\"animation\", { code });\r\n    };\r\n\r\n    const playAni = event => {\r\n        const { id } = event.currentTarget;\r\n\r\n        const ani = chain.find(a => a.id === id);\r\n        const code = generateChainCode([ani]);\r\n        applyCode(code);\r\n    };\r\n\r\n    const deleteAniFromList = event => {\r\n        if (chain.length === 1) return;\r\n\r\n        const { id } = event.currentTarget;\r\n        const newChain = chain.filter(ani => ani.id !== id);\r\n        setChain(newChain);\r\n    };\r\n\r\n    const playAll = () => {\r\n        const code = generateChainCode(chain);\r\n        applyCode(code);\r\n    };\r\n\r\n    const addAniToList = () => {\r\n        const handler = (aniCode, name) => {\r\n            const chainList = chainCodeToList(aniCode, name);\r\n            const newChain = [...chain, ...chainList];\r\n            setChain(newChain);\r\n        };\r\n        openModal(aniSelectMode[viewerType], handler);\r\n    };\r\n\r\n    const updateAniInChain = (id, newAni) => {\r\n        const newChain = chain.map(ani => (ani.id === id ? newAni : ani));\r\n        setChain(newChain);\r\n    };\r\n\r\n    return (\r\n        <div className=\"ChainMaker\">\r\n            <div className=\"ChainMaker-header\">\r\n                <div className=\"ChainMaker-title\">Chain Maker</div>\r\n                <div className=\"ChainMaker-close\" onClick={close}>\r\n                    <Close />\r\n                </div>\r\n            </div>\r\n            <Suspense fallback={<div>Loading</div>}>\r\n                <div className=\"ChainMaker-btns\">\r\n                    <Button onClick={playAll} className=\"ChainMaker-btn\">\r\n                        Play All\r\n                    </Button>\r\n                    <Button onClick={addAniToList} className=\"ChainMaker-btn\">\r\n                        Add\r\n                    </Button>\r\n                </div>\r\n                <div className=\"ChainMaker-list\">\r\n                    <ChainAniList\r\n                        openModal={openModal}\r\n                        playAni={playAni}\r\n                        deleteAni={deleteAniFromList}\r\n                        updateAni={updateAniInChain}\r\n                        chain={chain}\r\n                    />\r\n                </div>\r\n            </Suspense>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ChainMaker;\r\n"],"sourceRoot":""}