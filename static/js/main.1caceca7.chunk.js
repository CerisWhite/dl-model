(this["webpackJsonpdl-model"]=this["webpackJsonpdl-model"]||[]).push([[9],{100:function(e,n,t){},102:function(e,n,t){"use strict";t.r(n);var a=t(10),c=t(32),r=t.n(c),o=(t(94),t(35)),i=t(54);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(a.jsx)(i.a,{children:Object(a.jsx)(o.a,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},15:function(e,n,t){"use strict";t.d(n,"b",(function(){return s})),t.d(n,"a",(function(){return f})),t.d(n,"d",(function(){return l})),t.d(n,"c",(function(){return m}));var a=t(13),c=t(6),r=t(10),o=t(0),i=t(8),u=t(9),d=function(e,n){var t=n.type,a=n.key,r=n.subkey,o=n.value;switch(t){case"toggle":var d;return r?(d=e[a][r][o],Object(c.a)(Object(c.a)({},e),{},Object(i.a)({},a,Object(c.a)(Object(c.a)({},e[a]),{},Object(i.a)({},r,Object(c.a)(Object(c.a)({},e[a][r]),{},Object(i.a)({},o,!d))))))):(d=e[a][o],Object(c.a)(Object(c.a)({},e),{},Object(i.a)({},a,Object(c.a)(Object(c.a)({},e[a]),{},Object(i.a)({},o,!d)))));case"reset":var _=r?u.t[a][r]:u.t[a];if(!o)return r?Object(c.a)(Object(c.a)({},e),{},Object(i.a)({},a,Object(c.a)(Object(c.a)({},e[a]),{},Object(i.a)({},r,Object(c.a)(Object(c.a)({},e[a][r]),_))))):Object(c.a)(Object(c.a)({},e),{},Object(i.a)({},a,Object(c.a)(Object(c.a)({},e[a]),_)));var s={};return o.forEach((function(e){s[e]=_[e]})),r?Object(c.a)(Object(c.a)({},e),{},Object(i.a)({},a,Object(c.a)(Object(c.a)({},e[a]),{},Object(i.a)({},r,Object(c.a)(Object(c.a)({},e[a][r]),s))))):Object(c.a)(Object(c.a)({},e),{},Object(i.a)({},a,Object(c.a)(Object(c.a)({},e[a]),s)));case"load":return;case"update":return r?Object(c.a)(Object(c.a)({},e),{},Object(i.a)({},a,Object(c.a)(Object(c.a)({},e[a]),{},Object(i.a)({},r,Object(c.a)(Object(c.a)({},e[a][r]),o))))):Object(c.a)(Object(c.a)({},e),{},Object(i.a)({},a,Object(c.a)(Object(c.a)({},e[a]),o)));default:return e}},_=t(42),s=Object(o.createContext)(),f=Object(o.createContext)(),l={chainMaker:{chain:Object(_.j)(u.t.animation.code,"init")}};function m(e){var n=Object(o.useReducer)(d,l),t=Object(a.a)(n,2),c=t[0],i=t[1];return Object(r.jsx)(s.Provider,{value:c,children:Object(r.jsx)(f.Provider,{value:i,children:e.children})})}Object.keys(u.t).forEach((function(e){return l[e]=Object(c.a)({},u.t[e])})),l.scene.lights=u.t.scene.lights.map((function(e){return Object(c.a)({},e)}))},22:function(e,n,t){"use strict";t.d(n,"o",(function(){return _})),t.d(n,"n",(function(){return l})),t.d(n,"g",(function(){return m})),t.d(n,"b",(function(){return v})),t.d(n,"q",(function(){return p})),t.d(n,"d",(function(){return h})),t.d(n,"c",(function(){return C})),t.d(n,"p",(function(){return D})),t.d(n,"l",(function(){return O})),t.d(n,"a",(function(){return y})),t.d(n,"k",(function(){return x})),t.d(n,"m",(function(){return w})),t.d(n,"f",(function(){return k})),t.d(n,"j",(function(){return R})),t.d(n,"e",(function(){return S})),t.d(n,"h",(function(){return M})),t.d(n,"i",(function(){return I}));var a=t(50),c=t(10),r=t(111),o=t(15),i=t(9),u=t(42),d={d210016_01:[{name:"Dragon's Roost",code:"DC_d210016_01+DC_d210016_01_90_01"},{name:"Receive Gift",code:"DC_d210016_01+DC_d210016_01_90_04"}],d210128_01:[{name:"Dragon's Roost",code:"DC_d210128_01+DC_d210128_01_90_01"},{name:"Give Back Gifts",code:"DC_d210128_01+DC_d210128_01_90_03"},{name:"Receive Gift",code:"DC_d210128_01+DC_d210128_01_90_04"}],d210001_01:[{name:"Dragon's Roost",code:"DC_d210001_01+DC_d210001_01_90_01"},{name:"Receive Gift",code:"DC_d210001_01+DC_d210001_01_90_04"}],d210002_01:[{name:"Dragon's Roost",code:"DC_d210002_01+DC_d210002_01_90_01"},{name:"Receive Gift",code:"DC_d210002_01+DC_d210002_01_90_04"}],d210003_01:[{name:"Dragon's Roost",code:"DC_d210003_01+DC_d210003_01_90_01"},{name:"Receive Gift",code:"DC_d210003_01+DC_d210003_01_90_04"}],d210004_01:[{name:"Dragon's Roost",code:"DC_d210004_01+DC_d210004_01_90_01"},{name:"Receive Gift",code:"DC_d210004_01+DC_d210004_01_90_04"}],d210005_01:[{name:"Dragon's Roost",code:"DC_d210005_01+DC_d210005_01_90_01"},{name:"Receive Gift",code:"DC_d210005_01+DC_d210005_01_90_04"}],d210006_01:[{name:"Dragon's Roost",code:"DC_d210006_01+DC_d210006_01_90_01"},{name:"Receive Gift",code:"DC_d210006_01+DC_d210006_01_90_04"}],d210007_01:[{name:"Dragon's Roost",code:"DC_d210007_01+DC_d210007_01_90_01"},{name:"Receive Gift",code:"DC_d210007_01+DC_d210007_01_90_04"}],d210008_01:[{name:"Dragon's Roost",code:"DC_d210008_01+DC_d210008_01_90_01"},{name:"Receive Gift",code:"DC_d210008_01+DC_d210008_01_90_04"}],d210011_01:[{name:"Dragon's Roost",code:"DC_d210011_01+DC_d210011_01_90_01"},{name:"Receive Gift",code:"DC_d210011_01+DC_d210011_01_90_04"}],d210012_01:[{name:"Dragon's Roost",code:"DC_d210012_01+DC_d210012_01_90_01"},{name:"Receive Gift",code:"DC_d210012_01+DC_d210012_01_90_04"}],d210013_01:[{name:"Dragon's Roost",code:"DC_d210013_01+DC_d210013_01_90_01"},{name:"Receive Gift",code:"DC_d210013_01+DC_d210013_01_90_04"}],d210014_01:[{name:"Dragon's Roost",code:"DC_d210014_01+DC_d210014_01_90_01"},{name:"Receive Gift",code:"DC_d210014_01+DC_d210014_01_90_04"}],d210015_01:[{name:"Dragon's Roost",code:"DC_d210015_01+DC_d210015_01_90_01"},{name:"Receive Gift",code:"DC_d210015_01+DC_d210015_01_90_04"}],d210021_01:[{name:"Dragon's Roost",code:"DC_d210021_01+DC_d210021_01_90_01"},{name:"Receive Gift",code:"DC_d210021_01+DC_d210021_01_90_04"}],d210022_01:[{name:"Dragon's Roost",code:"DC_d210022_01+DC_d210022_01_90_01"},{name:"Receive Gift",code:"DC_d210022_01+DC_d210022_01_90_04"}],d210023_01:[{name:"Dragon's Roost",code:"DC_d210023_01+DC_d210023_01_90_01"},{name:"Receive Gift",code:"DC_d210023_01+DC_d210023_01_90_04"}],d210050_01:[{name:"Dragon's Roost",code:"DC_d210050_01+DC_d210050_01_90_01"},{name:"Receive Gift",code:"DC_d210050_01+DC_d210050_01_90_04"}],d210075_01:[{name:"Dragon's Roost",code:"DC_d210075_01+DC_d210075_01_90_01"},{name:"Receive Gift",code:"DC_d210075_01+DC_d210075_01_90_04"}],d210089_01:[{name:"Dragon's Roost",code:"DC_d210022_01+DC_d210022_01_90_01"},{name:"Receive Gift",code:"DC_d210022_01+DC_d210022_01_90_04"}],d210090_01:[{name:"Dragon's Roost",code:"DC_d210022_01+DC_d210022_01_90_01"},{name:"Receive Gift",code:"DC_d210022_01+DC_d210022_01_90_04"}],d210058_01:[{name:"Dragon's Roost",code:"DC_d210011_01+DC_d210011_01_90_01"},{name:"Receive Gift",code:"DC_d210011_01+DC_d210011_01_90_04"}],d210059_01:[{name:"Dragon's Roost",code:"DC_d210021_01+DC_d210021_01_90_01"},{name:"Receive Gift",code:"DC_d210021_01+DC_d210021_01_90_04"}],d210060_01:[{name:"Dragon's Roost",code:"DC_d210021_01+DC_d210021_01_90_01"},{name:"Receive Gift",code:"DC_d210021_01+DC_d210021_01_90_04"}],d210061_01:[{name:"Dragon's Roost",code:"DC_d210021_01+DC_d210021_01_90_01"},{name:"Receive Gift",code:"DC_d210021_01+DC_d210021_01_90_04"}],d210062_01:[{name:"Dragon's Roost",code:"DC_d210021_01+DC_d210021_01_90_01"},{name:"Receive Gift",code:"DC_d210021_01+DC_d210021_01_90_04"}],d210063_01:[{name:"Dragon's Roost",code:"DC_d210022_01+DC_d210022_01_90_01"},{name:"Receive Gift",code:"DC_d210022_01+DC_d210022_01_90_04"}],d210064_01:[{name:"Dragon's Roost",code:"DC_d210022_01+DC_d210022_01_90_01"},{name:"Receive Gift",code:"DC_d210022_01+DC_d210022_01_90_04"}],d210065_01:[{name:"Dragon's Roost",code:"DC_d210022_01+DC_d210022_01_90_01"},{name:"Receive Gift",code:"DC_d210022_01+DC_d210022_01_90_04"}],d210066_01:[{name:"Dragon's Roost",code:"DC_d210022_01+DC_d210022_01_90_01"},{name:"Receive Gift",code:"DC_d210022_01+DC_d210022_01_90_04"}],d210067_01:[{name:"Dragon's Roost",code:"DC_d210023_01+DC_d210023_01_90_01"},{name:"Receive Gift",code:"DC_d210023_01+DC_d210023_01_90_04"}],d210068_01:[{name:"Dragon's Roost",code:"DC_d210023_01+DC_d210023_01_90_01"},{name:"Receive Gift",code:"DC_d210023_01+DC_d210023_01_90_04"}],d210069_01:[{name:"Dragon's Roost",code:"DC_d210023_01+DC_d210023_01_90_01"},{name:"Receive Gift",code:"DC_d210023_01+DC_d210023_01_90_04"}],d210070_01:[{name:"Dragon's Roost",code:"DC_d210023_01+DC_d210023_01_90_01"},{name:"Receive Gift",code:"DC_d210023_01+DC_d210023_01_90_04"}]},_=function(e){return e.startsWith("w302")},s=function(e){return e.startsWith("c")&&!e.endsWith("_h")&&!i.v.has(e)},f=function(e){return e.startsWith("d")||"smith"===e},l=function(e){return f(e)?"dragon":s(e)?"chara":"base"},m=function(e){var n;return f(e)?null===(n=d[e])||void 0===n?void 0:n[0].code:s(e)?"MWM_CMN+CMN_MWM_03":""},b=function(e){return f(e)?1:2},v=function(e,n){Array.isArray(e)?e.forEach((function(e){return n(e)})):n(e)},p=function(e){if(0!==e.length){var n=new Set;e.forEach((function(e){if(e){var t=e.split("="),c=Object(a.a)(t),r=c[0],d=c.slice(1);if(d[0]){var _=1===d.length?d[0]:d.join("=");switch(r){case"et":n.add("eyeTexture");break;case"mt":n.add("mouthTexture");break;case"ei":n.add("eyeIdx");break;case"mi":n.add("mouthIdx");break;case"cc":n.add("animation");var s=Object(u.j)(_,"Animation");o.d.chainMaker.chain=s;break;case"bg":"transparent"!==_&&(_="#".concat(_));break;case"cam":_=_.split(",").map((function(e){return parseFloat(e)}))}var f=i.w[r],l=f.group,m=f.key,b="true"===_||"false"===_;o.d[l][m]=b?Boolean("true"===_):_}}}));var t=o.d.model.id;o.d.model.texture=t,n.has("eyeTexture")||(o.d.model.eyeTexture=t),n.has("mouthTexture")||(o.d.model.mouthTexture=t),n.has("eyeIdx")||(o.d.model.eyeIdx=b(t)),n.has("mouthIdx")||(o.d.model.mouthIdx=b(t)),n.has("animation")||(o.d.animation.code=m(t))}},h=function(e){var n=e.length,t="";return e.forEach((function(a,c){var r=a.fileName,o=a.aniName,i=a.faceChanges;r&&(t=(t=0===c?t.concat(r):t.concat(r!==e[c-1].fileName?r:"")).concat("+")),t=t.concat(o);var u=g(a);t=t.concat(u);var d=j(i);t=t.concat(d),c<n-1&&(t=t.concat(">"))})),t},g=function(e){var n="";return Object.keys(i.n).forEach((function(t){var a=i.n[t],c=a.key,r=a.defaultValue;e[c]!==r&&(n=n.concat("&".concat(t,"=").concat(e[c])))})),n},j=function(e){if(!e)return"";var n="";return e.forEach((function(e){var t=e.time,a=e.eyeIdx,c=e.mouthIdx;t&&(a&&(n=n.concat("&e-".concat(t,"=").concat(a))),c&&(n=n.concat("&m-".concat(t,"=").concat(c))))})),n},C=function(e){var n={};return Object.keys(e).forEach((function(t){var a=[];Object.keys(e[t]).forEach((function(n){e[t][n]&&a.push(n)})),n[t]=a})),n},D=function(e,n){var t=Object.keys(n);return e.filter((function(e){return t.every((function(t){return!n[t].length||n[t].includes(e[t])}))}))},O=function(e){var n,t=function(e){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}(e);return(299*(n=t).r+587*n.g+114*n.b)/1e3>128?"#000000":"#ffffff"},y=function(e,n,t){if(!e)return null;var a={maxWidth:"13.5rem"};return Object.keys(e).map((function(o){return Object(c.jsx)(r.a,{variant:"contained","data-value":e[o],"data-name":"".concat(t?"".concat(t," "):"").concat(o),onClick:n,style:a,children:o},o)}))},x=function(e,n){return"LOB_".concat(i.k[e],"+").concat(i.k[e],"_ONT_").concat(i.i[n])},w=function(e){return"WIN_".concat(i.k[e],"+").concat(i.k[e],"_WIN_01>+").concat(i.k[e],"_WIN_02")},k=function(e){return"DAS+".concat(i.k[e],"_DAS_02")},R=function(e){return"ROL+".concat(i.k[e],"_ROL_01")},S=function(e){for(var n=i.b[e],t=i.k[e],a="CMB_".concat(t),c=1;c<=n;c++)a=a.concat("+".concat(t,"_CMB_0").concat(c,">"));return a=a.slice(0,-1)},M=function(e){for(var n=i.h[e],t=i.k[e],a="FS_".concat(t),c=1;c<=n;c++)a=a.concat("+".concat(t,"_CHR_0").concat(c,">"));return a=a.slice(0,-1)},I=function(e,n){var t=i.k[e];return"Male"===n?"LOB_".concat(t,"+").concat(t,"_ONT_05&ts=-0.5>+").concat(t,"_ONT_02>+").concat(t,"_ONT_07>+").concat(t,"_ONT_08>+").concat(t,"_ONT_21"):"LOB_".concat(t,"+").concat(t,"_ONT_06&ts=-0.5>+").concat(t,"_ONT_04>+").concat(t,"_ONT_09>+").concat(t,"_ONT_10>+").concat(t,"_ONT_23")}},35:function(e,n,t){"use strict";t.d(n,"b",(function(){return y}));var a=t(6),c=t(10),r=t(15),o=t(54),i=t(12),u=t(13),d=t(0),_=t(56),s=t(79),f=t.n(s),l=t(126),m=t(76),b=(t(98),t(22)),v=t(9),p=Object(d.lazy)((function(){return Promise.all([t.e(2),t.e(31)]).then(t.bind(null,449))})),h={base:Object(d.lazy)((function(){return Promise.all([t.e(3),t.e(41)]).then(t.bind(null,163))})),chara:Object(d.lazy)((function(){return Promise.all([t.e(3),t.e(33)]).then(t.bind(null,450))})),dragon:Object(d.lazy)((function(){return Promise.all([t.e(3),t.e(34)]).then(t.bind(null,451))}))},g={chara:v.d,dragon:v.c};var j=function(e){var n=Object(d.useRef)(""),t=e.viewport,a=Object(d.useContext)(r.b),o=a.model.id,i=a.scene,u=i.rotateSpeed,_=i.background,s=i.initCameraPosition,f=i.lights,l=a.app,m=l.showAniControl,j=l.antiAliasing,C=Object(d.useContext)(r.a),D=Object(d.useCallback)((function(){C({type:"toggle",key:"capture",value:"enable"})}),[C]),O=o[0],y=v.q[o]||v.q[O],x=s?s.map((function(e,n){return isNaN(e)?y[n]:e})):y,w=v.s[o]||v.s[O],k=Object(d.useCallback)((function(e){var n=Object(b.g)(e);C({type:"update",key:"animation",value:{code:n}})}),[C]),R=Object(d.useCallback)((function(e){var n=g[e]||1;C({type:"update",key:"model",value:{eyeIdx:n,mouthIdx:n}})}),[C]);Object(d.useEffect)((function(){var e=Object(b.n)(o);n.current!==e&&(n.current&&(R(e),k(o)),n.current=e)}),[o,k,R]);var S=Object(b.n)(o),M=h[S];return Object(c.jsxs)("div",{className:"Display",children:[m&&Object(c.jsx)("div",{className:"Display-AniControl",style:{color:Object(b.l)(_)},children:Object(c.jsx)(d.Suspense,{fallback:null,children:Object(c.jsx)(p,{value:a.animation.timeScale})})}),Object(c.jsx)(d.Suspense,{fallback:null,children:Object(c.jsx)(M,{setIsLoading:e.setIsLoading,capture:a.capture,toggleCapture:D,viewport:t,cameraPosition:x,controlsPosition:w,model:a.model,materialParams:a.materialParams,outline:a.outline,animation:a.animation,rotateSpeed:u,lights:f,bgColor:_,antiAliasing:j,ascii:a.ascii})})]})},C=Object(d.lazy)((function(){return Promise.all([t.e(5),t.e(14),t.e(13)]).then(t.bind(null,462))})),D=Object(d.lazy)((function(){return Promise.all([t.e(5),t.e(27),t.e(46)]).then(t.bind(null,470))}));var O=function(e){var n=e.location,t=Object(m.a)(),a=Object(d.useState)("model"),o=Object(u.a)(a,2),i=o[0],s=o[1],v=Object(_.a)(!0),p=Object(u.a)(v,2),h=p[0],g=p[1],O=Object(_.a)(!1),y=Object(u.a)(O,2),x=y[0],w=y[1],k=Object(d.useState)(!1),R=Object(u.a)(k,2),S=R[0],M=R[1],I=Object(d.useState)(!1),G=Object(u.a)(I,2),N=G[0],T=G[1],E=Object(d.useRef)(null),A=Object(d.useContext)(r.b).app.showSettings,B=Object(d.useRef)(),P=Object(d.useState)({width:window.innerWidth,height:window.innerHeight}),W=Object(u.a)(P,2),L=W[0],z=W[1];Object(d.useEffect)((function(){var e=n.pathname.split("/");return Object(b.q)(e),T(!0),window.addEventListener("resize",F),function(){window.removeEventListener("resize",F)}}),[n.pathname]);var F=function(){var e=B.current.clientHeight,n=B.current.clientWidth;z({width:n,height:e})};return Object(c.jsxs)(c.Fragment,{children:[S&&Object(c.jsx)("div",{className:t.loadingMsg,children:"Loading..."}),Object(c.jsxs)("div",{className:t.root,children:[Object(c.jsxs)(d.Suspense,{fallback:null,children:[Object(c.jsx)(l.a,{}),Object(c.jsx)(C,{mode:i,handleSelect:E.current,open:x,toggleControlOpen:w}),N&&A&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{onClick:g,className:t.openSidebarButton,children:Object(c.jsx)(f.a,{})}),Object(c.jsx)(D,{toggleSidebarOpen:g,open:h,openControl:function(e,n){s(e),E.current=n,w()}})]})]}),N&&Object(c.jsx)("main",{ref:B,className:t.content,children:Object(c.jsx)(j,{setIsLoading:M,viewport:L})})]})]})};t(100);var y="/dl-model";n.a=function(){return Object(c.jsx)(r.c,{children:Object(c.jsx)(o.b,{children:Object(c.jsx)(i.a,{render:function(e){return Object(c.jsx)(O,Object(a.a)({},e))}})})})}},42:function(e,n,t){"use strict";t.d(n,"w",(function(){return v})),t.d(n,"l",(function(){return p})),t.d(n,"s",(function(){return g})),t.d(n,"o",(function(){return j})),t.d(n,"t",(function(){return C})),t.d(n,"b",(function(){return O})),t.d(n,"n",(function(){return y})),t.d(n,"u",(function(){return x})),t.d(n,"p",(function(){return w})),t.d(n,"q",(function(){return k})),t.d(n,"x",(function(){return R})),t.d(n,"k",(function(){return M})),t.d(n,"m",(function(){return I})),t.d(n,"g",(function(){return N})),t.d(n,"i",(function(){return E})),t.d(n,"h",(function(){return A})),t.d(n,"c",(function(){return P})),t.d(n,"e",(function(){return W})),t.d(n,"d",(function(){return z})),t.d(n,"f",(function(){return F})),t.d(n,"a",(function(){return q})),t.d(n,"r",(function(){return H})),t.d(n,"j",(function(){return V})),t.d(n,"v",(function(){return X})),t.d(n,"y",(function(){return J}));var a=t(6),c=t(64),r=t(78),o=t(50),i=t(43),u=t(13),d=t(1),_=t(35),s=t(127),f=t(9),l=t(58),m=t(80),b=t(22),v=function(e){return e&&new Promise((function(n){(new m.a).load(e,n)}))},p=function(){var e=new d.PlaneBufferGeometry(.1,.1);e.rotateX(Math.PI/2);var n=new d.MeshBasicMaterial;return n.visible=!1,new d.Mesh(e,n)},h=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return[];var t=[];return e.traverse((function(e){e.isMesh&&(n||"outline"!==e.name)&&t.unshift(e)})),t},g=function(e){return e?h(e).flatMap((function(e){return e.material})):[]},j=function(e,n){var t=Object.entries(e).filter((function(e){var t=Object(u.a)(e,2),a=t[0];t[1];return n.includes(a)}));return Object.fromEntries(t)},C=function(e){return"".concat(_.b,"/fbx/").concat(e,"/").concat(e,".fbx")},D=function(e){return"".concat(_.b,"/fbx/").concat(e,"/").concat(e,".png")},O=function(e){if(!e)return"";var n=e.endsWith("b"),t=e.substring(0,e.length-1);return{modelPath:C(t),texturePath:D(t),flipped:n}},y=function(e){if(e){var n=new Set,t=function(e){return e&&function(e){return!n.has(e.uuid)}(e)},a=function(e){t(e)&&function(e){n.add(e.uuid),e.dispose()}(e)};h(e,!0).forEach((function(e){var n;n=e,Object(b.b)(n.material,(function(e){a(e.map),a(e.backupMap),a(e)})),a(e.geometry)}))}},x=function(e){return[].concat(Object(i.a)(f.y),Object(i.a)(f.z[e]))},w=function(e){var n=[],t=/mEye_[0-9]/m;return e.traverse((function(e){if(e.isMesh){var a=e.name;t.test(a)&&n.push(e)}})),n},k=function(e){var n=[],t=/mMouth_[0-9]/m;return e.traverse((function(e){if(e.isMesh){var a=e.name;t.test(a)&&n.push(e)}})),n},R=function(e){h(e).forEach((function(e){return e.visible=!e.name.includes("Effect")}))},S=function(e,n){var t="Mesh".concat(e,"Material");return new d[t](n)},M=function(e,n){var t=n.materialType,a=n.texturePath,c=n.forced,r=void 0!==c&&c;e&&h(e).forEach((function(e){var n=[e.material].flat(),c=Array.isArray(e.material);if(!r&&!a){var o="isMesh".concat(t,"Material");if(!n.some((function(e){return!e[o]})))return}n.forEach((function(r,o){var i=a?(new d.TextureLoader).load(a):n[o].map;a&&(i.encoding=d.sRGBEncoding);var u,_,s,f,l=S(t,{map:i,skinning:!0});(l.name=r.name,r.backupMap&&(l.backupMap=r.backupMap),a)&&(null===(u=r.map)||void 0===u||null===(_=u.dispose)||void 0===_||_.call(u),null===(s=r.backupMap)||void 0===s||null===(f=s.dispose)||void 0===f||f.call(s));r.dispose(),c?e.material[o]=l:e.material=l}))}))},I=function(e,n){if(e){var t=[],a=["Eye","Mouth","Effect"];return h(e).forEach((function(e){var c=e.name;if(!a.some((function(e){return c.includes(e)}))){var r=e.clone();t.push(r);var o=G(n);T(r,o),r.visible=n.enable,r.name="outline",e.isSkinnedMesh&&r.bind(e.skeleton,e.bindMatrix),e.parent.add(r)}})),t}},G=function(e){var n=e.size,t=e.color,a=e.opacity,c={size:{type:"float",value:n},color:{tyle:"vec3",value:new d.Color(t)},opacity:{type:"float",value:a}};return new d.ShaderMaterial({skinning:!0,side:d.BackSide,transparent:!0,uniforms:c,fragmentShader:"#define OUTLINE\nuniform float opacity;\nuniform vec3 color;\nvoid main() {\n\tgl_FragColor = vec4( color, opacity );\n}",vertexShader:"#define OUTLINE\nuniform float size;\nvarying vec3 vViewPosition;\n#include <common>\n#include <color_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t\n    vec3 transformed = position + objectNormal*0.0005*size;\n        \n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n}"})},N=function(e,n){if(e&&n){var t=e.material;n.forEach((function(n,a){switch(a){case"enable":e.visible=n;break;case"color":Object(b.b)(t,(function(e){return e.uniforms.color.value=new d.Color(n)}));break;default:Object(b.b)(t,(function(e){return e.uniforms[a].value=n}))}}))}},T=function(e,n){var t=e.material;Object(b.b)(t,(function(e){var n,t,a,c;null===(n=(t=e.map).dispose)||void 0===n||n.call(t),null===(a=e.backupMap)||void 0===a||null===(c=a.dispose)||void 0===c||c.call(a),e.dispose()}));var a=Array.isArray(e.material);e.material=a?new Array(e.material.length).fill(n):n},E=function(e,n){var t={x:0,y:0};if(e!==n){var a=l.a[n]||{x:0,y:0},c=l.a[e]||{x:0,y:0};t.x=c.x-a.x,t.y=c.y-a.y}return t},A=function(e,n){var t={x:0,y:0};if(e!==n){var a=f.u["face".concat(n)],c=f.u["face".concat(e)];t.x=c.x-a.x,t.y=c.y-a.y}return t},B=function(e){return function(n,t){n.traverse((function(n){if("mBodyAll"===n.name&&3===n.geometry.groups.length){var a=n.geometry.groups.find((function(t){return n.material[t.materialIndex].name==="mt".concat(e,"CH")}));if(a){for(var c=a.start,r=c+a.count,o=n.geometry.attributes.uv,i=c;i<r;i++){var u=o.getX(i)+.25*t.x,d=o.getY(i)+.25*t.y;o.setXY(i,u,d)}o.needsUpdate=!0}}}))}},P=B("Eye"),W=B("Mouth"),L=function(e){return function(n,t){var a=t.materialType,c=t.textureId,r=D(c),o=(new d.TextureLoader).load(r);o.encoding=d.sRGBEncoding;var i=S(a,{map:o,skinning:!0});n.traverse((function(n){if("mBodyAll"===n.name&&3===n.geometry.groups.length){var t=n.geometry.groups.find((function(t){return n.material[t.materialIndex].name==="mt".concat(e,"CH")}));if(t){var a=t.materialIndex;i.name=n.material[a].name,n.material[a]=i}}}))}},z=L("Eye"),F=L("Mouth"),q=function(e){if(!e)return["",""];for(var n=e.split(">"),t=n.length,a=[],c=[],i=0;i<t;i++){var d,_=1,s=1,f=null,l=null,m=null,b=void 0,v=[],p=n[i].split("+");if(1===p.length)b=p[0];else{var h=Object(u.a)(p,2);m=h[0],b=h[1],f=a.length-1}if(m&&(f=a.length,a.push(m)),b.includes("&")){var g=b.split("&"),j=Object(o.a)(g),C=j[0],D=j.slice(1);l=C;var O,y=Object(r.a)(D);try{for(y.s();!(O=y.n()).done;){var x=O.value.split("="),w=Object(u.a)(x,2),k=w[0],R=w[1];if("ts"===k&&(_=parseFloat(R)),"r"===k&&(s="inf"===R?1/0:parseInt(R)),k.includes("-")){var S=k.split("-"),M=Object(u.a)(S,2),I=M[0],G=M[1],N={time:parseFloat(G)};N["".concat("e"===I?"eye":"mouth","Idx")]=R,v.push(N)}}}catch(T){y.e(T)}finally{y.f()}}else l=b;d={fileIdx:f,aniName:l,timeScale:_,repetitions:s,faceChanges:U(v)},c.push(d)}return[a,c]},U=function(e){if(!e.length)return e;var n=e.sort((function(e){return e.time})),t=new Set(e.map((function(e){return e.time})));if(e.length===t.size)return n.forEach((function(e){e.id=Object(s.a)()})),n;var a=[];return t.forEach((function(e){var t={time:e,id:Object(s.a)(),eyeIdx:"",mouthIdx:""};n.filter((function(n){return n.time===e})).forEach((function(e){return t=Object.assign(t,e)})),a.push(t)})),a},H=function(e,n){if(!e)return[];if(1===n)return Object(i.a)(e);return new Array(n).fill().map((function(e,n){return 100*n})).flatMap((function(n){return e.map((function(e){var t=e.time,r=(e.id,Object(c.a)(e,["time","id"]));return Object(a.a)(Object(a.a)({},r),{},{time:t+n})}))}))},V=function(e,n){var t=q(e),a=Object(u.a)(t,2),c=a[0],r=a[1],o=r.length;return r.map((function(e,t){var a=e.fileIdx,r=e.aniName,i=e.timeScale,u=e.repetitions,d=e.faceChanges;return{name:n.concat(o>1?"#".concat(t+1):""),fileName:c[a],aniName:r,timeScale:i,repetitions:u,faceChanges:d,id:Object(s.a)()}}))},X=function(e,n){return Object.entries(n).filter((function(n){var t=Object(u.a)(n,2),a=t[0];return t[1]!==e[a]}))},Y=function(e,n){var t,a=Object(u.a)(n,2),c=a[0],r=a[1],o=f.B.includes(c);switch(c){case"gradientMap":var i=parseInt(r),_=i?function(e){var n=new Uint8Array(e).map((function(n,t){return 256*t/e})),t=new d.DataTexture(n,e,1,d.LuminanceFormat);return t.minFilter=d.NearestFilter,t.magFilter=d.NearestFilter,t.generateMipmaps=!1,t}(i):null;t=function(e){return e.gradientMap=_};break;case"useTexture":t=r?function(e){e.map=e.backupMap,e.backupMap=null}:function(e){e.backupMap=e.map,e.map=null};break;default:var s=f.x.includes(c);t=function(e){return e[c]=s?new d.Color(r):r}}e.forEach((function(e){t(e),e.needsUpdate=o}))},J=function(e,n){var t=n.prevParams,a=void 0===t?{}:t,c=n.params,r=g(e);X(a,c).forEach((function(e){Y(r,e)}))}},56:function(e,n,t){"use strict";var a=t(13),c=t(0);n.a=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Object(c.useState)(e),t=Object(a.a)(n,2),r=t[0],o=t[1],i=Object(c.useCallback)((function(){o((function(e){return!e}))}),[o]);return[r,i]}},58:function(e,n,t){"use strict";n.a={c110296_02:{x:.043,y:-.0625},c100004_17:{x:.043,y:-.0625},c110371_01:{x:.043,y:-.0625},c110350_02:{x:.043,y:-.0625},c110340_02:{x:.043,y:-.0625},c110018_02:{x:.043,y:-.0625},c110370_01:{x:.043,y:-.0625},c100015_04:{x:.05,y:-.08},c110342_01:{x:0,y:-.02},c110267_01:{x:.08,y:-.03},c110050_02:{x:.07,y:.13},c110291_01:{x:.07,y:.14},c110354_01:{x:.07,y:.01},c110345_01:{x:.08,y:.15},c110266_01:{x:.01,y:.03},c110365_01:{x:.043,y:-.0625},c110346_01:{x:.07,y:.08},c110366_01:{x:.043,y:-.0625},c110299_02:{x:.07,y:.08},c110360_01:{x:.07,y:.14},c110307_01:{x:.08,y:-.03},c110322_01:{x:.043,y:.08},c110356_01:{x:.07,y:.08},c110300_01:{x:.07,y:-.1},c110344_01:{x:.07,y:-.02},c110053_03:{x:.043,y:-.0625},c110368_01:{x:.043,y:-.0625},c110367_01:{x:.043,y:-.0625},c110003_02:{x:.043,y:-.0625},c110270_02:{x:.043,y:-.0625},c110341_03:{x:.043,y:-.0625}}},76:function(e,n,t){"use strict";var a=t(104),c=t(9),r=t(77),o=c.f,i=c.e,u=Object(a.a)((function(e){return{root:{display:"block",width:"100vw",height:"100vh"},drawer:{width:o,overflowY:"scroll"},drawerPaper:{alignItems:"center",backgroundColor:i,backgroundImage:"url(".concat(r.a,")"),backgroundSize:"cover",backgroundPosition:"center",width:o,"& button":{marginBottom:"0.2rem"}},content:{height:"100vh",width:"100vw",padding:0},openSidebarButton:{position:"absolute",top:0,left:0,margin:"2rem",opacity:"0.5",borderRadius:"0.25rem",transition:"0.5s all ease-in-out",backgroundColor:"#cccccc",cursor:"pointer","&:hover":{opacity:"1"}},loadingMsg:{position:"absolute",zIndex:"9999",width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",color:"white",fontSize:"x-large",backgroundColor:"rgba(0,0,0,0.5)"}}}));n.a=u},77:function(e,n,t){"use strict";n.a=t.p+"static/media/Rose-Petals.bc11ecc7.svg"},9:function(e,n,t){"use strict";t.d(n,"f",(function(){return c})),t.d(n,"e",(function(){return r})),t.d(n,"d",(function(){return o})),t.d(n,"c",(function(){return i})),t.d(n,"p",(function(){return u})),t.d(n,"A",(function(){return d})),t.d(n,"x",(function(){return _})),t.d(n,"B",(function(){return f})),t.d(n,"o",(function(){return l})),t.d(n,"t",(function(){return m})),t.d(n,"w",(function(){return b})),t.d(n,"j",(function(){return v})),t.d(n,"y",(function(){return p})),t.d(n,"z",(function(){return h})),t.d(n,"k",(function(){return g})),t.d(n,"m",(function(){return j})),t.d(n,"i",(function(){return C})),t.d(n,"b",(function(){return D})),t.d(n,"h",(function(){return O})),t.d(n,"g",(function(){return y})),t.d(n,"l",(function(){return x})),t.d(n,"C",(function(){return w})),t.d(n,"v",(function(){return k})),t.d(n,"r",(function(){return R})),t.d(n,"a",(function(){return S})),t.d(n,"q",(function(){return M})),t.d(n,"s",(function(){return I})),t.d(n,"u",(function(){return G})),t.d(n,"n",(function(){return N})),t.d(n,"D",(function(){return T}));var a=t(6),c="16rem",r="#330000",o="2",i="1",u="https://dgk3593.github.io/dl-model/#/",d={wireframe:{name:"Wireframe",type:"boolean",default:!1},useTexture:{name:"Texture",type:"boolean",default:!0},transparent:{name:"Transparent",type:"boolean",default:!1},flatShading:{name:"Flat Shading",type:"boolean",default:!1},color:{name:"Color",type:"color",default:"#ffffff"},emissive:{name:"Emissive",type:"color",default:"#000000"},opacity:{name:"Opacity",type:"percentage",default:1,min:0,max:1,step:.05},emissiveIntensity:{name:"Emissive Intensity",type:"percentage",default:1,min:0,max:1,step:.05},specular:{name:"Specular",type:"color",default:"#111111"},metalness:{name:"Metalness",type:"percentage",default:0,min:0,max:1,step:.05},roughness:{name:"Roughness",type:"percentage",default:1,min:0,max:1,step:.05},shininess:{name:"Shininess",type:"number",default:30,min:1,max:100,step:1},gradientMap:{name:"Gradient Map",type:"select",default:"none",options:["none","2 Tones","3 Tones","4 Tones","5 Tones"]}},_=["color","emissive","specular"],s={};Object.keys(d).forEach((function(e){s[e]=d[e].default}));var f=["gradientMap","flatShading","useTexture"],l=[" .:-=+*#%@"," .'`^\",:;Il!i~+_-?][}{1)(|/tfjrxnuvczXYUJCLQ0OZmwqpdbkhao*#MW&8%B@$"],m={model:{materialType:"Basic",id:"c100001_01",texture:"c100001_01",eyeTexture:"c100001_01",eyeIdx:2,mouthTexture:"c100001_01",mouthIdx:2,weaponRight:"",weaponLeft:""},materialParams:Object(a.a)({},s),scene:{rotateSpeed:0,background:"#cccccc",initCameraPosition:null,lights:[{lightId:"0",type:"Ambient",color:"#444444",enable:!0,intensity:1},{lightId:"1",type:"Directional",color:"#ffffff",enable:!0,position:[50,0,100],intensity:.8}]},animation:{code:"MWM_CMN+CMN_MWM_03",timeScale:1},app:{sideContent:"settings",showSettings:!0,showAniControl:!0,antiAliasing:!1},outline:{enable:!0,size:5,color:"#000000",opacity:1},capture:{enable:!1,supportedCodecs:[],codec:""},ascii:{enable:!1,charSet:l[1],invert:!1,color:"#00ff00",bgColor:"#000000"}},b={id:{group:"model",key:"id"},et:{group:"model",key:"eyeTexture"},ei:{group:"model",key:"eyeIdx"},mt:{group:"model",key:"mouthTexture"},mi:{group:"model",key:"mouthIdx"},wr:{group:"model",key:"weaponRight"},wl:{group:"model",key:"weaponLeft"},bg:{group:"scene",key:"background"},cam:{group:"scene",key:"initCameraPosition"},ts:{group:"animation",key:"timeScale"},showAC:{group:"app",key:"showAniControl"},showSettings:{group:"app",key:"showSettings"},showOutline:{group:"outline",key:"enable"},AA:{group:"app",key:"antiAliasing"},rot:{group:"scene",key:"rotateSpeed"},cc:{group:"animation",key:"code"}},v=["Basic","Toon","Lambert","Phong","Standard"],p=["transparent","opacity","wireframe","useTexture","color"],h={Basic:[],Toon:["emissive","emissiveIntensity","gradientMap"],Lambert:["emissive","emissiveIntensity"],Phong:["emissive","emissiveIntensity","specular","shininess","flatShading"],Standard:["emissive","emissiveIntensity","metalness","roughness","flatShading"]},g={Sword:"SWD",Blade:"KAT",Dagger:"DAG",Axe:"AXE",Lance:"LAN",Bow:"BOW",Wand:"ROD",Staff:"CAN",Manacaster:"GUN"},j=["Sword","Blade","Dagger","Axe","Lance","Bow","Wand","Staff","Manacaster"],C={Male:21,Female:23},D={Axe:5,Bow:6,Staff:5,Dagger:6,Blade:5,Lance:5,Wand:5,Sword:5},O={Axe:3,Bow:3,Staff:5,Dagger:3,Blade:3,Lance:4,Wand:3,Sword:3},y={rarity:["3","4","5"],element:["Flame","Water","Wind","Light","Shadow"],weapon:["Sword","Blade","Dagger","Axe","Lance","Bow","Wand","Staff","Manacaster"]},x={rarity:["1","2","3","4","5","6"],element:["Flame","Water","Wind","Light","Shadow","None"],weapon:["Sword","Blade","Dagger","Axe","Lance","Bow","Wand","Staff","Manacaster"]},w={c110300_01:"ec110300_01"},k=new Set(["c100007_01","c100007_05","c100007_09","c100034_01","c100036_01","c100037_01","c100041_01"]),R={green:"#00ff00",black:"#000000",grey:"#cccccc",white:"#ffffff"},S={angle:45,far:300,near:.01},M={c:[0,.5,1.5],d:[0,1.5,6],w:[2,0,0],b:[1,.5,6],e:[1,1,4],h:[1,.5,3],o:[0,.5,8],r:[3,3,20],c100034_01:[0,.5,1.75],d210001_01:[0,1,4],d210002_01:[0,1,4],d210003_01:[0,1,4],d210004_01:[0,1,4],d210005_01:[0,1,4],d210078_01:[3,3,20],d210128_01:[0,.5,1.5],d210114_01:[3,3,20],h0010001:[6,.5,8],h0010001_02:[2,0,0],h0040101:[1,.5,4],r0070401:[30,30,100],r0080401:[1,2,5],smith:[1,1,2]},I={c:[0,.5,0],d:[0,1.5,0],w:[0,0,0],b:[0,1,0],e:[0,.5,0],h:[0,1,0],o:[0,0,0],r:[0,3,0],d210001_01:[0,1,0],d210002_01:[0,1,0],d210003_01:[0,1,0],d210004_01:[0,1,0],d210005_01:[0,1,0],d210078_01:[0,3,0],d210128_01:[0,.5,0],d210114_01:[0,3,0],h0010001_02:[0,3,0],r0070401:[0,20,0],r0080401:[0,2,0],smith:[0,.5,0]},G={face1:{x:2,y:1},face2:{x:0,y:0},face3:{x:1,y:0},face4:{x:2,y:0},face5:{x:3,y:0},face6:{x:0,y:-1},face7:{x:1,y:-1},face8:{x:2,y:-1},face9:{x:3,y:-1}},N={ts:{key:"timeScale",defaultValue:1},r:{key:"repetitions",defaultValue:1}},T=["video/webm;codecs=h264","video/webm;codecs=vp9","video/webm;codecs=vp8","video/webm"]},94:function(e,n,t){},98:function(e,n,t){}},[[102,10,12]]]);
//# sourceMappingURL=main.1caceca7.chunk.js.map