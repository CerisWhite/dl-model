(this["webpackJsonpdl-model"]=this["webpackJsonpdl-model"]||[]).push([[19],{492:function(t,e,r){"use strict";r.r(e),r.d(e,"STLExporter",(function(){return a}));var o=r(0),n=r(2),i=r(3),a=function(){function t(){Object(o.a)(this,t)}return Object(n.a)(t,[{key:"parse",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=void 0!==r.binary&&r.binary,n=[],a=0;t.traverse((function(t){if(t.isMesh){var e=t.geometry;if(!0!==e.isBufferGeometry)throw new Error("THREE.STLExporter: Geometry is not of type THREE.BufferGeometry.");var r=e.index,o=e.getAttribute("position");a+=null!==r?r.count/3:o.count/3,n.push({object3d:t,geometry:e})}}));var s=80;if(!0===o){var f=2*a+3*a*4*4+80+4,u=new ArrayBuffer(f);(e=new DataView(u)).setUint32(s,a,!0),s+=4}else e="",e+="solid exported\n";for(var c=new i.Vector3,l=new i.Vector3,p=new i.Vector3,d=new i.Vector3,m=new i.Vector3,y=new i.Vector3,b=0,v=n.length;b<v;b++){var x=n[b].object3d,w=n[b].geometry,g=w.index,h=w.getAttribute("position");if(null!==g)for(var V=0;V<g.count;V+=3){var E=g.getX(V+0),T=g.getX(V+1),z=g.getX(V+2);j(E,T,z,h,x)}else for(var A=0;A<h.count;A+=3){var B=A+0,F=A+1,M=A+2;j(B,F,M,h,x)}}return!1===o&&(e+="endsolid exported\n"),e;function j(t,r,n,i,a){c.fromBufferAttribute(i,t),l.fromBufferAttribute(i,r),p.fromBufferAttribute(i,n),!0===a.isSkinnedMesh&&(a.boneTransform(t,c),a.boneTransform(r,l),a.boneTransform(n,p)),c.applyMatrix4(a.matrixWorld),l.applyMatrix4(a.matrixWorld),p.applyMatrix4(a.matrixWorld),k(c,l,p),G(c),G(l),G(p),!0===o?(e.setUint16(s,0,!0),s+=2):(e+="\t\tendloop\n",e+="\tendfacet\n")}function k(t,r,n){d.subVectors(n,r),m.subVectors(t,r),d.cross(m).normalize(),y.copy(d).normalize(),!0===o?(e.setFloat32(s,y.x,!0),s+=4,e.setFloat32(s,y.y,!0),s+=4,e.setFloat32(s,y.z,!0),s+=4):(e+="\tfacet normal "+y.x+" "+y.y+" "+y.z+"\n",e+="\t\touter loop\n")}function G(t){!0===o?(e.setFloat32(s,t.x,!0),s+=4,e.setFloat32(s,t.y,!0),s+=4,e.setFloat32(s,t.z,!0),s+=4):e+="\t\t\tvertex "+t.x+" "+t.y+" "+t.z+"\n"}}}]),t}()}}]);
//# sourceMappingURL=STLExporter.6b24a603.chunk.js.map