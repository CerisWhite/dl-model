(this["webpackJsonpdl-model"]=this["webpackJsonpdl-model"]||[]).push([[61],{479:function(e,t,r){"use strict";r.r(t),r.d(t,"GLTFExporter",(function(){return S}));var a=r(1),n=0,i=1,s=2,o=3,l=4,u=5121,p=5123,f=5126,m=5125,c=34962,h=34963,g=9728,d=9729,v=9984,y=9985,b=9986,x=9987,T=33071,w=33648,M=10497,E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L={};L[a.NearestFilter]=g,L[a.NearestMipmapNearestFilter]=v,L[a.NearestMipmapLinearFilter]=b,L[a.LinearFilter]=d,L[a.LinearMipmapNearestFilter]=y,L[a.LinearMipmapLinearFilter]=x,L[a.ClampToEdgeWrapping]=T,L[a.RepeatWrapping]=M,L[a.MirroredRepeatWrapping]=w;var R={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},S=function(){};S.prototype={constructor:S,parse:function(e,t,r){var g={binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1};(r=Object.assign({},g,r)).animations.length>0&&(r.trs=!0);var d,v={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},y=0,b=[],x=[],T=new Map,w=[],M={},A={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map},I=new Map,F=0;function G(e){return I.has(e)||I.set(e,F++),I.get(e)}function N(e,t){return e.length===t.length&&e.every((function(e,r){return e===t[r]}))}function _(e){return 4*Math.ceil(e/4)}function B(e,t){t=t||0;var r=_(e.byteLength);if(r!==e.byteLength){var a=new Uint8Array(r);if(a.set(new Uint8Array(e)),0!==t)for(var n=e.byteLength;n<r;n++)a[n]=t;return a.buffer}return e}function z(e,t){if(0!==Object.keys(e.userData).length)try{var a=JSON.parse(JSON.stringify(e.userData));if(r.includeCustomExtensions&&a.gltfExtensions){for(var n in void 0===t.extensions&&(t.extensions={}),a.gltfExtensions)t.extensions[n]=a.gltfExtensions[n],M[n]=!0;delete a.gltfExtensions}Object.keys(a).length>0&&(t.extras=a)}catch(i){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+i.message)}}function C(e,t){var r=!1,a={};0===t.offset.x&&0===t.offset.y||(a.offset=t.offset.toArray(),r=!0),0!==t.rotation&&(a.rotation=t.rotation,r=!0),1===t.repeat.x&&1===t.repeat.y||(a.scale=t.repeat.toArray(),r=!0),r&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=a,M.KHR_texture_transform=!0)}function O(e){return v.buffers||(v.buffers=[{byteLength:0}]),b.push(e),0}function H(e,t,a,n){var i;if(e.array.constructor===Float32Array)i=f;else if(e.array.constructor===Uint32Array)i=m;else if(e.array.constructor===Uint16Array)i=p;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");i=u}if(void 0===a&&(a=0),void 0===n&&(n=e.count),r.truncateDrawRange&&void 0!==t&&null===t.index){var s=a+n,o=t.drawRange.count===1/0?e.count:t.drawRange.start+t.drawRange.count;a=Math.max(a,t.drawRange.start),(n=Math.min(s,o)-a)<0&&(n=0)}if(0===n)return null;var l,g=function(e,t,r){for(var a={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)},n=t;n<t+r;n++)for(var i=0;i<e.itemSize;i++){var s;e.itemSize>4?s=e.array[n*e.itemSize+i]:0===i?s=e.getX(n):1===i?s=e.getY(n):2===i?s=e.getZ(n):3===i&&(s=e.getW(n)),a.min[i]=Math.min(a.min[i],s),a.max[i]=Math.max(a.max[i],s)}return a}(e,a,n);void 0!==t&&(l=e===t.index?h:c);var d=function(e,t,r,a,n){var i;v.bufferViews||(v.bufferViews=[]),i=t===u?1:t===p?2:4;for(var s=_(a*e.itemSize*i),o=new DataView(new ArrayBuffer(s)),l=0,h=r;h<r+a;h++)for(var g=0;g<e.itemSize;g++){var d;e.itemSize>4?d=e.array[h*e.itemSize+g]:0===g?d=e.getX(h):1===g?d=e.getY(h):2===g?d=e.getZ(h):3===g&&(d=e.getW(h)),t===f?o.setFloat32(l,d,!0):t===m?o.setUint32(l,d,!0):t===p?o.setUint16(l,d,!0):t===u&&o.setUint8(l,d),l+=i}var b={buffer:O(o.buffer),byteOffset:y,byteLength:s};return void 0!==n&&(b.target=n),n===c&&(b.byteStride=e.itemSize*i),y+=s,v.bufferViews.push(b),{id:v.bufferViews.length-1,byteLength:0}}(e,i,a,n,l),b={bufferView:d.id,byteOffset:d.byteOffset,componentType:i,count:n,max:g.max,min:g.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(b.normalized=!0),v.accessors||(v.accessors=[]),v.accessors.push(b),v.accessors.length-1}function U(e,t,n){A.images.has(e)||A.images.set(e,{});var i=A.images.get(e),s=t===a.RGBAFormat?"image/png":"image/jpeg",o=s+":flipY/"+n.toString();if(void 0!==i[o])return i[o];v.images||(v.images=[]);var l={mimeType:s};if(r.embedImages){var u=d=d||document.createElement("canvas");u.width=Math.min(e.width,r.maxTextureSize),u.height=Math.min(e.height,r.maxTextureSize);var p=u.getContext("2d");if(!0===n&&(p.translate(0,u.height),p.scale(1,-1)),"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap)p.drawImage(e,0,0,u.width,u.height);else{t!==a.RGBAFormat&&t!==a.RGBFormat&&console.error("GLTFExporter: Only RGB and RGBA formats are supported."),(e.width>r.maxTextureSize||e.height>r.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);var f=e.data;if(t===a.RGBFormat){f=new Uint8ClampedArray(e.height*e.width*4);for(var m=0,c=0;m<f.length;m+=4,c+=3)f[m+0]=e.data[c+0],f[m+1]=e.data[c+1],f[m+2]=e.data[c+2],f[m+3]=255}p.putImageData(new ImageData(f,e.width,e.height),0,0)}!0===r.binary?x.push(new Promise((function(e){u.toBlob((function(t){(function(e){return v.bufferViews||(v.bufferViews=[]),new Promise((function(t){var r=new window.FileReader;r.readAsArrayBuffer(e),r.onloadend=function(){var e=B(r.result),a={buffer:O(e),byteOffset:y,byteLength:e.byteLength};y+=e.byteLength,v.bufferViews.push(a),t(v.bufferViews.length-1)}}))})(t).then((function(t){l.bufferView=t,e()}))}),s)}))):l.uri=u.toDataURL(s)}else l.uri=e.src;v.images.push(l);var h=v.images.length-1;return i[o]=h,h}function k(e){v.samplers||(v.samplers=[]);var t={magFilter:L[e.magFilter],minFilter:L[e.minFilter],wrapS:L[e.wrapS],wrapT:L[e.wrapT]};return v.samplers.push(t),v.samplers.length-1}function V(e){if(A.textures.has(e))return A.textures.get(e);v.textures||(v.textures=[]);var t={sampler:k(e),source:U(e.image,e.format,e.flipY)};e.name&&(t.name=e.name),v.textures.push(t);var r=v.textures.length-1;return A.textures.set(e,r),r}function D(e){if(A.materials.has(e))return A.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;v.materials||(v.materials=[]);var t={pbrMetallicRoughness:{}};e.isMeshBasicMaterial?(t.extensions={KHR_materials_unlit:{}},M.KHR_materials_unlit=!0):e.isGLTFSpecularGlossinessMaterial?(t.extensions={KHR_materials_pbrSpecularGlossiness:{}},M.KHR_materials_pbrSpecularGlossiness=!0):e.isMeshStandardMaterial||console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");var r=e.color.toArray().concat([e.opacity]);if(N(r,[1,1,1,1])||(t.pbrMetallicRoughness.baseColorFactor=r),e.isMeshStandardMaterial?(t.pbrMetallicRoughness.metallicFactor=e.metalness,t.pbrMetallicRoughness.roughnessFactor=e.roughness):e.isMeshBasicMaterial?(t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9):(t.pbrMetallicRoughness.metallicFactor=.5,t.pbrMetallicRoughness.roughnessFactor=.5),e.isGLTFSpecularGlossinessMaterial){t.pbrMetallicRoughness.baseColorFactor&&(t.extensions.KHR_materials_pbrSpecularGlossiness.diffuseFactor=t.pbrMetallicRoughness.baseColorFactor);var n=[1,1,1];e.specular.toArray(n,0),t.extensions.KHR_materials_pbrSpecularGlossiness.specularFactor=n,t.extensions.KHR_materials_pbrSpecularGlossiness.glossinessFactor=e.glossiness}if(e.metalnessMap||e.roughnessMap)if(e.metalnessMap===e.roughnessMap){var i={index:V(e.metalnessMap)};C(i,e.metalnessMap),t.pbrMetallicRoughness.metallicRoughnessTexture=i}else console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.");if(e.map){var s={index:V(e.map)};C(s,e.map),e.isGLTFSpecularGlossinessMaterial&&(t.extensions.KHR_materials_pbrSpecularGlossiness.diffuseTexture=s),t.pbrMetallicRoughness.baseColorTexture=s}if(e.isGLTFSpecularGlossinessMaterial&&e.specularMap){var o={index:V(e.specularMap)};C(o,e.specularMap),t.extensions.KHR_materials_pbrSpecularGlossiness.specularGlossinessTexture=o}if(e.emissive){var l=e.emissive.clone().multiplyScalar(e.emissiveIntensity).toArray();if(N(l,[0,0,0])||(t.emissiveFactor=l),e.emissiveMap){var u={index:V(e.emissiveMap)};C(u,e.emissiveMap),t.emissiveTexture=u}}if(e.normalMap){var p={index:V(e.normalMap)};e.normalScale&&-1!==e.normalScale.x&&(e.normalScale.x!==e.normalScale.y&&console.warn("THREE.GLTFExporter: Normal scale components are different, ignoring Y and exporting X."),p.scale=e.normalScale.x),C(p,e.normalMap),t.normalTexture=p}if(e.aoMap){var f={index:V(e.aoMap),texCoord:1};1!==e.aoMapIntensity&&(f.strength=e.aoMapIntensity),C(f,e.aoMap),t.occlusionTexture=f}e.transparent?t.alphaMode="BLEND":e.alphaTest>0&&(t.alphaMode="MASK",t.alphaCutoff=e.alphaTest),e.side===a.DoubleSide&&(t.doubleSided=!0),""!==e.name&&(t.name=e.name),z(e,t),v.materials.push(t);var m=v.materials.length-1;return A.materials.set(e,m),m}function K(e){var t=[e.geometry.uuid];if(Array.isArray(e.material))for(var r=0,u=e.material.length;r<u;r++)t.push(e.material[r].uuid);else t.push(e.material.uuid);var p=t.join(":");if(A.meshes.has(p))return A.meshes.get(p);var f,m=e.geometry;if(f=e.isLineSegments?i:e.isLineLoop?s:e.isLine?o:e.isPoints?n:e.material.wireframe?i:l,!0!==m.isBufferGeometry)throw new Error("THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.");var c={},h={},g=[],d=[],y={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},b=m.getAttribute("normal");void 0===b||function(e){if(A.attributesNormalized.has(e))return!1;for(var t=new a.Vector3,r=0,n=e.count;r<n;r++)if(Math.abs(t.fromBufferAttribute(e,r).length()-1)>5e-4)return!1;return!0}(b)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),m.setAttribute("normal",function(e){if(A.attributesNormalized.has(e))return A.attributesNormalized.get(e);for(var t=e.clone(),r=new a.Vector3,n=0,i=t.count;n<i;n++)r.fromBufferAttribute(t,n),0===r.x&&0===r.y&&0===r.z?r.setX(1):r.normalize(),t.setXYZ(n,r.x,r.y,r.z);return A.attributesNormalized.set(e,t),t}(b)));var x=null;for(var T in m.attributes)if("morph"!==T.substr(0,5)){var w=m.attributes[T];T=y[T]||T.toUpperCase();if(/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(T)||(T="_"+T),A.attributes.has(G(w)))h[T]=A.attributes.get(G(w));else{x=null;var M=w.array;"JOINTS_0"!==T||M instanceof Uint16Array||M instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),x=new a.BufferAttribute(new Uint16Array(M),w.itemSize,w.normalized));var E=H(x||w,m);null!==E&&(h[T]=E,A.attributes.set(G(w),E))}}if(void 0!==b&&m.setAttribute("normal",b),0===Object.keys(h).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){var L=[],R=[],S={};if(void 0!==e.morphTargetDictionary)for(var I in e.morphTargetDictionary)S[e.morphTargetDictionary[I]]=I;for(r=0;r<e.morphTargetInfluences.length;++r){var F={},N=!1;for(var T in m.morphAttributes)if("position"===T||"normal"===T){w=m.morphAttributes[T][r];var _=T.toUpperCase(),B=m.attributes[T];if(A.attributes.has(G(w)))F[_]=A.attributes.get(G(w));else{var C=w.clone();if(!m.morphTargetsRelative)for(var O=0,U=w.count;O<U;O++)C.setXYZ(O,w.getX(O)-B.getX(O),w.getY(O)-B.getY(O),w.getZ(O)-B.getZ(O));F[_]=H(C,m),A.attributes.set(G(B),F[_])}}else N||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),N=!0);d.push(F),L.push(e.morphTargetInfluences[r]),void 0!==e.morphTargetDictionary&&R.push(S[r])}c.weights=L,R.length>0&&(c.extras={},c.extras.targetNames=R)}var k=Array.isArray(e.material);if(k&&0===m.groups.length)return null;for(var V=k?e.material:[e.material],K=k?m.groups:[{materialIndex:0,start:void 0,count:void 0}],P=(r=0,K.length);r<P;r++){var X={mode:f,attributes:h};if(z(m,X),d.length>0&&(X.targets=d),null!==m.index){var Y=G(m.index);void 0===K[r].start&&void 0===K[r].count||(Y+=":"+K[r].start+":"+K[r].count),A.attributes.has(Y)?X.indices=A.attributes.get(Y):(X.indices=H(m.index,m,K[r].start,K[r].count),A.attributes.set(Y,X.indices)),null===X.indices&&delete X.indices}var j=D(V[K[r].materialIndex]);null!==j&&(X.material=j),g.push(X)}c.primitives=g,v.meshes||(v.meshes=[]),v.meshes.push(c);var J=v.meshes.length-1;return A.meshes.set(p,J),J}function P(e,t){v.animations||(v.animations=[]);for(var r=(e=S.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,n=[],i=[],s=0;s<r.length;++s){var o=r[s],l=a.PropertyBinding.parseTrackName(o.name),u=a.PropertyBinding.findNode(t,l.nodeName),p=R[l.propertyName];if("bones"===l.objectName&&(u=!0===u.isSkinnedMesh?u.skeleton.getBoneByName(l.objectIndex):void 0),!u||!p)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',o.name),null;var f,m=o.values.length/o.times.length;p===R.morphTargetInfluences&&(m/=u.morphTargetInfluences.length),!0===o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(f="CUBICSPLINE",m/=3):f=o.getInterpolation()===a.InterpolateDiscrete?"STEP":"LINEAR",i.push({input:H(new a.BufferAttribute(o.times,1)),output:H(new a.BufferAttribute(o.values,m)),interpolation:f}),n.push({sampler:i.length-1,target:{node:T.get(u),path:p}})}return v.animations.push({name:e.name||"clip_"+v.animations.length,samplers:i,channels:n}),v.animations.length-1}function X(e){var t=v.nodes[T.get(e)],r=e.skeleton;if(void 0===r)return null;var n=e.skeleton.bones[0];if(void 0===n)return null;for(var i=[],s=new Float32Array(16*r.bones.length),o=new a.Matrix4,l=0;l<r.bones.length;++l)i.push(T.get(r.bones[l])),o.copy(r.boneInverses[l]),o.multiply(e.bindMatrix).toArray(s,16*l);return void 0===v.skins&&(v.skins=[]),v.skins.push({inverseBindMatrices:H(new a.BufferAttribute(s,16)),joints:i,skeleton:T.get(n)}),t.skin=v.skins.length-1}function Y(e){var t={};e.name&&(t.name=e.name),t.color=e.color.toArray(),t.intensity=e.intensity,e.isDirectionalLight?t.type="directional":e.isPointLight?(t.type="point",e.distance>0&&(t.range=e.distance)):e.isSpotLight&&(t.type="spot",e.distance>0&&(t.range=e.distance),t.spot={},t.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,t.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!e.target||e.target.parent===e&&0===e.target.position.x&&0===e.target.position.y&&-1===e.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1.");var r=v.extensions.KHR_lights_punctual.lights;return r.push(t),r.length-1}function j(e){v.nodes||(v.nodes=[]);var t={};if(r.trs){var n=e.quaternion.toArray(),i=e.position.toArray(),s=e.scale.toArray();N(n,[0,0,0,1])||(t.rotation=n),N(i,[0,0,0])||(t.translation=i),N(s,[1,1,1])||(t.scale=s)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===N(e.matrix.elements,E)&&(t.matrix=e.matrix.elements);if(""!==e.name&&(t.name=String(e.name)),z(e,t),e.isMesh||e.isLine||e.isPoints){var o=K(e);null!==o&&(t.mesh=o)}else if(e.isCamera)t.camera=function(e){v.cameras||(v.cameras=[]);var t=e.isOrthographicCamera,r={type:t?"orthographic":"perspective"};return t?r.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:r.perspective={aspectRatio:e.aspect,yfov:a.MathUtils.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(r.name=e.type),v.cameras.push(r),v.cameras.length-1}(e);else if(e.isDirectionalLight||e.isPointLight||e.isSpotLight)M.KHR_lights_punctual||(v.extensions=v.extensions||{},v.extensions.KHR_lights_punctual={lights:[]},M.KHR_lights_punctual=!0),t.extensions=t.extensions||{},t.extensions.KHR_lights_punctual={light:Y(e)};else if(e.isLight)return console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e),null;if(e.isSkinnedMesh&&w.push(e),e.children.length>0){for(var l=[],u=0,p=e.children.length;u<p;u++){var f=e.children[u];if(f.visible||!1===r.onlyVisible){var m=j(f);null!==m&&l.push(m)}}l.length>0&&(t.children=l)}v.nodes.push(t);var c=v.nodes.length-1;return T.set(e,c),c}function J(e){v.scenes||(v.scenes=[],v.scene=0);var t={};""!==e.name&&(t.name=e.name),v.scenes.push(t);for(var a=[],n=0,i=e.children.length;n<i;n++){var s=e.children[n];if(s.visible||!1===r.onlyVisible){var o=j(s);null!==o&&a.push(o)}}a.length>0&&(t.nodes=a),z(e,t)}!function(e){e=e instanceof Array?e:[e];for(var t=[],n=0;n<e.length;n++)e[n]instanceof a.Scene?J(e[n]):t.push(e[n]);for(t.length>0&&function(e){var t=new a.Scene;t.name="AuxScene";for(var r=0;r<e.length;r++)t.children.push(e[r]);J(t)}(t),n=0;n<w.length;++n)X(w[n]);for(n=0;n<r.animations.length;++n)P(r.animations[n],e[0])}(e),Promise.all(x).then((function(){var e=new Blob(b,{type:"application/octet-stream"}),a=Object.keys(M);if(a.length>0&&(v.extensionsUsed=a),v.buffers&&v.buffers.length>0&&(v.buffers[0].byteLength=e.size),!0===r.binary){(n=new window.FileReader).readAsArrayBuffer(e),n.onloadend=function(){var e=B(n.result),r=new DataView(new ArrayBuffer(8));r.setUint32(0,e.byteLength,!0),r.setUint32(4,5130562,!0);var a=B(function(e){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(e).buffer;for(var t=new Uint8Array(new ArrayBuffer(e.length)),r=0,a=e.length;r<a;r++){var n=e.charCodeAt(r);t[r]=n>255?32:n}return t.buffer}(JSON.stringify(v)),32),i=new DataView(new ArrayBuffer(8));i.setUint32(0,a.byteLength,!0),i.setUint32(4,1313821514,!0);var s=new ArrayBuffer(12),o=new DataView(s);o.setUint32(0,1179937895,!0),o.setUint32(4,2,!0);var l=12+i.byteLength+a.byteLength+r.byteLength+e.byteLength;o.setUint32(8,l,!0);var u=new Blob([s,i,a,r,e],{type:"application/octet-stream"}),p=new window.FileReader;p.readAsArrayBuffer(u),p.onloadend=function(){t(p.result)}}}else{var n;if(v.buffers&&v.buffers.length>0)(n=new window.FileReader).readAsDataURL(e),n.onloadend=function(){var e=n.result;v.buffers[0].uri=e,t(v)};else t(v)}}))}},S.Utils={insertKeyframe:function(e,t){var r,a=.001,n=e.getValueSize(),i=new e.TimeBufferType(e.times.length+1),s=new e.ValueBufferType(e.values.length+n),o=e.createInterpolant(new e.ValueBufferType(n));if(0===e.times.length){i[0]=t;for(var l=0;l<n;l++)s[l]=0;r=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<a)return 0;i[0]=t,i.set(e.times,1),s.set(o.evaluate(t),0),s.set(e.values,n),r=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<a)return e.times.length-1;i[i.length-1]=t,i.set(e.times,0),s.set(e.values,0),s.set(o.evaluate(t),e.values.length),r=i.length-1}else for(l=0;l<e.times.length;l++){if(Math.abs(e.times[l]-t)<a)return l;if(e.times[l]<t&&e.times[l+1]>t){i.set(e.times.slice(0,l+1),0),i[l+1]=t,i.set(e.times.slice(l+1),l+2),s.set(e.values.slice(0,(l+1)*n),0),s.set(o.evaluate(t),(l+1)*n),s.set(e.values.slice((l+1)*n),(l+2)*n),r=l+1;break}}return e.times=i,e.values=s,r},mergeMorphTargetTracks:function(e,t){for(var r=[],n={},i=e.tracks,s=0;s<i.length;++s){var o=i[s],l=a.PropertyBinding.parseTrackName(o.name),u=a.PropertyBinding.findNode(t,l.nodeName);if("morphTargetInfluences"===l.propertyName&&void 0!==l.propertyIndex){if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),(o=o.clone()).setInterpolation(a.InterpolateLinear)}var p,f=u.morphTargetInfluences.length,m=u.morphTargetDictionary[l.propertyIndex];if(void 0===m)throw new Error("THREE.GLTFExporter: Morph target name not found: "+l.propertyIndex);if(void 0!==n[u.uuid]){var c=o.createInterpolant(new o.ValueBufferType(1));p=n[u.uuid];for(d=0;d<p.times.length;d++)p.values[d*f+m]=c.evaluate(p.times[d]);for(d=0;d<o.times.length;d++){var h=this.insertKeyframe(p,o.times[d]);p.values[h*f+m]=o.values[d]}}else{for(var g=new((p=o.clone()).ValueBufferType)(f*p.times.length),d=0;d<p.times.length;d++)g[d*f+m]=p.values[d];p.name=(l.nodeName||"")+".morphTargetInfluences",p.values=g,n[u.uuid]=p,r.push(p)}}else r.push(o)}return e.tracks=r,e}}}}]);
//# sourceMappingURL=61.b19d85a0.chunk.js.map