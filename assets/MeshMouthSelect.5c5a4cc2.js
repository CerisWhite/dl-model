var W=Object.defineProperty,A=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var U=(t,o,e)=>o in t?W(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,h=(t,o)=>{for(var e in o||(o={}))w.call(o,e)&&U(t,e,o[e]);if(m)for(var e of m(o))F.call(o,e)&&U(t,e,o[e]);return t},v=(t,o)=>A(t,G(o));var $=(t,o)=>{var e={};for(var n in t)w.call(t,n)&&o.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&m)for(var n of m(t))o.indexOf(n)<0&&F.call(t,n)&&(e[n]=t[n]);return e};import{E as Z,G as I,j as i,H as q,a as b}from"./index.cccd4434.js";import"./vendor.4e41ac58.js";import{B as J}from"./Box.11c62c30.js";import{B as K}from"./Button.b5f5079d.js";const L=t=>`${I}/${t}/${t}.png`,Q=[1,2,3,4,5,6,7,8,9],B=64,V=Q.map(t=>{if(t===1)return[-280,-170];const o=(t-2)%4,e=Math.floor(t/6),n=-(24+o*128),s=-(298+e*128);return[n,s]}),R=(t,o)=>{const[e,n]=V[o-1],[s,c]=Z(t),a=s*128,r=c*128,d=e-a,u=n+r;return{x:d,y:u}},tt=(t,o)=>{const{x:e,y:n}=R(t,o),s=n-B/2;return{x:e,y:s}};function _(s){var c=s,{texture:t,x:o,y:e}=c,n=$(c,["texture","x","y"]);const r={backgroundImage:`url(${L(t)})`,backgroundSize:"512px 512px",backgroundPosition:`${o}px ${e}px`,width:B,height:B/2};return i("div",h({style:r},n))}function ht(n){var s=n,{texture:t,index:o}=s,e=$(s,["texture","index"]);const{x:c,y:a}=R(t,o);return i(_,h({texture:t,x:c,y:a,className:"EyeBox"},e))}function dt(n){var s=n,{texture:t,index:o}=s,e=$(s,["texture","index"]);const{x:c,y:a}=tt(t,o);return i(_,h({texture:t,x:c,y:a,className:"EyeBox"},e))}const D=t=>{let o=t[0],e=t[0];return t.forEach(n=>{o=n<o?n:o,e=n>e?n:e}),[o,e]},et=t=>t.map(o=>{const e=o.geometry.attributes.uv.array,n=e.filter((u,x)=>x%2==0),s=e.filter((u,x)=>x%2==1),[c,a]=D(n),[r,d]=D(s);return{u:[c,a],v:[r,d]}});const ot=t=>`${I}/${t}/${q(t)}.png`,y=1024,l=160;function nt({id:t,uvList:o,onClick:e,part:n}){const s=ot(t),[c,a]=o[0].u,[r,d]=o[0].v,u=a-c,x=d-r,X=u*y,z=x*y,E=X/l,g=y/E,f=z/E,C={width:l,height:f,position:"relative",borderRadius:"0.5rem",overflow:"hidden"},P={content:'""',position:"absolute",backgroundImage:`url(${s})`,backgroundSize:`${g}px ${g}px`,width:l,height:f},H=({u:p,v:M})=>{const S=p[1]-p[0]!==u,O=p[0],Y=M[0],T=O*g,j=Y*g,k=S?(l-f)/2:0;return S?{width:f,height:l,"&::after":v(h({},P),{width:f,height:l,backgroundPosition:`left -${T}px bottom -${j}px`,transform:`rotate(90deg) translate(-${k}px, -${k}px)`,position:"absolute"})}:{width:l,height:f,position:"relative","&::after":v(h({},P),{backgroundPosition:`left -${T}px bottom -${j}px`})}};return b("div",{className:"MeshFaceButton",children:[o.map((p,M)=>i("div",{style:C,onClick:e,"data-index":M+1,"data-part":n,children:i(J,{sx:H(p)})})),i(K,{"data-part":n,"data-index":"0",onClick:e,variant:"outlined",children:"Remove"})]})}const st=([t,...o])=>`${t.toUpperCase()}${o.join("")}`;function N({target:t,onSelect:o,part:e}){var a,r;const n=(a=t==null?void 0:t.face)==null?void 0:a[`${e}List`];if(!n)return null;const s=(r=t.userData[`${e}Uv`])!=null?r:et(n);t.userData[`${e}Uv`]=s;const c=d=>{const{index:u,part:x}=d.currentTarget.dataset;o(parseInt(u),x)};return n&&b("div",{className:"MeshPartSelect",children:[b("h3",{children:["Select ",st(e)]}),i(nt,{id:t.id,uvList:s,onClick:c,part:e})]})}const xt=t=>i(N,h({part:"eye"},t)),lt=t=>i(N,h({part:"mouth"},t));export{ht as E,dt as M,ot as a,xt as b,lt as c,et as g,Q as i};
