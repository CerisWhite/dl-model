var R=Object.defineProperty,z=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var W=(e,n,t)=>n in e?R(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,m=(e,n)=>{for(var t in n||(n={}))w.call(n,t)&&W(e,t,n[t]);if(N)for(var t of N(n))P.call(n,t)&&W(e,t,n[t]);return e},p=(e,n)=>z(e,_(n));var B=(e,n)=>{var t={};for(var s in e)w.call(e,s)&&n.indexOf(s)<0&&(t[s]=e[s]);if(e!=null&&N)for(var s of N(e))n.indexOf(s)<0&&P.call(e,s)&&(t[s]=e[s]);return t};import{F as K,ab as y,a4 as C}from"./vendor.732e1712.js";import{L as Q,W as D,u as Y,S as X}from"./lists.cee1c808.js";import{S as q}from"./Stretcher.95bae5fa.js";import{a as J,b as Z,T as ee}from"./TabBar.a35ad3cd.js";import{j as a,a as d,h as g,F as A,q as ne,k as ae,L as te,v as ie}from"./index.cbf2f459.js";import{B as S}from"./Button.6970e5e7.js";/* empty css               */import{h as oe,M as se}from"./ModelIcon.d61a8bd6.js";import{G as T,u as v}from"./Gallery.83c0db5a.js";import{s as ce,g as re}from"./aniFunction.f42f9ce9.js";import{S as M}from"./Selector.23153a8a.js";import{u as le}from"./useKey.fc9f7fb9.js";import{U as ue,f as de}from"./file2dataURL.1d168a5e.js";import{u as me}from"./useToggleState.6a131330.js";import{C as pe}from"./Check.39a86d02.js";import{c as j}from"./createSvgIcon.1ad944e7.js";import{B as E}from"./Box.763616eb.js";import{a as he,b as ge}from"./DialogTitle.90467f06.js";import"./Close.4b5f4bc9.js";import"./ButtonBase.20ab22a1.js";import"./Popover.bd4c2ea3.js";import"./GlowToggle.a55c51b7.js";const ve=e=>e&&new Promise(n=>{new K().load(e,n)});var fe=j(a("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),Ae=j(a("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit"),Se=j(a("path",{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"}),"Upload");function be(r){var u=r,{icon:e="",subIcon:n="",title:t,subtitle:s="",onClick:i}=u,o=B(u,["icon","subIcon","title","subtitle","onClick"]);const c=e&&d("div",{className:"IconButton-icons",children:[a("img",{className:"IconButton-mainIcon",src:e,alt:t,loading:"lazy"}),n&&a("img",{className:"IconButton-subIcon",src:n,alt:n,loading:"lazy"})]}),l=d("div",{className:"IconButton-description",children:[s&&a("h5",{className:"IconButton-subtitle",children:s}),a("h3",{className:"IconButton-title",children:t})]});return a(S,p(m({variant:"outlined",className:"IconButton",onClick:i,startIcon:c},o),{children:l}))}function F({icon:e,user:n,name:t,fullName:s=t,subtitle:i="",code:o,onClick:r}){const u=oe(n)?`img/icon/${n}.png`:"",c=e?`img/aniIcon/${e}.png`:u;return a(be,{icon:c,subIcon:e&&u,title:t,subtitle:i,onClick:r,"data-code":o,"data-name":s})}function ye({icon:e,user:n,code:t,fullName:s,onClick:i}){return a(F,{icon:e,user:n,name:s,code:t,onClick:i})}function Ce({query:e,onSelect:n}){const[t,s]=y([]),[i,o]=y(!0);return C(()=>{o(!0),setTimeout(async()=>{const r=await ce(e);s(r),o(!1)})},[e]),d("div",{className:"AniSearchResult",children:[a(q,{}),i?a(Q,{}):a(T,{list:t,component:ye,onClick:n})]})}const ke=[{label:"Home Screen",name:"home"},{label:"In Quest",name:"quest"},{label:"Weapon Specific",name:"weapon"},{label:"Generic Skills",name:"genericSkill"},{label:"Unique Skills",name:"uniqueSkill"},{label:"Unique Combo",name:"uniqueCombo"},{label:"Unique Force Strike",name:"uniqueFS"},{label:"Unique Victory",name:"uniqueVictory"},{label:"Other Unique",name:"uniqueOther"},{label:"Misc",name:"misc"}];function O({tabs:e,value:n,onChange:t}){return a(J,{variant:"scrollable",orientation:"vertical",className:"VerticalTabs",value:n,onChange:(i,o)=>t(o),children:e.map(({label:i,name:o})=>a(Z,{label:i!=null?i:o,value:o},o))})}const Ne={minHeight:"3rem"};function I(o){var r=o,{name:e,code:n,onClick:t,fullName:s}=r,i=B(r,["name","code","onClick","fullName"]);return a(S,p(m({className:"AniSelect-Btn",variant:"contained","data-code":n,"data-name":s!=null?s:e,onClick:t,sx:Ne},i),{children:e}))}const Be=["Male","Female"];function qe({value:e,onClick:n}){return a(M,{type:"text",options:Be,value:e,onClick:n})}function $e({onSelect:e}){const{gender:n,setGender:t}=g(i=>i.advAni.home),s=v(i=>i["ani-home"]);return d("div",{className:"HomeAni",children:[a("h3",{className:"HomeAni-groupTitle",children:"Common Animation"}),a("div",{className:"AniSelect-simpleBtns",children:s.common.map(({name:i,code:o})=>a(I,{name:i,code:o,onClick:e,className:"AniSelect-Btn"},i))}),a("hr",{}),d("div",{className:"HomeAni-groupTitle",children:[a("h3",{children:"Gender Specific"}),a(qe,{value:n,onClick:t})]}),a("div",{className:"AniSelect-simpleBtns",children:s[n].map(({name:i,code:o})=>a(I,{name:i,code:o,fullName:`${n} ${i}`,onClick:e,className:"AniSelect-Btn"},i))})]})}function b({list:e,onClick:n}){return a(T,{list:e,component:I,onClick:n})}function xe({onSelect:e}){const n=v(t=>t["ani-quest"]);return a(b,{list:n,onClick:e})}const L=["Long","Close","Rapid"],Ue=L.map(e=>`img/appIcon/gun_${e}.png`);function Te({value:e,onClick:n}){return a(M,{type:"icon",options:L,icons:Ue,labels:L,value:e,onClick:n})}const Me=D.map(e=>`img/appIcon/weapon_${e}.png`);function $({value:e,onClick:n}){return a(M,{type:"icon",options:D,icons:Me,value:e,onClick:n})}const je={Long:"Long Range",Close:"Close Range",Rapid:"Rapid Fire"};function Ie({onSelect:e}){const{type:n,setType:t,gunMode:s,setGunMode:i}=g(l=>l.advAni.weapon),o=v(l=>l["ani-weapon"]),r=v(l=>l["ani-gun"]),u=o[n].map(l=>p(m({},l),{fullName:`${n} ${l.name}`})),c=r[s].map(l=>p(m({},l),{fullName:`${je[s]} Manacaster ${l.name}`}));return d("div",{className:"WeaponAni",children:[a($,{value:n,onClick:t}),a(b,{list:u,onClick:e}),n==="Manacaster"&&d(A,{children:[a(Te,{value:s,onClick:i}),a(b,{list:c,onClick:e})]})]})}function Le({onSelect:e}){const{type:n,setType:t}=g(o=>o.advAni.genericSkill),i=v(o=>o["ani-genericSkill"])[n].map(o=>p(m({},o),{fullName:`${n} ${o.name}`}));return d("div",{className:"GenericSkills",children:[a($,{value:n,onClick:t}),a(b,{list:i,onClick:e})]})}function H({list:e,onClick:n}){return a(T,{list:e,component:F,onClick:n})}const Ge=e=>p(m({},e),{fullName:`${e.name} Victory`}),we=e=>p(m({},e),{fullName:`${e.name} ${e.subtitle||""} Combo`}),Pe=e=>p(m({},e),{fullName:`${e.name} ${e.subtitle||""} Force Strike`}),We=e=>p(m({},e),{fullName:e.subtitle?`${e.subtitle} ${e.name}`:e.name}),De={uniqueCombo:we,uniqueFS:Pe,uniqueVictory:Ge,uniqueSkill:We};function x({name:e,onSelect:n}){var l,f;const t=`ani-${e}`,s=(l=v(h=>h[t]))!=null?l:{},{setGroupWeaponType:i}=g(h=>h.advAni.groupByWeapon),o=h=>i(e,h),r=g(h=>h.advAni.groupByWeapon[e]);r!=null||o(Object.keys(s)[0]);const u=De[e],c=u?(f=s[r])==null?void 0:f.map(u):s[r];return d("div",{className:"AniGroup",children:[a($,{value:r,onClick:o}),a(H,{list:c,onClick:n},r)]})}function Ee({onSelect:e}){const n=v(t=>t["ani-misc"]);return a(b,{list:n,onClick:e})}function Fe({expanded:e,user:n,name:t,animations:s,onClick:i,onSelect:o}){return d(A,{children:[d("div",{className:`UniqueAniGroup ${e?"selected":""}`,"data-user":n,onClick:i,children:[a(se,{modelId:n,alt:t}),a("h3",{children:t})]}),e&&a("div",{className:"UniqueAniGroup-details",children:a(b,{list:s,onClick:o})})]})}function Oe({onSelect:e}){const n=v(c=>c["ani-uniqueOther"]),{type:t,setType:s,selected:i,setSelected:o}=g(c=>c.advAni.uniqueOther),r=n[t],u=c=>{const{user:l}=c.currentTarget.dataset;o(l===i?"":l)};return a(A,{children:d("div",{className:"OtherUniqueAni",children:[a($,{value:t,onClick:s}),a("hr",{}),a("div",{className:"OtherUniqueAni-groups",children:r.map(c=>a(Fe,p(m({expanded:i===c.user},c),{onClick:u,onSelect:e})))})]})})}const He={home:$e,quest:xe,weapon:Ie,genericSkill:Le,uniqueSkill:e=>a(x,p(m({},e),{name:"uniqueSkill"})),uniqueVictory:e=>a(x,p(m({},e),{name:"uniqueVictory"})),uniqueFS:e=>a(x,p(m({},e),{name:"uniqueFS"})),uniqueCombo:e=>a(x,p(m({},e),{name:"uniqueCombo"})),uniqueOther:Oe,misc:Ee};function Ve({onSelect:e}){var i;const{category:n,setCategory:t}=g(o=>o.advAni),s=(i=He[n])!=null?i:q;return d("div",{className:"AniSelect-categories",children:[a(O,{tabs:ke,value:n,onChange:t}),a("div",{className:"AniSelect-subCategory",children:a(s,{onSelect:e})})]})}function Re(){const{source:e,setSource:n,sourceName:t,setSourceName:s}=g(c=>c.personalAni),{inputModel:i}=ne(),o=(c,l)=>{s(l),n(c)},r=async()=>{const c=await i();c&&o(...c)};C(()=>{t||setTimeout(async()=>{const c=await ae(e);(c==null?void 0:c.id)&&s(c.name)})},[e]);const u=["b","w"].includes(e==null?void 0:e[0])?`img/icon/${e}.png`:`img/portrait/${e}.png`;return d("div",{className:"PersonalAni-source",children:[e&&a("img",{src:u,alt:e},e),d("div",{children:[a("h3",{children:t}),a(S,{variant:"outlined",onClick:r,children:"Change Source"})]})]})}function ze({onSelect:e}){const n=!!indexedDB,{source:t}=g(o=>o.personalAni),[s,i]=y([]);return C(()=>{i([]),setTimeout(async()=>{var u;if(!t)return;const r=((u=te(t))!=null?u:n?await re(t):[]).map(c=>p(m({},c),{user:void 0}));i(r)})},[t]),a(H,{list:s,onClick:e})}function _e({onSelect:e}){return d("div",{className:"PersonalAnimation",children:[a(Re,{}),a(ze,{onSelect:e})]})}function Ke({onSelect:e}){const{category:n,setCategory:t}=g(o=>o.extraAni),s=v(o=>o["ani-extra"]),i=Object.keys(s).map(o=>({name:o}));return d("div",{className:"AniSelect-categories",children:[a(O,{tabs:i,value:n,onChange:t}),a("div",{className:"AniSelect-subCategory",children:a(b,{list:s[n],onClick:e})})]})}function Qe(s){var i=s,{initText:e,onChange:n=o=>{}}=i,t=B(i,["initText","onChange"]);const[o,r]=y(e),[u,c]=me(),l=h=>{const{value:k}=h.target;r(k),n(h)},f=h=>{h.keyCode===13&&c()};return C(()=>{r(e)},[e]),u?d(A,{children:[a(S,{title:"Save",onClick:c,children:a(pe,{})}),a("input",m({value:o,onChange:l,onKeyUp:f},t))]}):d(A,{children:[a(S,{title:"Edit",onClick:c,children:a(Ae,{})}),a("div",p(m({},t),{children:o}))]})}function Ye({list:e,onSelect:n}){const t=i=>{const{value:o}=i.target,{uuid:r}=i.target.dataset,u=e.find(c=>c.uuid===r);u.name=o},s=i=>{const{uuid:o}=i.target.dataset,r=e.find(u=>u.uuid===o);e.splice(e.indexOf(r),1)};return a("div",{className:"AnimationList",children:e==null?void 0:e.map(i=>d(A,{children:[a(Qe,{initText:i.name,onChange:t,className:"AnimationList-aniName","data-uuid":i.uuid}),a(S,{"data-code":`ex:${i.uuid}`,"data-name":i.name,onClick:n,variant:"contained",children:"Select"}),a(S,{"data-uuid":i.uuid,onClick:s,variant:"contained",children:a(fe,{})})]}))})}function Xe({onSelect:e}){const{userData:n}=ie,[t,s]=le();return C(()=>{const o=n.ani.addEventListener("change",s);return()=>n.ani.removeEventListener("change",o)}),d("div",{className:"UploadedAni",children:[a(ue,{multiple:!0,mimeType:".fbx",onChange:async o=>{const r=Array.from(o),u=await Promise.all(r.map(de)),l=(await Promise.all(u.map(ve))).flatMap(f=>f.animations);n.ani.push(...l)}}),a(Ye,{list:n.ani,onSelect:e},t)]})}const G={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"90vh",minWidth:"20rem","& svg":{color:"rgba(16, 16, 16, 0.8)"}},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)","& h2":{padding:"0.2rem 1rem"},"& Searchbox":{minWidth:"15rem"}},content:{padding:"0.5rem 1rem"}};const Je=[{name:"Adv"},{name:"Personal"},{name:"Extra"},{name:"Upload",icon:a(Se,{}),label:""}],Ze={Adv:Ve,Personal:_e,Extra:Ke,Upload:Xe};function Nn({onSelect:e=()=>{},onAfterSelect:n}){var h;const{category:t,setCategory:s}=g(),i=!!indexedDB,[o,r]=y(""),u=Y(o,500),c=(k,U)=>s(U),l=k=>{const{code:U,name:V}=k.currentTarget.dataset;e(U,V),n==null||n()},f=(h=Ze[t])!=null?h:q;return d(E,{className:"AniSelect",sx:G.root,children:[d(E,{sx:G.title,children:[a(he,{children:"Select an Animation"}),i&&a(X,{placeholder:"Search",query:o,onChange:r})]}),o?a(Ce,{query:u,onSelect:l}):d(A,{children:[a(ee,{value:t,onChange:c,tabs:Je}),d(ge,{sx:G.content,children:[a(q,{}),a(f,{onSelect:l})]})]})]})}export{Nn as default};
