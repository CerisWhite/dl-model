var P=Object.defineProperty,k=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var D=(s,e,t)=>e in s?P(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,v=(s,e)=>{for(var t in e||(e={}))Q.call(e,t)&&D(s,t,e[t]);if(T)for(var t of T(e))$.call(e,t)&&D(s,t,e[t]);return s},w=(s,e)=>k(s,N(e));import{aG as i,aD as C,aJ as q}from"./vendor.7867cdc7.js";import{u as z}from"./useToggleState.269650a2.js";import{u as A,S as E}from"./lists.2f6abcb0.js";import{F as J}from"./FacePartSelector.41df458b.js";import{f as R,c as W,B as H,F as K,a as O}from"./filterConfig.cd87f10c.js";import{u as U}from"./useAppData.dd089d42.js";import{G as V}from"./Gallery.8b6d6cbd.js";import{M as X,C as Y,s as c}from"./styles.70bd11e2.js";import{L as Z}from"./LoadSpinner.f08b237b.js";import{j as o,I as _,a as x}from"./index.7c041e85.js";import{c as ee,u as I}from"./categories.1be6d1de.js";import{B as j}from"./Box.78c38afe.js";import{D as te,a as se}from"./DialogTitle.8a4f1069.js";import{I as oe}from"./Close.4f2ed666.js";import"./TextField.b35f9d35.js";import"./ButtonBase.5151a7bc.js";import"./Popover.877bcf6e.js";import"./Selector.12658469.js";import"./GlowToggle.0cf7929e.js";import"./MenuItem.dd6c4d85.js";import"./ToggleGroup.0cc122e2.js";/* empty css               */import"./DialogContext.1cdad8f5.js";function ae({compact:s,searchQuery:e,filter:t,content:d,onSelect:r}){var h;const m=(h=U(a=>a[`chara-${d}`]))!=null?h:[],u=m.filter(({id:a})=>!a.endsWith("h")),[p,n]=i([]),[b,f]=i(!1);return C(()=>n(u),[d]),C(()=>{f(!0);async function a(){const l=e?await _(e):u;return await R(l,t)}setTimeout(async()=>{const l=await a();n(l),f(!1)})},[e,t]),m.length&&!b?o(V,{list:p,component:s?X:Y,onClick:r}):o(Z,{})}const F=ee.find(({value:s})=>s==="chara").options,re=[],ie=w(v({},c.top),{"& .Selector":{margin:"0.1rem 2rem 0.1rem 0"}});function Me({compact:s,onSelect:e,onAfterSelect:t}){const d=!!indexedDB,[r,m]=i(0),u=(S,g)=>m(g),[p,n]=i(""),b=A(p,500);C(()=>{n("")},[r]);const[f,h]=i(re),[a,l]=i("Both"),[L,M]=z(!0),y=F[r].value==="regular"&&W,B=s||I("(max-width:640px)")||I("(max-height:640px)"),G=q(S=>{const{value:g}=S.currentTarget.dataset;a!=="Eyes"&&e(g,"mouth"),a!=="Mouth"&&e(g,"eye"),t==null||t()},[a]);return x(j,{className:"ModelCatalog",sx:c.root,children:[x(j,{sx:ie,children:[o(te,{sx:c.title,children:"Select Texture"}),o(J,{value:a,onClick:l}),o(H,{options:F,selectedIndices:[r],setIndex:u}),x(j,{sx:c.searchFilter,children:[x(j,{sx:c.search,children:[o(E,{query:p,onChange:n,placeholder:d?"Search All":"Search"},r[0]),y&&o(oe,{onClick:M,size:"large",children:o(K,{})})]}),L&&y&&o(O,{config:y,onChange:h,compact:B})]})]}),o(se,{sx:c.content,children:o(ae,{compact:B,searchQuery:b,filter:f,content:F[r].value,onSelect:G})})]})}export{Me as default};
