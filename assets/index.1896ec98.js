import{a as l,j as n,F as c,q as B,A as b,v}from"./index.53b7e3fd.js";import{a4 as u}from"./vendor.732e1712.js";import{u as y}from"./useKey.fc9f7fb9.js";import{A as h}from"./Accordion.69ee3504.js";/* empty css               */import{M as C}from"./ModelIcon.2093311d.js";import{B as I}from"./Button.f13f5288.js";import{C as T}from"./Check.1ff26322.js";import{B as D}from"./Box.6f03ff47.js";import{a as M,b as k}from"./DialogTitle.ddb3ab90.js";import"./useToggleState.6a131330.js";import"./createSvgIcon.f4de0425.js";import"./ButtonBase.9f46f3cf.js";function N({list:e,label:o,defaultOpen:r=!1,onSelect:i}){return l(h,{disableGutters:!0,defaultOpen:r,className:"BoneChildren",children:[n(c,{children:o}),n(c,{children:e.map(t=>n(p,{target:t,onSelect:i},t.uniqueId))})]})}function p({target:e,onSelect:o}){if(!e)return null;const[r,i]=y();u(()=>{const s=e.addEventListener("AttachmentChanged",i);return()=>e.removeEventListener("AttachmentChanged",s)},[]),u(()=>{e.userData.name||B(e.id).then(s=>{e.userData.name=s==null?void 0:s.name,i()})},[]);const t=e.id,a=e==null?void 0:e.userData.name,x=a!=null?a:t,j=n(C,{modelId:t,alt:a!=null?a:t,className:"AttachmentIcon"}),d=b(e.attachment.list.map(s=>s.parentBone)),g=()=>o(e),f=l(c,{children:[j,n("div",{className:"target-name",children:x}),n(I,{title:"Select",variant:"contained",onClick:g,children:n(T,{})})]});return d.length?l(h,{disableGutters:!0,className:"ModelTree",children:[f,n(c,{children:d.map(s=>n(N,{defaultOpen:d.length===1,label:s,onSelect:o,list:e.attachment[s]}))})]},r):n("div",{className:"ModelTree",children:f},r)}const m={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"20rem",minWidth:"20rem"},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)",minHeight:"4rem"},content:{padding:"2rem 1rem",display:"flex",flexDirection:"column",flexWrap:"wrap"}};function U({onSelect:e=console.log,onAfterSelect:o}){const r=v.model,i=t=>{e(t),o==null||o()};return l(D,{sx:m.root,className:"TargetPicker",children:[n(M,{sx:m.title,children:"Select Target"}),n(k,{sx:m.content,children:r.map(t=>n(p,{target:t,onSelect:i},t.uniqueId))})]})}export{U as default};
