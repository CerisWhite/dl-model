import{a as l,j as n,F as d,l as g,B,v}from"./index.0e5e33cb.js";import{y as h}from"./vendor.1559e0f8.js";import{u as y}from"./useKey.f63bbf37.js";import{A as p}from"./Accordion.8db8e650.js";/* empty css               */import{M as T}from"./ModelIcon.e80bd732.js";import{B as C}from"./Button.65264dd5.js";import{C as I}from"./Check.a9de42de.js";import{B as M}from"./Box.42f5c51b.js";import{a as D,b as N}from"./DialogTitle.4458b408.js";import"./useToggleState.e5df3c77.js";import"./createSvgIcon.4f7e9d6b.js";import"./ButtonBase.441887c1.js";function k({list:e,label:s,defaultOpen:r=!1,onSelect:i}){return l(p,{disableGutters:!0,defaultOpen:r,className:"BoneChildren",children:[n(d,{children:s}),n(d,{children:e.map(t=>n(f,{target:t,onSelect:i},t.uniqueId))})]})}function f({target:e,onSelect:s}){if(!e)return null;const[r,i]=y();h(()=>{const o=e.addEventListener("AttachmentChanged",i);return()=>e.removeEventListener("AttachmentChanged",o)},[]),h(()=>{e.userData.name||g(e.id).then(o=>{e.userData.name=o==null?void 0:o.name,i()})},[]);const t=e.id,a=e==null?void 0:e.userData.name,x=a!=null?a:t,b=n(T,{modelId:t,alt:a!=null?a:t,className:"ModelTree-icon"}),c=B(e.attachment.list.map(o=>o.parentBone)),j=()=>s(e),u=l(d,{children:[b,n("div",{className:"target-name",children:x}),n(C,{title:"Select",variant:"contained",onClick:j,children:n(I,{})})]});return c.length?l(p,{disableGutters:!0,className:"ModelTree",children:[u,n(d,{children:c.map(o=>n(k,{defaultOpen:c.length===1,label:o,onSelect:s,list:e.attachment[o]}))})]},r):n("div",{className:"ModelTree",children:u},r)}const m={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"20rem",minWidth:"20rem"},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)",minHeight:"4rem"},content:{padding:"2rem 1rem",display:"flex",flexDirection:"column",flexWrap:"wrap"}};function U({onSelect:e=console.log,onAfterSelect:s}){const r=v.model,i=t=>{e(t),s==null||s()};return l(M,{sx:m.root,className:"TargetPicker",children:[n(D,{sx:m.title,children:"Select Target"}),n(N,{sx:m.content,children:r.length?r.map(t=>n(f,{target:t,onSelect:i},t.uniqueId)):"No model"})]})}export{U as default};
