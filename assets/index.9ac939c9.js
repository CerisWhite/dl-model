import{a as c,j as n,F as l,q as g,A as B,v}from"./index.ef2a95ba.js";import{a4 as h}from"./vendor.c152cc4e.js";import{u as y}from"./useKey.9def7935.js";import{A as p}from"./Accordion.7c04a47b.js";/* empty css               */import{M as C}from"./ModelIcon.a73cba21.js";import{B as I}from"./Button.caaa19b0.js";import{C as T}from"./Check.a586f0dc.js";import{B as D}from"./Box.8e010adf.js";import{a as M,b as k}from"./DialogTitle.7d9af076.js";import"./useToggleState.2affbec2.js";import"./createSvgIcon.6a50cdd6.js";import"./ButtonBase.66657dd4.js";function N({list:e,label:s,defaultOpen:o=!1,onSelect:r}){return c(p,{disableGutters:!0,defaultOpen:o,className:"BoneChildren",children:[n(l,{children:s}),n(l,{children:e.map(t=>n(f,{target:t,onSelect:r},t.uniqueId))})]})}function f({target:e,onSelect:s}){if(!e)return null;const[o,r]=y();h(()=>{const a=e.addEventListener("AttachmentChanged",r);return()=>e.removeEventListener("AttachmentChanged",a)},[]),h(()=>{e.userData.name||g(e.id).then(a=>{e.userData.name=a==null?void 0:a.name,r()})},[]);const t=e.id,i=e==null?void 0:e.userData.name,x=i!=null?i:t,j=n(C,{modelId:t,alt:i!=null?i:t,className:"AttachmentIcon"}),d=B(e.attachment.list.map(a=>a.parentBone)),b=()=>s(e),u=c(l,{children:[j,n("div",{className:"target-name",children:x}),n(I,{title:"Select",variant:"contained",onClick:b,children:n(T,{})})]});return d.length?c(p,{disableGutters:!0,className:"ModelTree",children:[u,n(l,{children:d.map(a=>n(N,{defaultOpen:d.length===1,label:a,onSelect:s,list:e.attachment[a]}))})]},o):n("div",{className:"ModelTree",children:u},o)}const m={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"20rem",minWidth:"20rem"},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)",minHeight:"4rem"},content:{padding:"2rem 1rem",display:"flex",flexDirection:"column",flexWrap:"wrap"}};function U({onSelect:e=console.log,onAfterSelect:s}){const o=v.model,r=t=>{e(t),s==null||s()};return c(D,{sx:m.root,className:"TargetPicker",children:[n(M,{sx:m.title,children:"Select Target"}),n(k,{sx:m.content,children:o.map(t=>n(f,{target:t,onSelect:r},t.uniqueId))})]})}export{U as default};
