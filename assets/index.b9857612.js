var V=Object.defineProperty,E=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var L=(e,n,o)=>n in e?V(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,m=(e,n)=>{for(var o in n||(n={}))U.call(n,o)&&L(e,o,n[o]);if(f)for(var o of f(n))w.call(n,o)&&L(e,o,n[o]);return e},p=(e,n)=>E(e,_(n));var q=(e,n)=>{var o={};for(var a in e)U.call(e,a)&&n.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&f)for(var a of f(e))n.indexOf(a)<0&&w.call(e,a)&&(o[a]=e[a]);return o};import{aG as v,aD as $}from"./vendor.7867cdc7.js";import{W,u as Q,S as Y}from"./lists.f8fbb053.js";import{S as y}from"./Stretcher.4b8fb723.js";import{a as z,b as J,T as K}from"./TabBar.f100b641.js";import{a as u,j as t,h,F as C,l as X,E as Z,G as ee}from"./index.07cdc799.js";import{B as x}from"./Button.dbf43b3c.js";/* empty css               */import{h as ne,M as te}from"./ModelIcon.af80ad9f.js";import{G as j}from"./Gallery.d2a6389d.js";import{L as oe}from"./LoadSpinner.90cc9e45.js";import{s as ae,g as ie}from"./aniFunction.f8cbea84.js";import{u as A}from"./useAppData.dd089d42.js";import{S as T}from"./Selector.42fed067.js";import{B as D}from"./Box.57c3ddf7.js";import{D as se,a as ce}from"./DialogTitle.767b2c05.js";import"./TextField.b2cb9927.js";import"./ButtonBase.e6ab2cdc.js";import"./Popover.3656a55e.js";import"./Close.58cb7edf.js";import"./GlowToggle.012c0dfa.js";import"./DialogContext.c552a20e.js";function re(r){var d=r,{icon:e="",subIcon:n="",title:o,subtitle:a="",onClick:s}=d,i=q(d,["icon","subIcon","title","subtitle","onClick"]);const c=e&&u("div",{className:"IconButton-icons",children:[t("img",{className:"IconButton-mainIcon",src:e,alt:o,loading:"lazy"}),n&&t("img",{className:"IconButton-subIcon",src:n,alt:n,loading:"lazy"})]}),l=u("div",{className:"IconButton-description",children:[a&&t("h5",{className:"IconButton-subtitle",children:a}),t("h3",{className:"IconButton-title",children:o})]});return t(x,p(m({variant:"outlined",className:"IconButton",onClick:s,startIcon:c},i),{children:l}))}function F({icon:e,user:n,name:o,fullName:a=o,subtitle:s="",code:i,onClick:r}){const d=ne(n)?`img/icon/${n}.png`:"",c=e?`img/aniIcon/${e}.png`:d;return t(re,{icon:c,subIcon:e&&d,title:o,subtitle:s,onClick:r,"data-code":i,"data-name":a})}function le({icon:e,user:n,code:o,fullName:a,onClick:s}){return t(F,{icon:e,user:n,name:a,code:o,onClick:s})}function ue({query:e,onSelect:n}){const[o,a]=v([]),[s,i]=v(!0);return $(()=>{i(!0),setTimeout(async()=>{const r=await ae(e);a(r),i(!1)})},[e]),u("div",{className:"AniSearchResult",children:[t(y,{}),s?t(oe,{}):t(j,{list:o,component:le,onClick:n})]})}const de=[{label:"Home Screen",name:"home"},{label:"In Quest",name:"quest"},{label:"Weapon Specific",name:"weapon"},{label:"Generic Skills",name:"genericSkill"},{label:"Unique Skills",name:"uniqueSkill"},{label:"Unique Combo",name:"uniqueCombo"},{label:"Unique Force Strike",name:"uniqueFS"},{label:"Unique Victory",name:"uniqueVictory"},{label:"Other Unique",name:"uniqueOther"},{label:"Misc",name:"misc"}];function O({tabs:e,value:n,onChange:o}){return t(z,{variant:"scrollable",orientation:"vertical",className:"VerticalTabs",value:n,onChange:(s,i)=>o(i),children:e.map(({label:s,name:i})=>t(J,{label:s!=null?s:i,value:i},i))})}const me={minHeight:"3rem"};function G(i){var r=i,{name:e,code:n,onClick:o,fullName:a}=r,s=q(r,["name","code","onClick","fullName"]);return t(x,p(m({className:"AniSelect-Btn",variant:"contained","data-code":n,"data-name":a!=null?a:e,onClick:o,sx:me},s),{children:e}))}const pe=["Male","Female"];function he({value:e,onClick:n}){return t(T,{type:"text",options:pe,value:e,onClick:n})}function ge({onSelect:e}){const{gender:n,setGender:o}=h(s=>s.advAni.home),a=A(s=>s["ani-home"]);return u("div",{className:"HomeAni",children:[t("h3",{className:"HomeAni-groupTitle",children:"Common Animation"}),t("div",{className:"AniSelect-simpleBtns",children:a.common.map(({name:s,code:i})=>t(G,{name:s,code:i,onClick:e,className:"AniSelect-Btn"},s))}),t("hr",{}),u("div",{className:"HomeAni-groupTitle",children:[t("h3",{children:"Gender Specific"}),t(he,{value:n,onClick:o})]}),t("div",{className:"AniSelect-simpleBtns",children:a[n].map(({name:s,code:i})=>t(G,{name:s,code:i,fullName:`${n} ${s}`,onClick:e,className:"AniSelect-Btn"},s))})]})}function S({list:e,onClick:n}){return t(j,{list:e,component:G,onClick:n})}function Ae({onSelect:e}){const n=A(o=>o["ani-quest"]);return t(S,{list:n,onClick:e})}const I=["Long","Close","Rapid"],Se=I.map(e=>`img/appIcon/gun_${e}.png`);function be({value:e,onClick:n}){return t(T,{type:"icon",options:I,icons:Se,labels:I,value:e,onClick:n})}const fe=W.map(e=>`img/appIcon/weapon_${e}.png`);function N({value:e,onClick:n}){return t(T,{type:"icon",options:W,icons:fe,value:e,onClick:n})}const ve={Long:"Long Range",Close:"Close Range",Rapid:"Rapid Fire"};function ye({onSelect:e}){const{type:n,setType:o,gunMode:a,setGunMode:s}=h(l=>l.advAni.weapon),i=A(l=>l["ani-weapon"]),r=A(l=>l["ani-gun"]),d=i[n].map(l=>p(m({},l),{fullName:`${n} ${l.name}`})),c=r[a].map(l=>p(m({},l),{fullName:`${ve[a]} Manacaster ${l.name}`}));return u("div",{className:"WeaponAni",children:[t(N,{value:n,onClick:o}),t(S,{list:d,onClick:e}),n==="Manacaster"&&u(C,{children:[t(be,{value:a,onClick:s}),t(S,{list:c,onClick:e})]})]})}function Ce({onSelect:e}){const{type:n,setType:o}=h(i=>i.advAni.genericSkill),s=A(i=>i["ani-genericSkill"])[n].map(i=>p(m({},i),{fullName:`${n} ${i.name}`}));return u("div",{className:"GenericSkills",children:[t(N,{value:n,onClick:o}),t(S,{list:s,onClick:e})]})}function H({list:e,onClick:n}){return t(j,{list:e,component:F,onClick:n})}const Ne=e=>p(m({},e),{fullName:`${e.name} Victory`}),ke=e=>p(m({},e),{fullName:`${e.name} ${e.subtitle||""} Combo`}),Be=e=>p(m({},e),{fullName:`${e.name} ${e.subtitle||""} Force Strike`}),qe=e=>p(m({},e),{fullName:e.subtitle?`${e.subtitle} ${e.name}`:e.name}),$e={uniqueCombo:ke,uniqueFS:Be,uniqueVictory:Ne,uniqueSkill:qe};function k({name:e,onSelect:n}){var l,b;const o=`ani-${e}`,a=(l=A(g=>g[o]))!=null?l:{},{setGroupWeaponType:s}=h(g=>g.advAni.groupByWeapon),i=g=>s(e,g),r=h(g=>g.advAni.groupByWeapon[e]);r!=null||i(Object.keys(a)[0]);const d=$e[e],c=d?(b=a[r])==null?void 0:b.map(d):a[r];return u("div",{className:"AniGroup",children:[t(N,{value:r,onClick:i}),t(H,{list:c,onClick:n},r)]})}function xe({onSelect:e}){const n=A(o=>o["ani-misc"]);return t(S,{list:n,onClick:e})}function je({expanded:e,user:n,name:o,animations:a,onClick:s,onSelect:i}){return u(C,{children:[u("div",{className:`UniqueAniGroup ${e?"selected":""}`,"data-user":n,onClick:s,children:[t(te,{modelId:n,alt:o}),t("h3",{children:o})]}),e&&t("div",{className:"UniqueAniGroup-details",children:t(S,{list:a,onClick:i})})]})}function Te({onSelect:e}){const n=A(c=>c["ani-uniqueOther"]),{type:o,setType:a,selected:s,setSelected:i}=h(c=>c.advAni.uniqueOther),r=n[o],d=c=>{const{user:l}=c.currentTarget.dataset;i(l===s?"":l)};return t(C,{children:u("div",{className:"OtherUniqueAni",children:[t(N,{value:o,onClick:a}),t("hr",{}),t("div",{className:"OtherUniqueAni-groups",children:r.map(c=>t(je,p(m({expanded:s===c.user},c),{onClick:d,onSelect:e})))})]})})}const Ge={home:ge,quest:Ae,weapon:ye,genericSkill:Ce,uniqueSkill:e=>t(k,p(m({},e),{name:"uniqueSkill"})),uniqueVictory:e=>t(k,p(m({},e),{name:"uniqueVictory"})),uniqueFS:e=>t(k,p(m({},e),{name:"uniqueFS"})),uniqueCombo:e=>t(k,p(m({},e),{name:"uniqueCombo"})),uniqueOther:Te,misc:xe};function Ie({onSelect:e}){var s;const{category:n,setCategory:o}=h(i=>i.advAni),a=(s=Ge[n])!=null?s:y;return u("div",{className:"AniSelect-categories",children:[t(O,{tabs:de,value:n,onChange:o}),t("div",{className:"AniSelect-subCategory",children:t(a,{onSelect:e})})]})}function Me(){const{source:e,setSource:n,sourceName:o,setSourceName:a}=h(c=>c.personalAni),{inputModel:s}=X(),i=(c,l)=>{a(l),n(c)},r=async()=>{const c=await s();c&&i(...c)};$(()=>{o||setTimeout(async()=>{const c=await Z(e);(c==null?void 0:c.id)&&a(c.name)})},[e]);const d=["b","w"].includes(e==null?void 0:e[0])?`img/icon/${e}.png`:`img/portrait/${e}.png`;return u("div",{className:"PersonalAni-source",children:[e&&t("img",{src:d,alt:e},e),u("div",{children:[t("h3",{children:o}),t(x,{variant:"outlined",onClick:r,children:"Change Source"})]})]})}function Pe({onSelect:e}){const n=!!indexedDB,{source:o}=h(i=>i.personalAni),[a,s]=v([]);return $(()=>{s([]),setTimeout(async()=>{var d;if(!o)return;const r=((d=ee(o))!=null?d:n?await ie(o):[]).map(c=>p(m({},c),{user:void 0}));s(r)})},[o]),t(H,{list:a,onClick:e})}function Ue({onSelect:e}){return u("div",{className:"PersonalAnimation",children:[t(Me,{}),t(Pe,{onSelect:e})]})}function we({onSelect:e}){const{category:n,setCategory:o}=h(i=>i.extraAni),a=A(i=>i["ani-extra"]),s=Object.keys(a).map(i=>({name:i}));return u("div",{className:"AniSelect-categories",children:[t(O,{tabs:s,value:n,onChange:o}),t("div",{className:"AniSelect-subCategory",children:t(S,{list:a[n],onClick:e})})]})}const M={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"90vh",minWidth:"20rem","& svg":{color:"rgba(16, 16, 16, 0.8)"}},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)","& h2":{padding:"0.2rem 1rem"},"& Searchbox":{minWidth:"15rem"}},content:{padding:"0.5rem 1rem"}};const Le=["Adventurer","Personal","Extra"].map(e=>({name:e})),We={Adventurer:Ie,Personal:Ue,Extra:we};function rn({onSelect:e=()=>{},onAfterSelect:n}){var g;const{category:o,setCategory:a}=h(),s=!!indexedDB,[i,r]=v(""),d=Q(i,500),c=(P,B)=>a(B),l=P=>{const{code:B,name:R}=P.currentTarget.dataset;e(B,R),n==null||n()},b=(g=We[o])!=null?g:y;return u(D,{className:"AniSelect",sx:M.root,children:[u(D,{sx:M.title,children:[t(se,{children:"Select an Animation"}),s&&t(Y,{placeholder:"Search",query:i,onChange:r})]}),i?t(ue,{query:d,onSelect:l}):u(C,{children:[t(K,{value:o,onChange:c,tabs:Le}),u(ce,{sx:M.content,children:[t(y,{}),t(b,{onSelect:l})]})]})]})}export{rn as default};
