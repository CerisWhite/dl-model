var R=Object.defineProperty,V=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var w=(e,t,a)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,m=(e,t)=>{for(var a in t||(t={}))P.call(t,a)&&w(e,a,t[a]);if(v)for(var a of v(t))U.call(t,a)&&w(e,a,t[a]);return e},d=(e,t)=>V(e,E(t));var B=(e,t)=>{var a={};for(var o in e)P.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&v)for(var o of v(e))t.indexOf(o)<0&&U.call(e,o)&&(a[o]=e[o]);return a};import{ax as n,aF as h,aB as q,aD as y}from"./vendor.ffd395ab.js";import{W as L,u as _,S as Q}from"./lists.ffd52334.js";import{S as b}from"./Stretcher.3a6da6d1.js";import{a as Y,b as z,T as J}from"./TabBar.d0be1a54.js";import{B as $}from"./Button.fc775fac.js";/* empty css               */import{h as K,M as X}from"./ModelIcon.7e8a6551.js";import{G as x}from"./Gallery.edc5b06e.js";import{L as Z}from"./LoadSpinner.d8b7e4fc.js";import{s as ee,g as ne}from"./aniFunction.337c872d.js";import{f as p,j as te,B as ae,C as oe}from"./index.fd101bf7.js";import{u as A}from"./useAppData.d907c9bc.js";import{S as T}from"./Selector.7174f26a.js";import{B as W}from"./Box.d6d5f65e.js";import{D as ie,a as se}from"./DialogTitle.3ac1c173.js";import"./ButtonBase.e40964c1.js";import"./Popover.80b4a490.js";import"./TextField.6c373f07.js";import"./Close.ca078ff9.js";import"./GlowToggle.bc6a2cea.js";import"./DialogContext.619db339.js";function ce(l){var u=l,{icon:e="",subIcon:t="",title:a,subtitle:o="",onClick:s}=u,i=B(u,["icon","subIcon","title","subtitle","onClick"]);const c=e&&n("div",{className:"IconButton-icons"},n("img",{className:"IconButton-mainIcon",src:e,alt:a,loading:"lazy"}),t&&n("img",{className:"IconButton-subIcon",src:t,alt:t,loading:"lazy"})),r=n("div",{className:"IconButton-description"},o&&n("h5",{className:"IconButton-subtitle"},o),n("h3",{className:"IconButton-title"},a));return n($,m({variant:"outlined",className:"IconButton",onClick:s,startIcon:c},i),r)}function D({icon:e,user:t,name:a,fullName:o=a,subtitle:s="",code:i,onClick:l}){const u=K(t)?`img/icon/${t}.png`:"",c=e?`img/aniIcon/${e}.png`:u;return n(ce,{icon:c,subIcon:e&&u,title:a,subtitle:s,onClick:l,"data-code":i,"data-name":o})}function le({icon:e,user:t,code:a,fullName:o,onClick:s}){return n(D,{icon:e,user:t,name:o,code:a,onClick:s})}function re({query:e,onSelect:t}){const[a,o]=h([]),[s,i]=h(!0);return q(()=>{i(!0),setTimeout(async()=>{const l=await ee(e);o(l),i(!1)})},[e]),n("div",{className:"AniSearchResult"},n(b,null),s?n(Z,null):n(x,{list:a,component:le,onClick:t}))}const ue=[{label:"Home Screen",name:"home"},{label:"In Quest",name:"quest"},{label:"Weapon Specific",name:"weapon"},{label:"Generic Skills",name:"genericSkill"},{label:"Unique Skills",name:"uniqueSkill"},{label:"Unique Combo",name:"uniqueCombo"},{label:"Unique Force Strike",name:"uniqueFS"},{label:"Unique Victory",name:"uniqueVictory"},{label:"Other Unique",name:"uniqueOther"},{label:"Misc",name:"misc"}];function O({tabs:e,value:t,onChange:a}){return n(z,{variant:"scrollable",orientation:"vertical",className:"VerticalTabs",value:t,onChange:(s,i)=>a(i)},e.map(({label:s,name:i})=>n(Y,{label:s!=null?s:i,key:i,value:i})))}const me={minHeight:"3rem"};function j(i){var l=i,{name:e,code:t,onClick:a,fullName:o}=l,s=B(l,["name","code","onClick","fullName"]);return n($,m({className:"AniSelect-Btn",variant:"contained","data-code":t,"data-name":o!=null?o:e,onClick:a,sx:me},s),e)}const de=["Male","Female"];function pe({value:e,onClick:t}){return n(T,{type:"text",options:de,value:e,onClick:t})}function ge({onSelect:e}){const{gender:t,setGender:a}=p(s=>s.advAni.home),o=A(s=>s["ani-home"]);return n("div",{className:"HomeAni"},n("h3",{className:"HomeAni-groupTitle"},"Common Animation"),n("div",{className:"AniSelect-simpleBtns"},o.common.map(({name:s,code:i})=>n(j,{name:s,code:i,onClick:e,key:s,className:"AniSelect-Btn"}))),n("hr",null),n("div",{className:"HomeAni-groupTitle"},n("h3",null,"Gender Specific"),n(pe,{value:t,onClick:a})),n("div",{className:"AniSelect-simpleBtns"},o[t].map(({name:s,code:i})=>n(j,{name:s,code:i,fullName:`${t} ${s}`,onClick:e,key:s,className:"AniSelect-Btn"}))))}function f({list:e,onClick:t}){return n(x,{list:e,component:j,onClick:t})}function Ae({onSelect:e}){const t=A(a=>a["ani-quest"]);return n(f,{list:t,onClick:e})}const G=["Long","Close","Rapid"],fe=G.map(e=>`img/appIcon/gun_${e}.png`);function Se({value:e,onClick:t}){return n(T,{type:"icon",options:G,icons:fe,labels:G,value:e,onClick:t})}const ve=L.map(e=>`img/appIcon/weapon_${e}.png`);function C({value:e,onClick:t}){return n(T,{type:"icon",options:L,icons:ve,value:e,onClick:t})}const he={Long:"Long Range",Close:"Close Range",Rapid:"Rapid Fire"};function ye({onSelect:e}){const{type:t,setType:a,gunMode:o,setGunMode:s}=p(r=>r.advAni.weapon),i=A(r=>r["ani-weapon"]),l=A(r=>r["ani-gun"]),u=i[t].map(r=>d(m({},r),{fullName:`${t} ${r.name}`})),c=l[o].map(r=>d(m({},r),{fullName:`${he[o]} Manacaster ${r.name}`}));return n("div",{className:"WeaponAni"},n(C,{value:t,onClick:a}),n(f,{list:u,onClick:e}),t==="Manacaster"&&n(y,null,n(Se,{value:o,onClick:s}),n(f,{list:c,onClick:e})))}function be({onSelect:e}){const{type:t,setType:a}=p(i=>i.advAni.genericSkill),s=A(i=>i["ani-genericSkill"])[t].map(i=>d(m({},i),{fullName:`${t} ${i.name}`}));return n("div",{className:"GenericSkills"},n(C,{value:t,onClick:a}),n(f,{list:s,onClick:e}))}function F({list:e,onClick:t}){return n(x,{list:e,component:D,onClick:t})}const Ce=e=>d(m({},e),{fullName:`${e.name} Victory`}),ke=e=>d(m({},e),{fullName:`${e.name} ${e.subtitle||""} Combo`}),Ne=e=>d(m({},e),{fullName:`${e.name} ${e.subtitle||""} Force Strike`}),Be=e=>d(m({},e),{fullName:e.subtitle?`${e.subtitle} ${e.name}`:e.name}),qe={uniqueCombo:ke,uniqueFS:Ne,uniqueVictory:Ce,uniqueSkill:Be};function k({name:e,onSelect:t}){var r,S;const a=`ani-${e}`,o=(r=A(g=>g[a]))!=null?r:{},{setGroupWeaponType:s}=p(g=>g.advAni.groupByWeapon),i=g=>s(e,g),l=p(g=>g.advAni.groupByWeapon[e]);l!=null||i(Object.keys(o)[0]);const u=qe[e],c=u?(S=o[l])==null?void 0:S.map(u):o[l];return n("div",{className:"AniGroup"},n(C,{value:l,onClick:i}),n(F,{key:l,list:c,onClick:t}))}function $e({onSelect:e}){const t=A(a=>a["ani-misc"]);return n(f,{list:t,onClick:e})}function xe({expanded:e,user:t,name:a,animations:o,onClick:s,onSelect:i}){return n(y,null,n("div",{className:`UniqueAniGroup ${e?"selected":""}`,"data-user":t,onClick:s},n(X,{modelId:t,alt:a}),n("h3",null,a)),e&&n("div",{className:"UniqueAniGroup-details"},n(f,{list:o,onClick:i})))}function Te({onSelect:e}){const t=A(c=>c["ani-uniqueOther"]),{type:a,setType:o,selected:s,setSelected:i}=p(c=>c.advAni.uniqueOther),l=t[a],u=c=>{const{user:r}=c.currentTarget.dataset;i(r===s?"":r)};return n(y,null,n("div",{className:"OtherUniqueAni"},n(C,{value:a,onClick:o}),n("hr",null),n("div",{className:"OtherUniqueAni-groups"},l.map(c=>n(xe,d(m({expanded:s===c.user},c),{onClick:u,onSelect:e}))))))}const je={home:ge,quest:Ae,weapon:ye,genericSkill:be,uniqueSkill:e=>n(k,d(m({},e),{name:"uniqueSkill"})),uniqueVictory:e=>n(k,d(m({},e),{name:"uniqueVictory"})),uniqueFS:e=>n(k,d(m({},e),{name:"uniqueFS"})),uniqueCombo:e=>n(k,d(m({},e),{name:"uniqueCombo"})),uniqueOther:Te,misc:$e};function Ge({onSelect:e}){var s;const{category:t,setCategory:a}=p(i=>i.advAni),o=(s=je[t])!=null?s:b;return n("div",{className:"AniSelect-categories"},n(O,{tabs:ue,value:t,onChange:a}),n("div",{className:"AniSelect-subCategory"},n(o,{onSelect:e})))}function Ie(){const{source:e,setSource:t,sourceName:a,setSourceName:o}=p(c=>c.personalAni),{inputModel:s}=te(),i=(c,r)=>{o(r),t(c)},l=async()=>{const c=await s();c&&i(...c)};q(()=>{a||setTimeout(async()=>{const c=await ae(e);(c==null?void 0:c.id)&&o(c.name)})},[e]);const u=["b","w"].includes(e==null?void 0:e[0])?`img/icon/${e}.png`:`img/portrait/${e}.png`;return n("div",{className:"PersonalAni-source"},e&&n("img",{key:e,src:u,alt:e}),n("div",null,n("h3",null,a),n($,{variant:"outlined",onClick:l},"Change Source")))}function Me({onSelect:e}){const t=!!indexedDB,{source:a}=p(i=>i.personalAni),[o,s]=h([]);return q(()=>{s([]),setTimeout(async()=>{var u;if(!a)return;const l=((u=oe(a))!=null?u:t?await ne(a):[]).map(c=>d(m({},c),{user:void 0}));s(l)})},[a]),n(F,{list:o,onClick:e})}function Pe({onSelect:e}){return n("div",{className:"PersonalAnimation"},n(Ie,null),n(Me,{onSelect:e}))}function Ue({onSelect:e}){const{category:t,setCategory:a}=p(i=>i.extraAni),o=A(i=>i["ani-extra"]),s=Object.keys(o).map(i=>({name:i}));return n("div",{className:"AniSelect-categories"},n(O,{tabs:s,value:t,onChange:a}),n("div",{className:"AniSelect-subCategory"},n(f,{list:o[t],onClick:e})))}const I={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"90vh",minWidth:"20rem","& svg":{color:"rgba(16, 16, 16, 0.8)"}},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)","& h2":{padding:"0.2rem 1rem"},"& Searchbox":{minWidth:"15rem"}},content:{padding:"0.5rem 1rem"}};const we=["Adventurer","Personal","Extra"].map(e=>({name:e})),Le={Adventurer:Ge,Personal:Pe,Extra:Ue};function cn({onSelect:e=()=>{},onAfterSelect:t}){var g;const{category:a,setCategory:o}=p(),s=!!indexedDB,[i,l]=h(""),u=_(i,500),c=(M,N)=>o(N),r=M=>{const{code:N,name:H}=M.currentTarget.dataset;e(N,H),t==null||t()},S=(g=Le[a])!=null?g:b;return n(W,{className:"AniSelect",sx:I.root},n(W,{sx:I.title},n(ie,null,"Select an Animation"),s&&n(Q,{placeholder:"Search",query:i,onChange:l})),i?n(re,{query:u,onSelect:r}):n(y,null,n(J,{value:a,onChange:c,tabs:we}),n(se,{sx:I.content},n(b,null),n(S,{onSelect:r}))))}export{cn as default};
