import{ax as e,aD as f,aA as b,aF as y,aB as C}from"./vendor.dead0e45.js";import{u as D}from"./useKey.c0faf57c.js";import{a as p,j as S,G as x,v as g}from"./index.33d83fde.js";import{S as L}from"./Stretcher.f31308d6.js";import{A as k,a as T,b as w}from"./AttachmentSetting.f1b0ce76.js";import{a as I,D as N}from"./DialogTitle.ba06c24c.js";import{B as l}from"./Box.93a277ea.js";import{S as E}from"./TextField.a09e8e5c.js";import{M as F}from"./MenuItem.8bfdfe3d.js";import{B as G}from"./Button.21dca63e.js";/* empty css               */import"./ModelIcon.919d14fb.js";import"./useToggleState.8cff7b60.js";import"./ButtonBase.7e212a37.js";import"./Popover.92ce4ff4.js";import"./ColorButton.fce2587a.js";import"./Close.27d103a5.js";import"./DialogContext.3bb3b8e3.js";function K({bone:a}){var c;const{activeModel:s}=p(),i=(c=s==null?void 0:s.attachment[a])!=null?c:[];return e(T,{defaultOpen:!0,className:"BoneManager",disableGutters:!0},e(f,null,a),e(f,null,i.map(n=>{var r,o;return e(k,{target:n,label:(o=(r=n==null?void 0:n.userData)==null?void 0:r.name)!=null?o:n.id})})))}function at(){var d,u;const{activeModel:a}=p(),[s,i]=D(),{inputModel:c}=S(),n=b(()=>{}),r=["root",...(u=(d=a==null?void 0:a.bones)==null?void 0:d.list)!=null?u:[]],[o,h]=y(r[0]),A=x(a.attachment.list.map(t=>t.parentBone));C(()=>{if(!a)return;n.current();const t=a.addEventListener("AttachmentChanged",i);return n.current=()=>a.removeEventListener("AttachmentChanged",t),n.current},[a]);const j=t=>{h(t.target.value)},v=async()=>{const t=await c();if(!t)return;const[M,B]=t,m=await g.loadDLModel(M);m.userData.name=B,a.attach(m,o==="root"?void 0:o),m.outline.code=a.outline.code,m.material.code=a.material.code,g.render()};return e(l,{className:"AttachmentManager"},e(l,{className:"AttachmentManager-top"},e(N,null,"Manage Attachments"),e(l,{className:"AttachmentManager-add"},e(E,{onChange:j,value:o,className:"AttachmentManager-select"},r.map(t=>e(F,{key:t,value:t},t))),e(G,{title:"Add Attachment",variant:"contained",onClick:v},e(w,null)))),e(I,{key:s,className:"AttachmentManager-body"},e(L,null),A.map(t=>e(K,{key:t,bone:t}))))}export{at as default};
