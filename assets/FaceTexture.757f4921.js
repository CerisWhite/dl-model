var G=Object.defineProperty,N=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var v=(s,e,t)=>e in s?G(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,w=(s,e)=>{for(var t in e||(e={}))Q.call(e,t)&&v(s,t,e[t]);if(T)for(var t of T(e))$.call(e,t)&&v(s,t,e[t]);return s},D=(s,e)=>N(s,P(e));import{ab as c,y as j,a8 as q}from"./vendor.2dfd018b.js";import{u as z}from"./useToggleState.24c1b3d1.js";import{L as A,u as E,S as R}from"./lists.5f265f9a.js";import{F as W}from"./FacePartSelector.7be80127.js";import{f as H,c as J,B as K,F as O,a as U}from"./filterConfig.79cfb624.js";import{u as V,G as X}from"./Gallery.b7451316.js";import{M as Y,C as Z,c as _,s as i,u as I}from"./styles.1cf83f6b.js";import{j as a,I as ee,a as g}from"./index.24c64bef.js";import{B as b}from"./Box.688de84c.js";import{a as te,b as se}from"./DialogTitle.6b70eccc.js";import{I as ae}from"./Close.efcfbb5d.js";function oe({compact:s,searchQuery:e,filter:t,content:d,onSelect:r}){var p;const u=(p=V(o=>o[`chara-${d}`]))!=null?p:[],m=u.filter(({id:o})=>!o.endsWith("h")),[f,n]=c([]),[y,h]=c(!1);return j(()=>n(m),[d]),j(()=>{h(!0);async function o(){const l=e?await ee(e):m;return await H(l,t)}setTimeout(async()=>{const l=await o();n(l),h(!1)})},[e,t]),u.length&&!y?a(X,{list:f,component:s?Y:Z,onClick:r}):a(A,{})}const C=_.find(({value:s})=>s==="chara").options,re=[],ce=D(w({},i.top),{"& .Selector":{margin:"0.1rem 2rem 0.1rem 0"}});function ye({compact:s,onSelect:e,onAfterSelect:t}){const d=!!indexedDB,[r,u]=c(0),m=(S,x)=>u(x),[f,n]=c(""),y=E(f,500);j(()=>{n("")},[r]);const[h,p]=c(re),[o,l]=c("Both"),[L,M]=z(!0),F=C[r].value==="regular"&&J,B=s||I("(max-width:640px)")||I("(max-height:640px)"),k=q(S=>{const{value:x}=S.currentTarget.dataset;o!=="Eyes"&&e(x,"mouth"),o!=="Mouth"&&e(x,"eye"),t==null||t()},[o]);return g(b,{className:"FaceTexture",sx:i.root,children:[g(b,{sx:ce,children:[a(te,{sx:i.title,children:"Select Texture"}),a(W,{value:o,onClick:l}),a(K,{options:C,selectedIndices:[r],setIndex:m}),g(b,{sx:i.searchFilter,children:[g(b,{sx:i.search,children:[a(R,{query:f,onChange:n,placeholder:d?"Search All":"Search"},r[0]),F&&a(ae,{onClick:M,size:"large",children:a(O,{})})]}),L&&F&&a(U,{config:F,onChange:p,compact:B})]})]}),a(se,{sx:i.content,children:a(oe,{compact:B,searchQuery:y,filter:h,content:C[r].value,onSelect:k})})]})}export{ye as F};
