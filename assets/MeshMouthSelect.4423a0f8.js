var W=Object.defineProperty,A=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var U=(t,o,e)=>o in t?W(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,h=(t,o)=>{for(var e in o||(o={}))w.call(o,e)&&U(t,e,o[e]);if(m)for(var e of m(o))F.call(o,e)&&U(t,e,o[e]);return t},M=(t,o)=>A(t,Z(o));var b=(t,o)=>{var e={};for(var n in t)w.call(t,n)&&o.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&m)for(var n of m(t))o.indexOf(n)<0&&F.call(t,n)&&(e[n]=t[n]);return e};import{y as q,z as I,j as i,B as G,a as v}from"./index.6bbc6b5b.js";import"./vendor.f5906274.js";import{B as J}from"./Box.956b96b1.js";import{B as K}from"./Button.796f80fc.js";const L=t=>`${I}/${t}/${t}.png`,Q=[1,2,3,4,5,6,7,8,9],B=64,V=Q.map(t=>{if(t===1)return[-280,-170];const o=(t-2)%4,e=Math.floor(t/6),n=-(24+o*128),s=-(298+e*128);return[n,s]}),R=(t,o)=>{const[e,n]=V[o-1],[s,a]=q(t),c=s*128,r=a*128,d=e-c,u=n+r;return{x:d,y:u}},tt=(t,o)=>{const{x:e,y:n}=R(t,o),s=n-B/2;return{x:e,y:s}};function _(s){var a=s,{texture:t,x:o,y:e}=a,n=b(a,["texture","x","y"]);const r={backgroundImage:`url(${L(t)})`,backgroundSize:"512px 512px",backgroundPosition:`${o}px ${e}px`,width:B,height:B/2};return i("div",h({style:r},n))}function ht(n){var s=n,{texture:t,index:o}=s,e=b(s,["texture","index"]);const{x:a,y:c}=R(t,o);return i(_,h({texture:t,x:a,y:c,className:"EyeBox"},e))}function dt(n){var s=n,{texture:t,index:o}=s,e=b(s,["texture","index"]);const{x:a,y:c}=tt(t,o);return i(_,h({texture:t,x:a,y:c,className:"EyeBox"},e))}const z=t=>{let o=t[0],e=t[0];return t.forEach(n=>{o=n<o?n:o,e=n>e?n:e}),[o,e]},et=t=>t.map(o=>{const e=o.geometry.attributes.uv.array,n=e.filter((u,x)=>x%2==0),s=e.filter((u,x)=>x%2==1),[a,c]=z(n),[r,d]=z(s);return{u:[a,c],v:[r,d]}});const ot=t=>`${I}/${t}/${G(t)}.png`,y=1024,f=160;function nt({id:t,uvList:o,onClick:e,part:n}){const s=ot(t),[a,c]=o[0].u,[r,d]=o[0].v,u=c-a,x=d-r,N=u*y,X=x*y,P=N/f,g=y/P,l=X/P,C={width:f,height:l,position:"relative",borderRadius:"0.5rem",overflow:"hidden"},E={content:'""',position:"absolute",backgroundImage:`url(${s})`,backgroundSize:`${g}px ${g}px`,width:f,height:l},O=({u:p,v:$})=>{const S=p[1]-p[0]!==u,Y=p[0],H=$[0],T=Y*g,j=H*g,k=S?(f-l)/2:0;return S?{width:l,height:f,"&::after":M(h({},E),{width:l,height:f,backgroundPosition:`left -${T}px bottom -${j}px`,transform:`rotate(90deg) translate(-${k}px, -${k}px)`,position:"absolute"})}:{width:f,height:l,position:"relative","&::after":M(h({},E),{backgroundPosition:`left -${T}px bottom -${j}px`})}};return v("div",{className:"MeshFaceButton",children:[o.map((p,$)=>i("div",{style:C,onClick:e,"data-index":$+1,"data-part":n,children:i(J,{sx:O(p)})})),i(K,{"data-part":n,"data-index":"0",onClick:e,variant:"outlined",children:"Remove"})]})}const st=([t,...o])=>`${t.toUpperCase()}${o.join("")}`;function D({target:t,onSelect:o,part:e}){var c,r;const n=(c=t==null?void 0:t.face)==null?void 0:c[`${e}List`];if(!n)return null;const s=(r=t.userData[`${e}Uv`])!=null?r:et(n);t.userData[`${e}Uv`]=s;const a=d=>{const{index:u,part:x}=d.currentTarget.dataset;o(parseInt(u),x)};return n&&v("div",{className:"MeshPartSelect",children:[v("h3",{children:["Select ",st(e)]}),i(nt,{id:t.id,uvList:s,onClick:a,part:e})]})}const xt=t=>i(D,h({part:"eye"},t)),ft=t=>i(D,h({part:"mouth"},t));export{ht as E,dt as M,ot as a,xt as b,ft as c,et as g,Q as i};
