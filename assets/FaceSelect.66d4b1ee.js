var N=Object.defineProperty,T=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var F=(e,c,s)=>c in e?N(e,c,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[c]=s,M=(e,c)=>{for(var s in c||(c={}))v.call(c,s)&&F(e,s,c[s]);if(m)for(var s of m(c))y.call(c,s)&&F(e,s,c[s]);return e},p=(e,c)=>T(e,C(c));var S=(e,c)=>{var s={};for(var n in e)v.call(e,n)&&c.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&m)for(var n of m(e))c.indexOf(n)<0&&y.call(e,n)&&(s[n]=e[n]);return s};import{a as d,j as i,z as L,b as k,F as f}from"./index.2783e247.js";import{a5 as j,ac as D}from"./vendor.02f756b1.js";import{u as K}from"./useKey.092752fe.js";import{F as P}from"./FacePartSelector.7784d83c.js";import{E as U,M as z,i as w,b as $,c as q}from"./MeshMouthSelect.92a2b947.js";import{a as B,b as A}from"./DialogTitle.4eda0cd7.js";function G(u){var o=u,{eyeTexture:e,eyeIdx:c,mouthTexture:s,mouthIdx:n}=o,l=S(o,["eyeTexture","eyeIdx","mouthTexture","mouthIdx"]);return d("div",p(M({className:"FaceBox"},l),{children:[i(U,{texture:e,index:c}),i(z,{texture:s,index:n})]}))}function H({target:e,onSelect:c}){const s=e==null?void 0:e.face;if(!s||(s==null?void 0:s.type)!=="uv")return i("h2",{children:"Not Available"});const[n,l]=K();j(()=>{const t=s.addEventListener("change",({propName:a})=>{(a.includes("Base")||a.includes("Texture"))&&l()});return()=>s.removeEventListener("change",t)},[]);const u=L(),[o,h]=D("Both");j(()=>!u&&l(),[o]);const r=t=>{const{index:a}=t.currentTarget.dataset;o!=="Eyes"&&c(a,"mouth"),o!=="Mouth"&&c(a,"eye")},{eyeBaseIdx:x,eyeTexture:b,mouthBaseIdx:E,mouthTexture:I}=s;return d("div",{className:"UvFaceSelect",children:[i(P,{value:o,onClick:h}),i("div",{className:"FaceBoxes",children:w.map(t=>i(G,{eyeTexture:b,eyeIdx:o==="Mouth"?x:t,mouthTexture:I,mouthIdx:o==="Eyes"?E:t,"data-index":t,onClick:r}))},n)]})}function J({target:e,onSelect:c}){var n,l;const s=e==null?void 0:e.face;return(s==null?void 0:s.type)==="meshes"&&d("div",{className:"MeshFaceSelect",children:[((n=s==null?void 0:s.eyeList)==null?void 0:n.length)>0&&i($,{target:e,onSelect:c}),((l=s==null?void 0:s.mouthList)==null?void 0:l.length)>0&&i(q,{target:e,onSelect:c})]})}const O={uv:H,meshes:J},Q={display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",fontSize:"large"};function g({target:e,onSelect:c,onAfterSelect:s}){var h,r;const{activeModel:n}=k();e!=null||(e=n);const l=(h=e==null?void 0:e.face)==null?void 0:h.type,u=(r=O[l])!=null?r:()=>i(f,{}),o=(...x)=>{c(...x),s==null||s()};return(e==null?void 0:e.face)?d("div",{className:"FaceSelect",children:[i(B,{sx:{textAlign:"center"},children:"Face Select"}),i(A,{sx:{padding:"1rem"},children:i(u,{target:e,onSelect:o})})]}):d(f,{children:[i(B,{sx:{textAlign:"center"},children:"Face Select"}),i("div",{style:Q,children:"Not available"})]})}export{g as F};
