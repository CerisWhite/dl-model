var V=Object.defineProperty,E=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var L=(e,n,o)=>n in e?V(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,d=(e,n)=>{for(var o in n||(n={}))U.call(n,o)&&L(e,o,n[o]);if(v)for(var o of v(n))w.call(n,o)&&L(e,o,n[o]);return e},p=(e,n)=>E(e,_(n));var q=(e,n)=>{var o={};for(var i in e)U.call(e,i)&&n.indexOf(i)<0&&(o[i]=e[i]);if(e!=null&&v)for(var i of v(e))n.indexOf(i)<0&&w.call(e,i)&&(o[i]=e[i]);return o};import{aG as b,aD as $}from"./vendor.7867cdc7.js";import{W,u as Q,S as Y}from"./lists.92f95f36.js";import{S as y}from"./Stretcher.caafb125.js";import{a as z,b as J,T as K}from"./TabBar.7e6cee1e.js";import{a as u,j as t,h,F as C,l as X,E as Z,G as ee}from"./index.7f884fcf.js";import{B as x}from"./Button.6f1d4e74.js";/* empty css               */import{h as ne,M as te}from"./ModelIcon.b1ee35c0.js";import{G as j}from"./Gallery.66078525.js";import{L as oe}from"./LoadSpinner.bdc69ca5.js";import{s as ie,g as ae}from"./aniFunction.75f743e1.js";import{u as A}from"./useAppData.dd089d42.js";import{S as T}from"./Selector.0830df2c.js";import{B as D}from"./Box.65bd9130.js";import{D as se,a as ce}from"./DialogTitle.936889f0.js";import"./TextField.2cbd9c7c.js";import"./ButtonBase.1beca0f5.js";import"./Popover.591e05e0.js";import"./Close.7561fffa.js";import"./GlowToggle.8d8f0d18.js";import"./DialogContext.32b4e0e7.js";function re(r){var m=r,{icon:e="",subIcon:n="",title:o,subtitle:i="",onClick:s}=m,a=q(m,["icon","subIcon","title","subtitle","onClick"]);const c=e&&u("div",{className:"IconButton-icons",children:[t("img",{className:"IconButton-mainIcon",src:e,alt:o,loading:"lazy"}),n&&t("img",{className:"IconButton-subIcon",src:n,alt:n,loading:"lazy"})]}),l=u("div",{className:"IconButton-description",children:[i&&t("h5",{className:"IconButton-subtitle",children:i}),t("h3",{className:"IconButton-title",children:o})]});return t(x,p(d({variant:"outlined",className:"IconButton",onClick:s,startIcon:c},a),{children:l}))}function F({icon:e,user:n,name:o,fullName:i=o,subtitle:s="",code:a,onClick:r}){const m=ne(n)?`img/icon/${n}.png`:"",c=e?`img/aniIcon/${e}.png`:m;return t(re,{icon:c,subIcon:e&&m,title:o,subtitle:s,onClick:r,"data-code":a,"data-name":i})}function le({icon:e,user:n,code:o,fullName:i,onClick:s}){return t(F,{icon:e,user:n,name:i,code:o,onClick:s})}function ue({query:e,onSelect:n}){const[o,i]=b([]),[s,a]=b(!0);return $(()=>{a(!0),setTimeout(async()=>{const r=await ie(e);i(r),a(!1)})},[e]),u("div",{className:"AniSearchResult",children:[t(y,{}),s?t(oe,{}):t(j,{list:o,component:le,onClick:n})]})}const me=[{label:"Home Screen",name:"home"},{label:"In Quest",name:"quest"},{label:"Weapon Specific",name:"weapon"},{label:"Generic Skills",name:"genericSkill"},{label:"Unique Skills",name:"uniqueSkill"},{label:"Unique Combo",name:"uniqueCombo"},{label:"Unique Force Strike",name:"uniqueFS"},{label:"Unique Victory",name:"uniqueVictory"},{label:"Other Unique",name:"uniqueOther"},{label:"Misc",name:"misc"}];function O({tabs:e,value:n,onChange:o}){return t(z,{variant:"scrollable",orientation:"vertical",className:"VerticalTabs",value:n,onChange:(s,a)=>o(a),children:e.map(({label:s,name:a})=>t(J,{label:s!=null?s:a,value:a},a))})}const de={minHeight:"3rem"};function G(a){var r=a,{name:e,code:n,onClick:o,fullName:i}=r,s=q(r,["name","code","onClick","fullName"]);return t(x,p(d({className:"AniSelect-Btn",variant:"contained","data-code":n,"data-name":i!=null?i:e,onClick:o,sx:de},s),{children:e}))}const pe=["Male","Female"];function he({value:e,onClick:n}){return t(T,{type:"text",options:pe,value:e,onClick:n})}function ge({onSelect:e}){const{gender:n,setGender:o}=h(s=>s.advAni.home),i=A(s=>s["ani-home"]);return u("div",{className:"HomeAni",children:[t("h3",{className:"HomeAni-groupTitle",children:"Common Animation"}),t("div",{className:"AniSelect-simpleBtns",children:i.common.map(({name:s,code:a})=>t(G,{name:s,code:a,onClick:e,className:"AniSelect-Btn"},s))}),t("hr",{}),u("div",{className:"HomeAni-groupTitle",children:[t("h3",{children:"Gender Specific"}),t(he,{value:n,onClick:o})]}),t("div",{className:"AniSelect-simpleBtns",children:i[n].map(({name:s,code:a})=>t(G,{name:s,code:a,fullName:`${n} ${s}`,onClick:e,className:"AniSelect-Btn"},s))})]})}function f({list:e,onClick:n}){return t(j,{list:e,component:G,onClick:n})}function Ae({onSelect:e}){const n=A(o=>o["ani-quest"]);return t(f,{list:n,onClick:e})}const I=["Long","Close","Rapid"],fe=I.map(e=>`img/appIcon/gun_${e}.png`);function Se({value:e,onClick:n}){return t(T,{type:"icon",options:I,icons:fe,labels:I,value:e,onClick:n})}const ve=W.map(e=>`img/appIcon/weapon_${e}.png`);function N({value:e,onClick:n}){return t(T,{type:"icon",options:W,icons:ve,value:e,onClick:n})}const be={Long:"Long Range",Close:"Close Range",Rapid:"Rapid Fire"};function ye({onSelect:e}){const{type:n,setType:o,gunMode:i,setGunMode:s}=h(l=>l.advAni.weapon),a=A(l=>l["ani-weapon"]),r=A(l=>l["ani-gun"]),m=a[n].map(l=>p(d({},l),{fullName:`${n} ${l.name}`})),c=r[i].map(l=>p(d({},l),{fullName:`${be[i]} Manacaster ${l.name}`}));return u("div",{className:"WeaponAni",children:[t(N,{value:n,onClick:o}),t(f,{list:m,onClick:e}),n==="Manacaster"&&u(C,{children:[t(Se,{value:i,onClick:s}),t(f,{list:c,onClick:e})]})]})}function Ce({onSelect:e}){const{type:n,setType:o}=h(a=>a.advAni.genericSkill),s=A(a=>a["ani-genericSkill"])[n].map(a=>p(d({},a),{fullName:`${n} ${a.name}`}));return u("div",{className:"GenericSkills",children:[t(N,{value:n,onClick:o}),t(f,{list:s,onClick:e})]})}function H({list:e,onClick:n}){return t(j,{list:e,component:F,onClick:n})}const Ne=e=>p(d({},e),{fullName:`${e.name} Victory`}),ke=e=>p(d({},e),{fullName:`${e.name} ${e.subtitle||""} Combo`}),Be=e=>p(d({},e),{fullName:`${e.name} ${e.subtitle||""} Force Strike`}),qe=e=>p(d({},e),{fullName:e.subtitle?`${e.subtitle} ${e.name}`:e.name}),$e={uniqueCombo:ke,uniqueFS:Be,uniqueVictory:Ne,uniqueSkill:qe};function k({name:e,onSelect:n}){var l,S;const o=`ani-${e}`,i=(l=A(g=>g[o]))!=null?l:{},{setGroupWeaponType:s}=h(g=>g.advAni.groupByWeapon),a=g=>s(e,g),r=h(g=>g.advAni.groupByWeapon[e]);r!=null||a(Object.keys(i)[0]);const m=$e[e],c=m?(S=i[r])==null?void 0:S.map(m):i[r];return u("div",{className:"AniGroup",children:[t(N,{value:r,onClick:a}),t(H,{list:c,onClick:n},r)]})}function xe({onSelect:e}){const n=A(o=>o["ani-misc"]);return t(f,{list:n,onClick:e})}function je({expanded:e,user:n,name:o,animations:i,onClick:s,onSelect:a}){return u(C,{children:[u("div",{className:`UniqueAniGroup ${e?"selected":""}`,"data-user":n,onClick:s,children:[t(te,{modelId:n,alt:o}),t("h3",{children:o})]}),e&&t("div",{className:"UniqueAniGroup-details",children:t(f,{list:i,onClick:a})})]})}function Te({onSelect:e}){const n=A(c=>c["ani-uniqueOther"]),{type:o,setType:i,selected:s,setSelected:a}=h(c=>c.advAni.uniqueOther),r=n[o],m=c=>{const{user:l}=c.currentTarget.dataset;a(l===s?"":l)};return t(C,{children:u("div",{className:"OtherUniqueAni",children:[t(N,{value:o,onClick:i}),t("hr",{}),t("div",{className:"OtherUniqueAni-groups",children:r.map(c=>t(je,p(d({expanded:s===c.user},c),{onClick:m,onSelect:e})))})]})})}const Ge={home:ge,quest:Ae,weapon:ye,genericSkill:Ce,uniqueSkill:e=>t(k,p(d({},e),{name:"uniqueSkill"})),uniqueVictory:e=>t(k,p(d({},e),{name:"uniqueVictory"})),uniqueFS:e=>t(k,p(d({},e),{name:"uniqueFS"})),uniqueCombo:e=>t(k,p(d({},e),{name:"uniqueCombo"})),uniqueOther:Te,misc:xe};function Ie({onSelect:e}){var s;const{category:n,setCategory:o}=h(a=>a.advAni),i=(s=Ge[n])!=null?s:y;return u("div",{className:"AniSelect-categories",children:[t(O,{tabs:me,value:n,onChange:o}),t("div",{className:"AniSelect-subCategory",children:t(i,{onSelect:e})})]})}function Me(){const{source:e,setSource:n,sourceName:o,setSourceName:i}=h(c=>c.personalAni),{inputModel:s}=X(),a=(c,l)=>{i(l),n(c)},r=async()=>{const c=await s();c&&a(...c)};$(()=>{o||setTimeout(async()=>{const c=await Z(e);(c==null?void 0:c.id)&&i(c.name)})},[e]);const m=["b","w"].includes(e==null?void 0:e[0])?`img/icon/${e}.png`:`img/portrait/${e}.png`;return u("div",{className:"PersonalAni-source",children:[e&&t("img",{src:m,alt:e},e),u("div",{children:[t("h3",{children:o}),t(x,{variant:"outlined",onClick:r,children:"Change Source"})]})]})}function Pe({onSelect:e}){const n=!!indexedDB,{source:o}=h(a=>a.personalAni),[i,s]=b([]);return $(()=>{s([]),setTimeout(async()=>{var m;if(!o)return;const r=((m=ee(o))!=null?m:n?await ae(o):[]).map(c=>p(d({},c),{user:void 0}));s(r)})},[o]),t(H,{list:i,onClick:e})}function Ue({onSelect:e}){return u("div",{className:"PersonalAnimation",children:[t(Me,{}),t(Pe,{onSelect:e})]})}function we({onSelect:e}){const{category:n,setCategory:o}=h(a=>a.extraAni),i=A(a=>a["ani-extra"]),s=Object.keys(i).map(a=>({name:a}));return u("div",{className:"AniSelect-categories",children:[t(O,{tabs:s,value:n,onChange:o}),t("div",{className:"AniSelect-subCategory",children:t(f,{list:i[n],onClick:e})})]})}const M={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"90vh",minWidth:"20rem","& svg":{color:"rgba(16, 16, 16, 0.8)"}},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)","& h2":{padding:"0.2rem 1rem"},"& Searchbox":{minWidth:"15rem"}},content:{padding:"0.5rem 1rem"}};const Le=["Adventurer","Personal","Extra"].map(e=>({name:e})),We={Adventurer:Ie,Personal:Ue,Extra:we};function rn({onSelect:e=()=>{},onAfterSelect:n}){var g;const{category:o,setCategory:i}=h(),s=!!indexedDB,[a,r]=b(""),m=Q(a,500),c=(P,B)=>i(B),l=P=>{const{code:B,name:R}=P.currentTarget.dataset;e(B,R),n==null||n()},S=(g=We[o])!=null?g:y;return u(D,{className:"AniSelect",sx:M.root,children:[u(D,{sx:M.title,children:[t(se,{children:"Select an Animation"}),s&&t(Y,{placeholder:"Search",query:a,onChange:r})]}),a?t(ue,{query:m,onSelect:l}):u(C,{children:[t(K,{value:o,onChange:c,tabs:Le}),u(ce,{sx:M.content,children:[t(y,{}),t(S,{onSelect:l})]})]})]})}export{rn as default};
