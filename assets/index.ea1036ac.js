var _=Object.defineProperty,K=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var W=(e,n,a)=>n in e?_(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,m=(e,n)=>{for(var a in n||(n={}))P.call(n,a)&&W(e,a,n[a]);if(N)for(var a of N(n))D.call(n,a)&&W(e,a,n[a]);return e},p=(e,n)=>K(e,Q(n));var B=(e,n)=>{var a={};for(var s in e)P.call(e,s)&&n.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&N)for(var s of N(e))n.indexOf(s)<0&&D.call(e,s)&&(a[s]=e[s]);return a};import{F as Y,ab as y,y as C}from"./vendor.1559e0f8.js";import{L as X,W as E,u as J,S as Z}from"./lists.d206be1c.js";import{S as q}from"./Stretcher.3978b797.js";import{a as ee,b as ne,T as te}from"./TabBar.4df1901d.js";import{j as t,a as u,h as g,F as A,r as ae,l as ie,M as oe,v as se}from"./index.fd0d8834.js";import{B as S}from"./Button.d9165e5c.js";/* empty css               */import{h as ce,M as le}from"./ModelIcon.0831aa3e.js";import{G as M,u as f}from"./Gallery.fddf7f06.js";import{s as re,g as de}from"./aniFunction.bd26fc29.js";import{S as T}from"./Selector.adbad58a.js";import{u as ue}from"./useKey.f63bbf37.js";import{U as me,f as pe}from"./file2dataURL.b9f2af8f.js";import{u as he}from"./useToggleState.e5df3c77.js";import{C as ge}from"./Check.e3588a14.js";import{c as j}from"./createSvgIcon.73611676.js";import{B as F}from"./Box.67edc333.js";import{a as ve,b as fe}from"./DialogTitle.e9b22493.js";import"./Close.f1933adf.js";import"./ButtonBase.9a889ca6.js";import"./Popover.8b5ed575.js";import"./GlowToggle.5a00e37d.js";const Ae=e=>e&&new Promise(n=>{new Y().load(e,n)});var Se=j(t("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),be=j(t("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit"),ye=j(t("path",{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"}),"Upload");function Ce(l){var d=l,{icon:e="",subIcon:n="",title:a,subtitle:s="",onClick:i}=d,o=B(d,["icon","subIcon","title","subtitle","onClick"]);const c=e&&u("div",{className:"IconButton-icons",children:[t("img",{className:"IconButton-mainIcon",src:e,alt:a,loading:"lazy"}),n&&t("img",{className:"IconButton-subIcon",src:n,alt:n,loading:"lazy"})]}),r=u("div",{className:"IconButton-description",children:[s&&t("h5",{className:"IconButton-subtitle",children:s}),t("h3",{className:"IconButton-title",children:a})]});return t(S,p(m({variant:"outlined",className:"IconButton",onClick:i,startIcon:c},o),{children:r}))}function O({icon:e,user:n,name:a,fullName:s=a,subtitle:i="",code:o,onClick:l}){const d=ce(n)?`img/icon/${n}.png`:"",c=e?`img/aniIcon/${e}.png`:d;return t(Ce,{icon:c,subIcon:e&&d,title:a,subtitle:i,onClick:l,"data-code":o,"data-name":s})}function ke({icon:e,user:n,code:a,fullName:s,onClick:i}){return t(O,{icon:e,user:n,name:s,code:a,onClick:i})}function Ne({query:e,onSelect:n}){const[a,s]=y([]),[i,o]=y(!0);return C(()=>{o(!0),setTimeout(async()=>{const l=await re(e);s(l),o(!1)})},[e]),u("div",{className:"AniSearchResult",children:[t(q,{}),i?t(X,{}):t(M,{list:a,component:ke,onClick:n})]})}const Be=[{label:"Home Screen",name:"home"},{label:"In Quest",name:"quest"},{label:"Weapon Specific",name:"weapon"},{label:"Generic Skills",name:"genericSkill"},{label:"Unique Skills",name:"uniqueSkill"},{label:"Unique Combo",name:"uniqueCombo"},{label:"Unique Force Strike",name:"uniqueFS"},{label:"Unique Victory",name:"uniqueVictory"},{label:"Other Unique",name:"uniqueOther"},{label:"Misc",name:"misc"}];function H({tabs:e,value:n,onChange:a}){return t(ee,{variant:"scrollable",orientation:"vertical",className:"VerticalTabs",value:n,onChange:(i,o)=>a(o),children:e.map(({label:i,name:o})=>t(ne,{label:i!=null?i:o,value:o},o))})}const qe={minHeight:"3rem"};function I(o){var l=o,{name:e,code:n,onClick:a,fullName:s}=l,i=B(l,["name","code","onClick","fullName"]);return t(S,p(m({className:"AniSelect-Btn",variant:"contained","data-code":n,"data-name":s!=null?s:e,onClick:a,sx:qe},i),{children:e}))}const $e=["Male","Female"];function xe({value:e,onClick:n}){return t(T,{type:"text",options:$e,value:e,onClick:n})}function Ue({onSelect:e}){const{gender:n,setGender:a}=g(i=>i.advAni.home),s=f(i=>i["ani-home"]);return u("div",{className:"HomeAni",children:[t("h3",{className:"HomeAni-groupTitle",children:"Common Animation"}),t("div",{className:"AniSelect-simpleBtns",children:s.common.map(({name:i,code:o})=>t(I,{name:i,code:o,onClick:e,className:"AniSelect-Btn"},i))}),t("hr",{}),u("div",{className:"HomeAni-groupTitle",children:[t("h3",{children:"Gender Specific"}),t(xe,{value:n,onClick:a})]}),t("div",{className:"AniSelect-simpleBtns",children:s[n].map(({name:i,code:o})=>t(I,{name:i,code:o,fullName:`${n} ${i}`,onClick:e,className:"AniSelect-Btn"},i))})]})}function b({list:e,onClick:n}){return t(M,{list:e,component:I,onClick:n})}function Me({onSelect:e}){const n=f(a=>a["ani-quest"]);return t(b,{list:n,onClick:e})}const L=["Long","Close","Rapid"],Te=L.map(e=>`img/appIcon/gun_${e}.png`);function je({value:e,onClick:n}){return t(T,{type:"icon",options:L,icons:Te,labels:L,value:e,onClick:n})}const Ie=E.map(e=>`img/appIcon/weapon_${e}.png`);function $({value:e,onClick:n}){return t(T,{type:"icon",options:E,icons:Ie,value:e,onClick:n})}const Le={Long:"Long Range",Close:"Close Range",Rapid:"Rapid Fire"};function Ge({onSelect:e}){const{type:n,setType:a,gunMode:s,setGunMode:i}=g(r=>r.advAni.weapon),o=f(r=>r["ani-weapon"]),l=f(r=>r["ani-gun"]),d=o[n].map(r=>p(m({},r),{fullName:`${n} ${r.name}`})),c=l[s].map(r=>p(m({},r),{fullName:`${Le[s]} Manacaster ${r.name}`}));return u("div",{className:"WeaponAni",children:[t($,{value:n,onClick:a}),t(b,{list:d,onClick:e}),n==="Manacaster"&&u(A,{children:[t(je,{value:s,onClick:i}),t(b,{list:c,onClick:e})]})]})}function we({onSelect:e}){const{type:n,setType:a}=g(o=>o.advAni.genericSkill),i=f(o=>o["ani-genericSkill"])[n].map(o=>p(m({},o),{fullName:`${n} ${o.name}`}));return u("div",{className:"GenericSkills",children:[t($,{value:n,onClick:a}),t(b,{list:i,onClick:e})]})}function V({list:e,onClick:n}){return t(M,{list:e,component:O,onClick:n})}const Pe=e=>p(m({},e),{fullName:`${e.name} Victory`}),De=e=>p(m({},e),{fullName:`${e.name} ${e.subtitle||""} Combo`}),We=e=>p(m({},e),{fullName:`${e.name} ${e.subtitle||""} Force Strike`}),Ee=e=>p(m({},e),{fullName:e.subtitle?`${e.subtitle} ${e.name}`:e.name}),Fe={uniqueCombo:De,uniqueFS:We,uniqueVictory:Pe,uniqueSkill:Ee};function x({name:e,onSelect:n}){var r,v;const a=`ani-${e}`,s=(r=f(h=>h[a]))!=null?r:{},{setGroupWeaponType:i}=g(h=>h.advAni.groupByWeapon),o=h=>i(e,h),l=g(h=>h.advAni.groupByWeapon[e]);l!=null||o(Object.keys(s)[0]);const d=Fe[e],c=d?(v=s[l])==null?void 0:v.map(d):s[l];return u("div",{className:"AniGroup",children:[t($,{value:l,onClick:o}),t(V,{list:c,onClick:n},l)]})}function Oe({onSelect:e}){const n=f(a=>a["ani-misc"]);return t(b,{list:n,onClick:e})}function He({expanded:e,user:n,name:a,animations:s,onClick:i,onSelect:o}){return u(A,{children:[u("div",{className:`UniqueAniGroup ${e?"selected":""}`,"data-user":n,onClick:i,children:[t(le,{modelId:n,alt:a}),t("h3",{children:a})]}),e&&t("div",{className:"UniqueAniGroup-details",children:t(b,{list:s,onClick:o})})]})}function Ve({onSelect:e}){const n=f(c=>c["ani-uniqueOther"]),{type:a,setType:s,selected:i,setSelected:o}=g(c=>c.advAni.uniqueOther),l=n[a],d=c=>{const{user:r}=c.currentTarget.dataset;o(r===i?"":r)};return t(A,{children:u("div",{className:"OtherUniqueAni",children:[t($,{value:a,onClick:s}),t("hr",{}),t("div",{className:"OtherUniqueAni-groups",children:l.map(c=>t(He,p(m({expanded:i===c.user},c),{onClick:d,onSelect:e})))})]})})}const Re={home:Ue,quest:Me,weapon:Ge,genericSkill:we,uniqueSkill:e=>t(x,p(m({},e),{name:"uniqueSkill"})),uniqueVictory:e=>t(x,p(m({},e),{name:"uniqueVictory"})),uniqueFS:e=>t(x,p(m({},e),{name:"uniqueFS"})),uniqueCombo:e=>t(x,p(m({},e),{name:"uniqueCombo"})),uniqueOther:Ve,misc:Oe};function ze({onSelect:e}){var i;const{category:n,setCategory:a}=g(o=>o.advAni),s=(i=Re[n])!=null?i:q;return u("div",{className:"AniSelect-categories",children:[t(H,{tabs:Be,value:n,onChange:a}),t("div",{className:"AniSelect-subCategory",children:t(s,{onSelect:e})})]})}function _e(){const{source:e,setSource:n,sourceName:a,setSourceName:s}=g(c=>c.personalAni),{inputModel:i}=ae(),o=(c,r)=>{s(r),n(c)},l=async()=>{const c=await i();c&&o(...c)};C(()=>{a||setTimeout(async()=>{const c=await ie(e);(c==null?void 0:c.id)&&s(c.name)})},[e]);const d=["b","w"].includes(e==null?void 0:e[0])?`img/icon/${e}.png`:`img/portrait/${e}.png`;return u("div",{className:"PersonalAni-source",children:[e&&t("img",{src:d,alt:e},e),u("div",{children:[t("h3",{children:a}),t(S,{variant:"outlined",onClick:l,children:"Change Source"})]})]})}function Ke({onSelect:e}){const n=!!indexedDB,{source:a}=g(o=>o.personalAni),[s,i]=y([]);return C(()=>{i([]),setTimeout(async()=>{var d;if(!a)return;const l=((d=oe(a))!=null?d:n?await de(a):[]).map(c=>p(m({},c),{user:void 0}));i(l)})},[a]),t(V,{list:s,onClick:e})}function Qe({onSelect:e}){return u("div",{className:"PersonalAnimation",children:[t(_e,{}),t(Ke,{onSelect:e})]})}function Ye({onSelect:e}){const{category:n,setCategory:a}=g(o=>o.extraAni),s=f(o=>o["ani-extra"]),i=Object.keys(s).map(o=>({name:o}));return u("div",{className:"AniSelect-categories",children:[t(H,{tabs:i,value:n,onChange:a}),t("div",{className:"AniSelect-subCategory",children:t(b,{list:s[n],onClick:e})})]})}function Xe(s){var i=s,{initText:e,onChange:n=o=>{}}=i,a=B(i,["initText","onChange"]);const[o,l]=y(e),[d,c]=he(),r=h=>{const{value:k}=h.target;l(k),n(h)},v=h=>{h.keyCode===13&&c()};return C(()=>{l(e)},[e]),d?u(A,{children:[t(S,{title:"Save",onClick:c,children:t(ge,{})}),t("input",m({value:o,onChange:r,onKeyUp:v},a))]}):u(A,{children:[t(S,{title:"Edit",onClick:c,children:t(be,{})}),t("div",p(m({},a),{children:o}))]})}function Je({list:e,onSelect:n}){const a=i=>{const{value:o}=i.target,{uuid:l}=i.target.dataset,d=e.find(c=>c.uuid===l);d.name=o},s=i=>{const{uuid:o}=i.target.dataset,l=e.findIndex(d=>d.uuid===o);l!==-1&&e.splice(l,1)};return t("div",{className:"AnimationList",children:e==null?void 0:e.map(i=>u(A,{children:[t(Xe,{initText:i.name,onChange:a,className:"AnimationList-aniName","data-uuid":i.uuid}),t(S,{"data-code":`ex:${i.uuid}`,"data-name":i.name,onClick:n,variant:"contained",title:"Select this animation",children:"Select"}),t(S,{"data-uuid":i.uuid,onClick:s,variant:"contained",title:"Delete this animation",children:t(Se,{})})]}))})}function Ze({onSelect:e}){const{userData:n}=se,[a,s]=ue();return C(()=>{const o=n.ani.addEventListener("change",s);return()=>n.ani.removeEventListener("change",o)}),u("div",{className:"UploadedAni",children:[t(me,{title:"Upload fbx files containing animations applied on DL models",label:"Upload Animations",multiple:!0,mimeType:".fbx",onChange:async o=>{const l=Array.from(o),d=await Promise.all(l.map(pe)),r=(await Promise.all(d.map(Ae))).flatMap(v=>v.animations);n.ani.push(...r)}}),t(Je,{list:n.ani,onSelect:e},a)]})}const G={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"90vh",minWidth:"20rem","& svg":{color:"rgba(16, 16, 16, 0.8)"}},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)","& h2":{padding:"0.2rem 1rem"},"& Searchbox":{minWidth:"15rem"}},content:{padding:"0.5rem 1rem"}};const en=[{name:"Adv"},{name:"Personal"},{name:"Extra"},{name:"Upload",icon:t(ye,{}),label:""}],nn={Adv:ze,Personal:Qe,Extra:Ye,Upload:Ze};function qn({onSelect:e=()=>{},onAfterSelect:n}){var k;const{category:a,setCategory:s,getCurrentState:i}=g(),o=!!indexedDB,[l,d]=y(""),c=J(l,500),r=(w,U)=>s(U),v=w=>{const{code:U,name:R}=w.currentTarget.dataset,z=i();e(U,R,z),n==null||n()},h=(k=nn[a])!=null?k:q;return u(F,{className:"AniSelect",sx:G.root,children:[u(F,{sx:G.title,children:[t(ve,{children:"Select an Animation"}),o&&t(Z,{placeholder:"Search",query:l,onChange:d})]}),l?t(Ne,{query:c,onSelect:v}):u(A,{children:[t(te,{value:a,onChange:r,tabs:en}),u(fe,{sx:G.content,children:[t(q,{}),t(h,{onSelect:v})]})]})]})}export{qn as default};
