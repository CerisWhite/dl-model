import{ax as e,aD as g,aF as v,aB as y}from"./vendor.ffd395ab.js";import{u as b}from"./useKey.36282264.js";import{a as f,j as C,G as D,v as h}from"./index.10d263a6.js";import{S}from"./Stretcher.3a6da6d1.js";import{A as x,a as L,b as k}from"./AttachmentSetting.5e7f0472.js";import{a as T,D as w}from"./DialogTitle.3ac1c173.js";import{B as d}from"./Box.d6d5f65e.js";import{S as I}from"./TextField.6c373f07.js";import{M as K}from"./MenuItem.4633d262.js";import{B as N}from"./Button.fc775fac.js";/* empty css               */import"./ModelIcon.7e8a6551.js";import"./useToggleState.e0992616.js";import"./ButtonBase.e40964c1.js";import"./Popover.80b4a490.js";import"./ColorButton.91c9b9c8.js";import"./Close.ca078ff9.js";import"./DialogContext.619db339.js";function E({bone:a}){var r;const{activeModel:s}=f(),i=(r=s==null?void 0:s.attachment[a])!=null?r:[];return e(L,{defaultOpen:!0,className:"BoneManager",disableGutters:!0},e(g,null,a),e(g,null,i.map(n=>{var o,c;return e(x,{target:n,label:(c=(o=n==null?void 0:n.userData)==null?void 0:o.name)!=null?c:n.id})})))}function tt(){var u,p;const{activeModel:a}=f(),[s,i]=b(),{inputModel:r}=C(),n=["root",...(p=(u=a==null?void 0:a.bones)==null?void 0:u.list)!=null?p:[]],[o,c]=v(n[0]),j=D(a.attachment.list.map(t=>t.parentBone));y(()=>{if(!a)return;const t=a,l=t.addEventListener("AttachmentChanged",i);return()=>t.removeEventListener("AttachmentChanged",l)},[a]);const A=t=>{c(t.target.value)},M=async()=>{const t=await r();if(!t)return;const[l,B]=t,m=await h.loadDLModel(l);m.userData.name=B,a.attach(m,o==="root"?void 0:o),m.outline.code=a.outline.code,m.material.code=a.material.code,h.render()};return e(d,{className:"AttachmentManager"},e(d,{className:"AttachmentManager-top"},e(w,null,"Manage Attachments"),e(d,{className:"AttachmentManager-add"},e(I,{onChange:A,value:o,className:"AttachmentManager-select"},n.map(t=>e(K,{key:t,value:t},t))),e(N,{title:"Add Attachment",variant:"contained",onClick:M},e(k,null)))),e(T,{key:s,className:"AttachmentManager-body"},e(S,null),j.map(t=>e(E,{key:t,bone:t}))))}export{tt as default};
