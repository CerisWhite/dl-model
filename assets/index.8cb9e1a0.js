var W=Object.defineProperty,F=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;var C=(t,a,e)=>a in t?W(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,g=(t,a)=>{for(var e in a||(a={}))x.call(a,e)&&C(t,e,a[e]);if(m)for(var e of m(a))f.call(a,e)&&C(t,e,a[e]);return t},v=(t,a)=>F(t,$(a));var h=(t,a)=>{var e={};for(var o in t)x.call(t,o)&&a.indexOf(o)<0&&(e[o]=t[o]);if(t!=null&&m)for(var o of m(t))a.indexOf(o)<0&&f.call(t,o)&&(e[o]=t[o]);return e};import{aC as D,aK as B}from"./vendor.079a595c.js";import{T as L}from"./TabBar.191bcd62.js";import{C as G}from"./ColorPicker.f1a8cb7a.js";import{G as S,T as z,u as j}from"./Gallery.122d8d75.js";import{j as n,a as p,F as A,v as U}from"./index.ca34b317.js";import{B as y}from"./Box.9bd5bda9.js";import{B as w}from"./Button.200b1bb2.js";import{a as N,b as E}from"./DialogTitle.03f8649e.js";import"./ButtonBase.b987992f.js";import"./Popover.d9375501.js";import"./ColorButton.8da565fa.js";const k={gallery:{gap:"1rem"},container:{boxSizing:"border-box",maxWidth:"8rem",maxHeight:"8rem",position:"relative",cursor:"pointer",borderRadius:"5%",overflow:"hidden",filter:"drop-shadow(0 0 2px rgba(0,0,0,0.5))",objectFit:"cover",contentVisibility:"auto",containIntrinsicSize:"0 8rem",alignSelf:"stretch",margin:"auto","&:hover":{border:"1px solid white",filter:"drop-shadow(0.1rem 0.1rem 0.2rem black)"},"&[data-name]::after":{content:"attr(data-name)",position:"absolute",bottom:"0.25rem",left:0,backgroundColor:"rgba(0,0,0,0.8)",color:"#fff",textAlign:"center",padding:"0.1rem",width:"100%"},"&[data-name]:hover::after":{backgroundColor:"rgba(255,255,255,0.6)",color:"black"}},image:{maxWidth:"100%"}},H=({src:t,value:a,name:e,onClick:o})=>n(y,{sx:k.container,"data-name":e,children:n("img",{src:t,"data-value":a,onClick:o,style:k.image})}),P=({list:t,onClick:a})=>n(S,{style:k.gallery,onClick:a,list:t,component:H}),T={button:{padding:"0.5rem 1rem",margin:0,color:"rgba(16, 16, 16, 0.8)",border:"1px solid rgba(16, 16, 16, 0.5)","&:hover":{border:"1px solid rgba(16, 16, 16, 0.8)",backgroundColor:"rgba(210, 210, 210, 0.2)"}},input:{opacity:0,width:0,maxWidth:0}};function K(l){var c=l,{id:t="upload",multiple:a=!1,label:e="Upload",mimeType:o="image/*",onChange:i,style:r={}}=c,s=h(c,["id","multiple","label","mimeType","onChange","style"]);const d=D(),u=()=>{const b=d.current.files;i(b)},R=g(g({},T.button),r);return p(y,{children:[n(w,v(g({variant:"outlined",htmlFor:t,component:"label",sx:R},s),{children:e})),n("input",{name:t,id:t,type:"file",multiple:a,accept:o,style:T.input,ref:b=>d.current=b,onChange:u})]})}const I={input:{paddingRight:"0.2rem",minWidth:"8rem"},button:{padding:"0.5rem 1rem",margin:0,backgroundColor:"rgba(16, 16, 16, 0.8)",color:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(16, 16, 16, 0.5)","&:hover":{backgroundColor:"rgba(50, 50, 50, 0.8)",border:"1px solid rgba(16, 16, 16, 0.8)"}}};function V(o){var i=o,{onApply:t,applyLabel:a="Apply"}=i,e=h(i,["onApply","applyLabel"]);const[r,s]=B(""),l=u=>s(u.target.value),c=()=>t(r),d=n(w,{sx:I.button,variant:"contained",onClick:c,children:a});return n(z,g({value:r,onChange:l,placeholder:"Enter URL",margin:"none",InputProps:{endAdornment:d,sx:I.input},inputProps:{type:"url"},size:"small"},e))}const _=async t=>new Promise(a=>{const e=new FileReader;e.onload=o=>a(o.target.result),e.readAsDataURL(t)}),q={external:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",maxWidth:"100%",marginBottom:"0.5rem"}};function J({onSelect:t}){const a=j(r=>r["background-image"]),e=r=>{const{value:s}=r.target.dataset,l=`img:${s}`;t(l)},o=async r=>{const l=`img:${await _(r[0])}`;t(l)},i=r=>{if(!r)return;const s=`img:${r}`;t(s)};return p(A,{children:[p(y,{sx:q.external,children:[n(K,{onChange:o}),n(V,{onApply:i})]}),n(P,{list:a,onClick:e})]})}function M({onSelect:t}){const a=j(o=>o["background-skybox"]);return n(P,{list:a,onClick:o=>{const{value:i}=o.target.dataset,r=`sky:${i}`;t(r)}})}const O=["Color","Image","Skybox"].map(t=>({name:t})),Q={Color:G,Image:J,Skybox:M},X=t=>t.startsWith("sky:")?"Skybox":t.startsWith("img:")?"Image":"Color";function dt({onAfterSelect:t}){var l;const a=X(U.background),[e,o]=B(a),i=c=>{U.background=c,t==null||t()},r=(c,d)=>o(d),s=(l=Q[e])!=null?l:()=>null;return p("div",{className:"BackgroundPicker",children:[n(N,{sx:{textAlign:"center"},children:"Choose a background"}),n(L,{value:e,onChange:r,tabs:O}),n(E,{children:n(s,{onSelect:i})})]})}export{dt as default};
