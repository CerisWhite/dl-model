var V=Object.defineProperty,E=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var L=(e,n,a)=>n in e?V(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,d=(e,n)=>{for(var a in n||(n={}))U.call(n,a)&&L(e,a,n[a]);if(v)for(var a of v(n))w.call(n,a)&&L(e,a,n[a]);return e},p=(e,n)=>E(e,_(n));var q=(e,n)=>{var a={};for(var o in e)U.call(e,o)&&n.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&v)for(var o of v(e))n.indexOf(o)<0&&w.call(e,o)&&(a[o]=e[o]);return a};import{aG as b,aD as $}from"./vendor.7867cdc7.js";import{W,u as Q,S as Y}from"./lists.fdff6818.js";import{S as y}from"./Stretcher.c2f3e9de.js";import{a as z,b as J,T as K}from"./TabBar.60cb7ec7.js";import{a as u,j as t,h,F as C,l as X,E as Z,G as ee}from"./index.afacb44a.js";import{B as x}from"./Button.ada8b095.js";/* empty css               */import{h as ne,M as te}from"./ModelIcon.802c1e72.js";import{G as j}from"./Gallery.0d7609d5.js";import{L as ae}from"./LoadSpinner.8b3575a7.js";import{s as oe,g as ie}from"./aniFunction.50413669.js";import{u as A}from"./useAppData.dd089d42.js";import{S as T}from"./Selector.f9cba00f.js";import{B as D}from"./Box.9af05db4.js";import{D as se,a as ce}from"./DialogTitle.62ce4fc8.js";import"./TextField.a06e4176.js";import"./ButtonBase.15677c61.js";import"./Popover.a25425a2.js";import"./Close.0a7c778c.js";import"./GlowToggle.1decaa68.js";import"./DialogContext.af79ebf6.js";function re(r){var m=r,{icon:e="",subIcon:n="",title:a,subtitle:o="",onClick:s}=m,i=q(m,["icon","subIcon","title","subtitle","onClick"]);const c=e&&u("div",{className:"IconButton-icons",children:[t("img",{className:"IconButton-mainIcon",src:e,alt:a,loading:"lazy"}),n&&t("img",{className:"IconButton-subIcon",src:n,alt:n,loading:"lazy"})]}),l=u("div",{className:"IconButton-description",children:[o&&t("h5",{className:"IconButton-subtitle",children:o}),t("h3",{className:"IconButton-title",children:a})]});return t(x,p(d({variant:"outlined",className:"IconButton",onClick:s,startIcon:c},i),{children:l}))}function F({icon:e,user:n,name:a,fullName:o=a,subtitle:s="",code:i,onClick:r}){const m=ne(n)?`img/icon/${n}.png`:"",c=e?`img/aniIcon/${e}.png`:m;return t(re,{icon:c,subIcon:e&&m,title:a,subtitle:s,onClick:r,"data-code":i,"data-name":o})}function le({icon:e,user:n,code:a,fullName:o,onClick:s}){return t(F,{icon:e,user:n,name:o,code:a,onClick:s})}function ue({query:e,onSelect:n}){const[a,o]=b([]),[s,i]=b(!0);return $(()=>{i(!0),setTimeout(async()=>{const r=await oe(e);o(r),i(!1)})},[e]),u("div",{className:"AniSearchResult",children:[t(y,{}),s?t(ae,{}):t(j,{list:a,component:le,onClick:n})]})}const me=[{label:"Home Screen",name:"home"},{label:"In Quest",name:"quest"},{label:"Weapon Specific",name:"weapon"},{label:"Generic Skills",name:"genericSkill"},{label:"Unique Skills",name:"uniqueSkill"},{label:"Unique Combo",name:"uniqueCombo"},{label:"Unique Force Strike",name:"uniqueFS"},{label:"Unique Victory",name:"uniqueVictory"},{label:"Other Unique",name:"uniqueOther"},{label:"Misc",name:"misc"}];function O({tabs:e,value:n,onChange:a}){return t(z,{variant:"scrollable",orientation:"vertical",className:"VerticalTabs",value:n,onChange:(s,i)=>a(i),children:e.map(({label:s,name:i})=>t(J,{label:s!=null?s:i,value:i},i))})}const de={minHeight:"3rem"};function G(i){var r=i,{name:e,code:n,onClick:a,fullName:o}=r,s=q(r,["name","code","onClick","fullName"]);return t(x,p(d({className:"AniSelect-Btn",variant:"contained","data-code":n,"data-name":o!=null?o:e,onClick:a,sx:de},s),{children:e}))}const pe=["Male","Female"];function he({value:e,onClick:n}){return t(T,{type:"text",options:pe,value:e,onClick:n})}function ge({onSelect:e}){const{gender:n,setGender:a}=h(s=>s.advAni.home),o=A(s=>s["ani-home"]);return u("div",{className:"HomeAni",children:[t("h3",{className:"HomeAni-groupTitle",children:"Common Animation"}),t("div",{className:"AniSelect-simpleBtns",children:o.common.map(({name:s,code:i})=>t(G,{name:s,code:i,onClick:e,className:"AniSelect-Btn"},s))}),t("hr",{}),u("div",{className:"HomeAni-groupTitle",children:[t("h3",{children:"Gender Specific"}),t(he,{value:n,onClick:a})]}),t("div",{className:"AniSelect-simpleBtns",children:o[n].map(({name:s,code:i})=>t(G,{name:s,code:i,fullName:`${n} ${s}`,onClick:e,className:"AniSelect-Btn"},s))})]})}function S({list:e,onClick:n}){return t(j,{list:e,component:G,onClick:n})}function Ae({onSelect:e}){const n=A(a=>a["ani-quest"]);return t(S,{list:n,onClick:e})}const I=["Long","Close","Rapid"],Se=I.map(e=>`img/appIcon/gun_${e}.png`);function fe({value:e,onClick:n}){return t(T,{type:"icon",options:I,icons:Se,labels:I,value:e,onClick:n})}const ve=W.map(e=>`img/appIcon/weapon_${e}.png`);function N({value:e,onClick:n}){return t(T,{type:"icon",options:W,icons:ve,value:e,onClick:n})}const be={Long:"Long Range",Close:"Close Range",Rapid:"Rapid Fire"};function ye({onSelect:e}){const{type:n,setType:a,gunMode:o,setGunMode:s}=h(l=>l.advAni.weapon),i=A(l=>l["ani-weapon"]),r=A(l=>l["ani-gun"]),m=i[n].map(l=>p(d({},l),{fullName:`${n} ${l.name}`})),c=r[o].map(l=>p(d({},l),{fullName:`${be[o]} Manacaster ${l.name}`}));return u("div",{className:"WeaponAni",children:[t(N,{value:n,onClick:a}),t(S,{list:m,onClick:e}),n==="Manacaster"&&u(C,{children:[t(fe,{value:o,onClick:s}),t(S,{list:c,onClick:e})]})]})}function Ce({onSelect:e}){const{type:n,setType:a}=h(i=>i.advAni.genericSkill),s=A(i=>i["ani-genericSkill"])[n].map(i=>p(d({},i),{fullName:`${n} ${i.name}`}));return u("div",{className:"GenericSkills",children:[t(N,{value:n,onClick:a}),t(S,{list:s,onClick:e})]})}function H({list:e,onClick:n}){return t(j,{list:e,component:F,onClick:n})}const Ne=e=>p(d({},e),{fullName:`${e.name} Victory`}),ke=e=>p(d({},e),{fullName:`${e.name} ${e.subtitle||""} Combo`}),Be=e=>p(d({},e),{fullName:`${e.name} ${e.subtitle||""} Force Strike`}),qe=e=>p(d({},e),{fullName:e.subtitle?`${e.subtitle} ${e.name}`:e.name}),$e={uniqueCombo:ke,uniqueFS:Be,uniqueVictory:Ne,uniqueSkill:qe};function k({name:e,onSelect:n}){var l,f;const a=`ani-${e}`,o=(l=A(g=>g[a]))!=null?l:{},{setGroupWeaponType:s}=h(g=>g.advAni.groupByWeapon),i=g=>s(e,g),r=h(g=>g.advAni.groupByWeapon[e]);r!=null||i(Object.keys(o)[0]);const m=$e[e],c=m?(f=o[r])==null?void 0:f.map(m):o[r];return u("div",{className:"AniGroup",children:[t(N,{value:r,onClick:i}),t(H,{list:c,onClick:n},r)]})}function xe({onSelect:e}){const n=A(a=>a["ani-misc"]);return t(S,{list:n,onClick:e})}function je({expanded:e,user:n,name:a,animations:o,onClick:s,onSelect:i}){return u(C,{children:[u("div",{className:`UniqueAniGroup ${e?"selected":""}`,"data-user":n,onClick:s,children:[t(te,{modelId:n,alt:a}),t("h3",{children:a})]}),e&&t("div",{className:"UniqueAniGroup-details",children:t(S,{list:o,onClick:i})})]})}function Te({onSelect:e}){const n=A(c=>c["ani-uniqueOther"]),{type:a,setType:o,selected:s,setSelected:i}=h(c=>c.advAni.uniqueOther),r=n[a],m=c=>{const{user:l}=c.currentTarget.dataset;i(l===s?"":l)};return t(C,{children:u("div",{className:"OtherUniqueAni",children:[t(N,{value:a,onClick:o}),t("hr",{}),t("div",{className:"OtherUniqueAni-groups",children:r.map(c=>t(je,p(d({expanded:s===c.user},c),{onClick:m,onSelect:e})))})]})})}const Ge={home:ge,quest:Ae,weapon:ye,genericSkill:Ce,uniqueSkill:e=>t(k,p(d({},e),{name:"uniqueSkill"})),uniqueVictory:e=>t(k,p(d({},e),{name:"uniqueVictory"})),uniqueFS:e=>t(k,p(d({},e),{name:"uniqueFS"})),uniqueCombo:e=>t(k,p(d({},e),{name:"uniqueCombo"})),uniqueOther:Te,misc:xe};function Ie({onSelect:e}){var s;const{category:n,setCategory:a}=h(i=>i.advAni),o=(s=Ge[n])!=null?s:y;return u("div",{className:"AniSelect-categories",children:[t(O,{tabs:me,value:n,onChange:a}),t("div",{className:"AniSelect-subCategory",children:t(o,{onSelect:e})})]})}function Me(){const{source:e,setSource:n,sourceName:a,setSourceName:o}=h(c=>c.personalAni),{inputModel:s}=X(),i=(c,l)=>{o(l),n(c)},r=async()=>{const c=await s();c&&i(...c)};$(()=>{a||setTimeout(async()=>{const c=await Z(e);(c==null?void 0:c.id)&&o(c.name)})},[e]);const m=["b","w"].includes(e==null?void 0:e[0])?`img/icon/${e}.png`:`img/portrait/${e}.png`;return u("div",{className:"PersonalAni-source",children:[e&&t("img",{src:m,alt:e},e),u("div",{children:[t("h3",{children:a}),t(x,{variant:"outlined",onClick:r,children:"Change Source"})]})]})}function Pe({onSelect:e}){const n=!!indexedDB,{source:a}=h(i=>i.personalAni),[o,s]=b([]);return $(()=>{s([]),setTimeout(async()=>{var m;if(!a)return;const r=((m=ee(a))!=null?m:n?await ie(a):[]).map(c=>p(d({},c),{user:void 0}));s(r)})},[a]),t(H,{list:o,onClick:e})}function Ue({onSelect:e}){return u("div",{className:"PersonalAnimation",children:[t(Me,{}),t(Pe,{onSelect:e})]})}function we({onSelect:e}){const{category:n,setCategory:a}=h(i=>i.extraAni),o=A(i=>i["ani-extra"]),s=Object.keys(o).map(i=>({name:i}));return u("div",{className:"AniSelect-categories",children:[t(O,{tabs:s,value:n,onChange:a}),t("div",{className:"AniSelect-subCategory",children:t(S,{list:o[n],onClick:e})})]})}const M={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"90vh",minWidth:"20rem","& svg":{color:"rgba(16, 16, 16, 0.8)"}},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)","& h2":{padding:"0.2rem 1rem"},"& Searchbox":{minWidth:"15rem"}},content:{padding:"0.5rem 1rem"}};const Le=["Adventurer","Personal","Extra"].map(e=>({name:e})),We={Adventurer:Ie,Personal:Ue,Extra:we};function rn({onSelect:e=()=>{},onAfterSelect:n}){var g;const{category:a,setCategory:o}=h(),s=!!indexedDB,[i,r]=b(""),m=Q(i,500),c=(P,B)=>o(B),l=P=>{const{code:B,name:R}=P.currentTarget.dataset;e(B,R),n==null||n()},f=(g=We[a])!=null?g:y;return u(D,{className:"AniSelect",sx:M.root,children:[u(D,{sx:M.title,children:[t(se,{children:"Select an Animation"}),s&&t(Y,{placeholder:"Search",query:i,onChange:r})]}),i?t(ue,{query:m,onSelect:l}):u(C,{children:[t(K,{value:a,onChange:c,tabs:Le}),u(ce,{sx:M.content,children:[t(y,{}),t(f,{onSelect:l})]})]})]})}export{rn as default};
