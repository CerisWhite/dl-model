var G=Object.defineProperty,N=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var Q=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var D=(a,e,t)=>e in a?G(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,v=(a,e)=>{for(var t in e||(e={}))Q.call(e,t)&&D(a,t,e[t]);if(T)for(var t of T(e))E.call(e,t)&&D(a,t,e[t]);return a},w=(a,e)=>N(a,P(e));import{aK as c,aD as C,aH as $}from"./vendor.07c175f9.js";import{u as q}from"./useToggleState.315a621d.js";import{L as z,u as H,S as K}from"./lists.e8ac093f.js";import{F as R}from"./FacePartSelector.3bc9d6db.js";import{f as W,c as A,B as J,F as O,a as U}from"./filterConfig.1a4fa480.js";import{u as V,G as X}from"./Gallery.1cd58d2c.js";import{M as Y,C as Z,c as _,s as i,u as L}from"./styles.ec1aacc3.js";import{j as s,E as ee,a as g}from"./index.cb1c3c9f.js";import{B as y}from"./Box.6fbcc844.js";import{a as te,b as ae}from"./DialogTitle.6a651efc.js";import{I as se}from"./Close.86bb5e3d.js";function oe({compact:a,searchQuery:e,filter:t,content:d,onSelect:r}){var p;const u=(p=V(o=>o[`chara-${d}`]))!=null?p:[],m=u.filter(({id:o})=>!o.endsWith("h")),[h,n]=c([]),[F,f]=c(!1);return C(()=>n(m),[d]),C(()=>{f(!0);async function o(){const l=e?await ee(e):m;return await W(l,t)}setTimeout(async()=>{const l=await o();n(l),f(!1)})},[e,t]),u.length&&!F?s(X,{list:h,component:a?Y:Z,onClick:r}):s(z,{})}const b=_.find(({value:a})=>a==="chara").options,re=[],ce=w(v({},i.top),{"& .Selector":{margin:"0.1rem 2rem 0.1rem 0"}});function Fe({compact:a,onSelect:e,onAfterSelect:t}){const d=!!indexedDB,[r,u]=c(0),m=(S,x)=>u(x),[h,n]=c(""),F=H(h,500);C(()=>{n("")},[r]);const[f,p]=c(re),[o,l]=c("Both"),[I,M]=q(!0),j=b[r].value==="regular"&&A,B=a||L("(max-width:640px)")||L("(max-height:640px)"),k=$(S=>{const{value:x}=S.currentTarget.dataset;o!=="Eyes"&&e(x,"mouth"),o!=="Mouth"&&e(x,"eye"),t==null||t()},[o]);return g(y,{className:"FaceTexture",sx:i.root,children:[g(y,{sx:ce,children:[s(te,{sx:i.title,children:"Select Texture"}),s(R,{value:o,onClick:l}),s(J,{options:b,selectedIndices:[r],setIndex:m}),g(y,{sx:i.searchFilter,children:[g(y,{sx:i.search,children:[s(K,{query:h,onChange:n,placeholder:d?"Search All":"Search"},r[0]),j&&s(se,{onClick:M,size:"large",children:s(O,{})})]}),I&&j&&s(U,{config:j,onChange:p,compact:B})]})]}),s(ae,{sx:i.content,children:s(oe,{compact:B,searchQuery:F,filter:f,content:b[r].value,onSelect:k})})]})}export{Fe as F};
