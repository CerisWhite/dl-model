import{ax as e,aD as f,aF as v,aB as b}from"./vendor.dead0e45.js";import{u as y}from"./useKey.c0faf57c.js";import{a as g,j as C,G as D,v as h}from"./index.8ad11a6b.js";import{S}from"./Stretcher.f31308d6.js";import{A as x,a as L,b as k}from"./AttachmentSetting.edf8cda2.js";import{a as T,D as w}from"./DialogTitle.ba06c24c.js";import{B as d}from"./Box.93a277ea.js";import{S as I}from"./TextField.a09e8e5c.js";import{M as K}from"./MenuItem.8bfdfe3d.js";import{B as N}from"./Button.21dca63e.js";/* empty css               */import"./ModelIcon.919d14fb.js";import"./useToggleState.8cff7b60.js";import"./ButtonBase.7e212a37.js";import"./Popover.92ce4ff4.js";import"./ColorButton.fce2587a.js";import"./Close.27d103a5.js";import"./DialogContext.3bb3b8e3.js";function E({bone:a}){var r;const{activeModel:s}=g(),i=(r=s==null?void 0:s.attachment[a])!=null?r:[];return e(L,{defaultOpen:!0,className:"BoneManager",disableGutters:!0},e(f,null,a),e(f,null,i.map(n=>{var o,c;return e(x,{target:n,label:(c=(o=n==null?void 0:n.userData)==null?void 0:o.name)!=null?c:n.id})})))}function tt(){var u,p;const{activeModel:a}=g(),[s,i]=y(),{inputModel:r}=C(),n=["root",...(p=(u=a==null?void 0:a.bones)==null?void 0:u.list)!=null?p:[]],[o,c]=v(n[0]),j=D(a.attachment.list.map(t=>t.parentBone));b(()=>{if(!a)return;const t=a,l=t.addEventListener("AttachmentChanged",i);return()=>t.removeEventListener("AttachmentChanged",l)},[a]);const A=t=>{c(t.target.value)},M=async()=>{const t=await r();if(!t)return;const[l,B]=t,m=await h.loadDLModel(l);m.userData.name=B,a.attach(m,o==="root"?void 0:o),m.outline.code=a.outline.code,m.material.code=a.material.code,h.render()};return e(d,{className:"AttachmentManager"},e(d,{className:"AttachmentManager-top"},e(w,null,"Manage Attachments"),e(d,{className:"AttachmentManager-add"},e(I,{onChange:A,value:o,className:"AttachmentManager-select"},n.map(t=>e(K,{key:t,value:t},t))),e(N,{title:"Add Attachment",variant:"contained",onClick:M},e(k,null)))),e(T,{key:s,className:"AttachmentManager-body"},e(S,null),j.map(t=>e(E,{key:t,bone:t}))))}export{tt as default};
