var V=Object.defineProperty,E=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var W=(e,n,a)=>n in e?V(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,d=(e,n)=>{for(var a in n||(n={}))U.call(n,a)&&W(e,a,n[a]);if(f)for(var a of f(n))w.call(n,a)&&W(e,a,n[a]);return e},p=(e,n)=>E(e,_(n));var q=(e,n)=>{var a={};for(var i in e)U.call(e,i)&&n.indexOf(i)<0&&(a[i]=e[i]);if(e!=null&&f)for(var i of f(e))n.indexOf(i)<0&&w.call(e,i)&&(a[i]=e[i]);return a};import{aK as b,aD as $}from"./vendor.07c175f9.js";import{L as Q,W as L,u as Y,S as z}from"./lists.a60d8f66.js";import{S as y}from"./Stretcher.85c3f0f9.js";import{a as K,b as J,T as X}from"./TabBar.e9bf04c7.js";import{a as u,j as t,h,F as C,m as Z,J as ee,K as ne}from"./index.a3818f6b.js";import{B as x}from"./Button.5a111872.js";import{h as te,M as ae}from"./ModelIcon.dfe3350f.js";import{G as T,u as A}from"./Gallery.f7b4411a.js";import{s as ie,g as oe}from"./aniFunction.cdd8b258.js";import{S as G}from"./Selector.cc88d278.js";import{B as O}from"./Box.00888623.js";import{a as se,b as ce}from"./DialogTitle.7da8a937.js";import"./Popover.f04e6e49.js";import"./ButtonBase.a9536c01.js";import"./Close.c726a464.js";import"./GlowToggle.a0b552d2.js";function re(r){var m=r,{icon:e="",subIcon:n="",title:a,subtitle:i="",onClick:s}=m,o=q(m,["icon","subIcon","title","subtitle","onClick"]);const c=e&&u("div",{className:"IconButton-icons",children:[t("img",{className:"IconButton-mainIcon",src:e,alt:a,loading:"lazy"}),n&&t("img",{className:"IconButton-subIcon",src:n,alt:n,loading:"lazy"})]}),l=u("div",{className:"IconButton-description",children:[i&&t("h5",{className:"IconButton-subtitle",children:i}),t("h3",{className:"IconButton-title",children:a})]});return t(x,p(d({variant:"outlined",className:"IconButton",onClick:s,startIcon:c},o),{children:l}))}function F({icon:e,user:n,name:a,fullName:i=a,subtitle:s="",code:o,onClick:r}){const m=te(n)?`img/icon/${n}.png`:"",c=e?`img/aniIcon/${e}.png`:m;return t(re,{icon:c,subIcon:e&&m,title:a,subtitle:s,onClick:r,"data-code":o,"data-name":i})}function le({icon:e,user:n,code:a,fullName:i,onClick:s}){return t(F,{icon:e,user:n,name:i,code:a,onClick:s})}function ue({query:e,onSelect:n}){const[a,i]=b([]),[s,o]=b(!0);return $(()=>{o(!0),setTimeout(async()=>{const r=await ie(e);i(r),o(!1)})},[e]),u("div",{className:"AniSearchResult",children:[t(y,{}),s?t(Q,{}):t(T,{list:a,component:le,onClick:n})]})}const me=[{label:"Home Screen",name:"home"},{label:"In Quest",name:"quest"},{label:"Weapon Specific",name:"weapon"},{label:"Generic Skills",name:"genericSkill"},{label:"Unique Skills",name:"uniqueSkill"},{label:"Unique Combo",name:"uniqueCombo"},{label:"Unique Force Strike",name:"uniqueFS"},{label:"Unique Victory",name:"uniqueVictory"},{label:"Other Unique",name:"uniqueOther"},{label:"Misc",name:"misc"}];function D({tabs:e,value:n,onChange:a}){return t(K,{variant:"scrollable",orientation:"vertical",className:"VerticalTabs",value:n,onChange:(s,o)=>a(o),children:e.map(({label:s,name:o})=>t(J,{label:s!=null?s:o,value:o},o))})}const de={minHeight:"3rem"};function I(o){var r=o,{name:e,code:n,onClick:a,fullName:i}=r,s=q(r,["name","code","onClick","fullName"]);return t(x,p(d({className:"AniSelect-Btn",variant:"contained","data-code":n,"data-name":i!=null?i:e,onClick:a,sx:de},s),{children:e}))}const pe=["Male","Female"];function he({value:e,onClick:n}){return t(G,{type:"text",options:pe,value:e,onClick:n})}function ge({onSelect:e}){const{gender:n,setGender:a}=h(s=>s.advAni.home),i=A(s=>s["ani-home"]);return u("div",{className:"HomeAni",children:[t("h3",{className:"HomeAni-groupTitle",children:"Common Animation"}),t("div",{className:"AniSelect-simpleBtns",children:i.common.map(({name:s,code:o})=>t(I,{name:s,code:o,onClick:e,className:"AniSelect-Btn"},s))}),t("hr",{}),u("div",{className:"HomeAni-groupTitle",children:[t("h3",{children:"Gender Specific"}),t(he,{value:n,onClick:a})]}),t("div",{className:"AniSelect-simpleBtns",children:i[n].map(({name:s,code:o})=>t(I,{name:s,code:o,fullName:`${n} ${s}`,onClick:e,className:"AniSelect-Btn"},s))})]})}function S({list:e,onClick:n}){return t(T,{list:e,component:I,onClick:n})}function Ae({onSelect:e}){const n=A(a=>a["ani-quest"]);return t(S,{list:n,onClick:e})}const j=["Long","Close","Rapid"],Se=j.map(e=>`img/appIcon/gun_${e}.png`);function ve({value:e,onClick:n}){return t(G,{type:"icon",options:j,icons:Se,labels:j,value:e,onClick:n})}const fe=L.map(e=>`img/appIcon/weapon_${e}.png`);function N({value:e,onClick:n}){return t(G,{type:"icon",options:L,icons:fe,value:e,onClick:n})}const be={Long:"Long Range",Close:"Close Range",Rapid:"Rapid Fire"};function ye({onSelect:e}){const{type:n,setType:a,gunMode:i,setGunMode:s}=h(l=>l.advAni.weapon),o=A(l=>l["ani-weapon"]),r=A(l=>l["ani-gun"]),m=o[n].map(l=>p(d({},l),{fullName:`${n} ${l.name}`})),c=r[i].map(l=>p(d({},l),{fullName:`${be[i]} Manacaster ${l.name}`}));return u("div",{className:"WeaponAni",children:[t(N,{value:n,onClick:a}),t(S,{list:m,onClick:e}),n==="Manacaster"&&u(C,{children:[t(ve,{value:i,onClick:s}),t(S,{list:c,onClick:e})]})]})}function Ce({onSelect:e}){const{type:n,setType:a}=h(o=>o.advAni.genericSkill),s=A(o=>o["ani-genericSkill"])[n].map(o=>p(d({},o),{fullName:`${n} ${o.name}`}));return u("div",{className:"GenericSkills",children:[t(N,{value:n,onClick:a}),t(S,{list:s,onClick:e})]})}function H({list:e,onClick:n}){return t(T,{list:e,component:F,onClick:n})}const Ne=e=>p(d({},e),{fullName:`${e.name} Victory`}),ke=e=>p(d({},e),{fullName:`${e.name} ${e.subtitle||""} Combo`}),Be=e=>p(d({},e),{fullName:`${e.name} ${e.subtitle||""} Force Strike`}),qe=e=>p(d({},e),{fullName:e.subtitle?`${e.subtitle} ${e.name}`:e.name}),$e={uniqueCombo:ke,uniqueFS:Be,uniqueVictory:Ne,uniqueSkill:qe};function k({name:e,onSelect:n}){var l,v;const a=`ani-${e}`,i=(l=A(g=>g[a]))!=null?l:{},{setGroupWeaponType:s}=h(g=>g.advAni.groupByWeapon),o=g=>s(e,g),r=h(g=>g.advAni.groupByWeapon[e]);r!=null||o(Object.keys(i)[0]);const m=$e[e],c=m?(v=i[r])==null?void 0:v.map(m):i[r];return u("div",{className:"AniGroup",children:[t(N,{value:r,onClick:o}),t(H,{list:c,onClick:n},r)]})}function xe({onSelect:e}){const n=A(a=>a["ani-misc"]);return t(S,{list:n,onClick:e})}function Te({expanded:e,user:n,name:a,animations:i,onClick:s,onSelect:o}){return u(C,{children:[u("div",{className:`UniqueAniGroup ${e?"selected":""}`,"data-user":n,onClick:s,children:[t(ae,{modelId:n,alt:a}),t("h3",{children:a})]}),e&&t("div",{className:"UniqueAniGroup-details",children:t(S,{list:i,onClick:o})})]})}function Ge({onSelect:e}){const n=A(c=>c["ani-uniqueOther"]),{type:a,setType:i,selected:s,setSelected:o}=h(c=>c.advAni.uniqueOther),r=n[a],m=c=>{const{user:l}=c.currentTarget.dataset;o(l===s?"":l)};return t(C,{children:u("div",{className:"OtherUniqueAni",children:[t(N,{value:a,onClick:i}),t("hr",{}),t("div",{className:"OtherUniqueAni-groups",children:r.map(c=>t(Te,p(d({expanded:s===c.user},c),{onClick:m,onSelect:e})))})]})})}const Ie={home:ge,quest:Ae,weapon:ye,genericSkill:Ce,uniqueSkill:e=>t(k,p(d({},e),{name:"uniqueSkill"})),uniqueVictory:e=>t(k,p(d({},e),{name:"uniqueVictory"})),uniqueFS:e=>t(k,p(d({},e),{name:"uniqueFS"})),uniqueCombo:e=>t(k,p(d({},e),{name:"uniqueCombo"})),uniqueOther:Ge,misc:xe};function je({onSelect:e}){var s;const{category:n,setCategory:a}=h(o=>o.advAni),i=(s=Ie[n])!=null?s:y;return u("div",{className:"AniSelect-categories",children:[t(D,{tabs:me,value:n,onChange:a}),t("div",{className:"AniSelect-subCategory",children:t(i,{onSelect:e})})]})}function Me(){const{source:e,setSource:n,sourceName:a,setSourceName:i}=h(c=>c.personalAni),{inputModel:s}=Z(),o=(c,l)=>{i(l),n(c)},r=async()=>{const c=await s();c&&o(...c)};$(()=>{a||setTimeout(async()=>{const c=await ee(e);(c==null?void 0:c.id)&&i(c.name)})},[e]);const m=["b","w"].includes(e==null?void 0:e[0])?`img/icon/${e}.png`:`img/portrait/${e}.png`;return u("div",{className:"PersonalAni-source",children:[e&&t("img",{src:m,alt:e},e),u("div",{children:[t("h3",{children:a}),t(x,{variant:"outlined",onClick:r,children:"Change Source"})]})]})}function Pe({onSelect:e}){const n=!!indexedDB,{source:a}=h(o=>o.personalAni),[i,s]=b([]);return $(()=>{s([]),setTimeout(async()=>{var m;if(!a)return;const r=((m=ne(a))!=null?m:n?await oe(a):[]).map(c=>p(d({},c),{user:void 0}));s(r)})},[a]),t(H,{list:i,onClick:e})}function Ue({onSelect:e}){return u("div",{className:"PersonalAnimation",children:[t(Me,{}),t(Pe,{onSelect:e})]})}function we({onSelect:e}){const{category:n,setCategory:a}=h(o=>o.extraAni),i=A(o=>o["ani-extra"]),s=Object.keys(i).map(o=>({name:o}));return u("div",{className:"AniSelect-categories",children:[t(D,{tabs:s,value:n,onChange:a}),t("div",{className:"AniSelect-subCategory",children:t(S,{list:i[n],onClick:e})})]})}const M={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"90vh",minWidth:"20rem","& svg":{color:"rgba(16, 16, 16, 0.8)"}},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)","& h2":{padding:"0.2rem 1rem"},"& Searchbox":{minWidth:"15rem"}},content:{padding:"0.5rem 1rem"}};const We=["Adventurer","Personal","Extra"].map(e=>({name:e})),Le={Adventurer:je,Personal:Ue,Extra:we};function tn({onSelect:e=()=>{},onAfterSelect:n}){var g;const{category:a,setCategory:i}=h(),s=!!indexedDB,[o,r]=b(""),m=Y(o,500),c=(P,B)=>i(B),l=P=>{const{code:B,name:R}=P.currentTarget.dataset;e(B,R),n==null||n()},v=(g=Le[a])!=null?g:y;return u(O,{className:"AniSelect",sx:M.root,children:[u(O,{sx:M.title,children:[t(se,{children:"Select an Animation"}),s&&t(z,{placeholder:"Search",query:o,onChange:r})]}),o?t(ue,{query:m,onSelect:l}):u(C,{children:[t(X,{value:a,onChange:c,tabs:We}),u(ce,{sx:M.content,children:[t(y,{}),t(v,{onSelect:l})]})]})]})}export{tn as default};
