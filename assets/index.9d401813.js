var G=Object.defineProperty,k=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var D=(a,e,t)=>e in a?G(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,T=(a,e)=>{for(var t in e||(e={}))N.call(e,t)&&D(a,t,e[t]);if(S)for(var t of S(e))Q.call(e,t)&&D(a,t,e[t]);return a},v=(a,e)=>k(a,P(e));import{aF as i,aB as C,ax as o,aI as A}from"./vendor.ad1e55a4.js";import{u as $}from"./useToggleState.264949a5.js";import{u as q,S as z}from"./lists.146068f1.js";import{F as E}from"./FacePartSelector.1c244aa8.js";import{f as R,c as W,B as H,F as J,a as K}from"./filterConfig.090b15f5.js";import{b as O}from"./useAppData.4b40d8a4.js";import{G as U}from"./Gallery.3c6c2396.js";import{M as V,C as X,s as n}from"./styles.3a863f45.js";import{L as Y}from"./LoadSpinner.289af2f7.js";import{D as Z}from"./index.b952ebf6.js";import{c as _,u as w}from"./categories.aa5162d2.js";import{a as ee,D as te}from"./DialogTitle.0c03aa8c.js";import{B as x}from"./Box.3f20a555.js";import{I as ae}from"./Close.7c73f26e.js";import"./ButtonBase.3daa2b57.js";import"./Popover.98338255.js";import"./Selector.6a378373.js";import"./GlowToggle.4c7bcf1f.js";import"./MenuItem.de2d2857.js";import"./ToggleGroup.f843ecbd.js";import"./DialogContext.fe2532f4.js";function oe({compact:a,searchQuery:e,filter:t,content:m,onSelect:r}){var g;const u=(g=O(s=>s[`chara-${m}`]))!=null?g:[],d=u.filter(({id:s})=>!s.endsWith("h")),[f,c]=i([]),[j,p]=i(!1);return C(()=>c(d),[m]),C(()=>{p(!0);async function s(){const l=e?await Z(e):d;return await R(l,t)}setTimeout(async()=>{const l=await s();c(l),p(!1)})},[e,t]),u.length&&!j?o(U,{list:f,component:a?V:X,onClick:r}):o(Y,null)}const b=_.find(({value:a})=>a==="chara").options,se=[],re=v(T({},n.top),{"& .Selector":{margin:"0.1rem 2rem 0.1rem 0"}});function we({compact:a,onSelect:e,onAfterSelect:t}){const m=!!indexedDB,[r,u]=i(0),d=(F,h)=>u(h),[f,c]=i(""),j=q(f,500);C(()=>{c("")},[r]);const[p,g]=i(se),[s,l]=i("Both"),[I,L]=$(!0),y=b[r].value==="regular"&&W,B=a||w("(max-width:640px)")||w("(max-height:640px)"),M=A(F=>{const{value:h}=F.currentTarget.dataset;s!=="Eyes"&&e(h,"mouth"),s!=="Mouth"&&e(h,"eye"),t==null||t()},[s]);return o(x,{className:"ModelCatalog",sx:n.root},o(x,{sx:re},o(te,{sx:n.title},"Select Texture"),o(E,{value:s,onClick:l}),o(H,{options:b,selectedIndices:[r],setIndex:d}),o(x,{sx:n.searchFilter},o(x,{sx:n.search},o(z,{key:r[0],query:f,onChange:c,placeholder:m?"Search All":"Search"}),y&&o(ae,{onClick:L,size:"large"},o(J,null))),I&&y&&o(K,{config:y,onChange:g,compact:B}))),o(ee,{sx:n.content},o(oe,{compact:B,searchQuery:j,filter:p,content:b[r].value,onSelect:M})))}export{we as default};
