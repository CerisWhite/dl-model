var G=Object.defineProperty,k=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var D=(a,e,t)=>e in a?G(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,T=(a,e)=>{for(var t in e||(e={}))A.call(e,t)&&D(a,t,e[t]);if(S)for(var t of S(e))N.call(e,t)&&D(a,t,e[t]);return a},v=(a,e)=>k(a,P(e));import{aE as i,aA as y,aw as o,aH as Q}from"./vendor.fe894b4a.js";import{u as E}from"./useToggleState.f23a187b.js";import{u as $,S as q}from"./lists.8f5bdbde.js";import{F as z}from"./FacePartSelector.43b86640.js";import{f as H,c as R,B as W,F as J,a as K}from"./filterConfig.7776ebfd.js";import{b as O}from"./useAppData.977799ba.js";import{G as U}from"./Gallery.e9fc7a5e.js";import{M as V,C as X,s as n}from"./styles.f06d74bf.js";import{L as Y}from"./LoadSpinner.37ebc576.js";import{D as Z}from"./index.7d9187de.js";import{c as _,u as w}from"./categories.52451c2b.js";import{a as ee,D as te}from"./DialogTitle.30aca7f1.js";import{B as x}from"./Box.5574f6c8.js";import{I as ae}from"./Close.0cbd14cc.js";import"./ButtonBase.415db68d.js";import"./Popover.81573183.js";import"./Selector.0dfdb472.js";import"./GlowToggle.82bde0aa.js";import"./MenuItem.dd1ea573.js";import"./ToggleGroup.7df67400.js";import"./DialogContext.e1e8d0f9.js";function oe({compact:a,searchQuery:e,filter:t,content:d,onSelect:r}){var g;const m=(g=O(s=>s[`chara-${d}`]))!=null?g:[],u=m.filter(({id:s})=>!s.endsWith("h")),[p,c]=i([]),[b,f]=i(!1);return y(()=>c(u),[d]),y(()=>{f(!0);async function s(){const l=e?await Z(e):u;return await H(l,t)}setTimeout(async()=>{const l=await s();c(l),f(!1)})},[e,t]),m.length&&!b?o(U,{list:p,component:a?V:X,onClick:r}):o(Y,null)}const C=_.find(({value:a})=>a==="chara").options,se=[],re=v(T({},n.top),{"& .Selector":{margin:"0.1rem 2rem 0.1rem 0"}});function we({compact:a,onSelect:e,onAfterSelect:t}){const d=!!indexedDB,[r,m]=i(0),u=(F,h)=>m(h),[p,c]=i(""),b=$(p,500);y(()=>{c("")},[r]);const[f,g]=i(se),[s,l]=i("Both"),[L,I]=E(!0),j=C[r].value==="regular"&&R,B=a||w("(max-width:640px)")||w("(max-height:640px)"),M=Q(F=>{const{value:h}=F.currentTarget.dataset;s!=="Eyes"&&e(h,"mouth"),s!=="Mouth"&&e(h,"eye"),t==null||t()},[s]);return o(x,{className:"ModelCatalog",sx:n.root},o(x,{sx:re},o(te,{sx:n.title},"Select Texture"),o(z,{value:s,onClick:l}),o(W,{options:C,selectedIndices:[r],setIndex:u}),o(x,{sx:n.searchFilter},o(x,{sx:n.search},o(q,{key:r[0],query:p,onChange:c,placeholder:d?"Search All":"Search"}),j&&o(ae,{onClick:I,size:"large"},o(J,null))),L&&j&&o(K,{config:j,onChange:g,compact:B}))),o(ee,{sx:n.content},o(oe,{compact:B,searchQuery:b,filter:f,content:C[r].value,onSelect:M})))}export{we as default};
