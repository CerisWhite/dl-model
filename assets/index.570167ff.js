var T=Object.defineProperty;var d=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;var h=(t,e,o)=>e in t?T(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,f=(t,e)=>{for(var o in e||(e={}))b.call(e,o)&&h(t,o,e[o]);if(d)for(var o of d(e))u.call(e,o)&&h(t,o,e[o]);return t};var k=(t,e)=>{var o={};for(var a in t)b.call(t,a)&&e.indexOf(a)<0&&(o[a]=t[a]);if(t!=null&&d)for(var a of d(t))e.indexOf(a)<0&&u.call(t,a)&&(o[a]=t[a]);return o};import{ab as x}from"./vendor.732e1712.js";import{T as I}from"./TabBar.9e653d7b.js";import{C as P}from"./ColorPicker.7198f1c9.js";import{G as w,T as R,u as y}from"./Gallery.41c56b72.js";import{j as n,a as g,F as W,v as C}from"./index.cb250fb3.js";import{B as v}from"./Box.8b351caf.js";import{U as L,f as $}from"./file2dataURL.c371f879.js";import{B as D}from"./Button.500084e3.js";import{a as F,b as G}from"./DialogTitle.595f96b0.js";import"./ButtonBase.15e13e60.js";import"./Popover.d85eeb05.js";import"./createSvgIcon.ee3b2f0a.js";import"./ColorButton.e0ef4f4b.js";const p={gallery:{gap:"1rem"},container:{boxSizing:"border-box",maxWidth:"8rem",maxHeight:"8rem",position:"relative",cursor:"pointer",borderRadius:"5%",overflow:"hidden",filter:"drop-shadow(0 0 2px rgba(0,0,0,0.5))",objectFit:"cover",contentVisibility:"auto",containIntrinsicSize:"0 8rem",alignSelf:"stretch",margin:"auto","&:hover":{border:"1px solid white",filter:"drop-shadow(0.1rem 0.1rem 0.2rem black)"},"&[data-name]::after":{content:"attr(data-name)",position:"absolute",bottom:"0.25rem",left:0,backgroundColor:"rgba(0,0,0,0.8)",color:"#fff",textAlign:"center",padding:"0.1rem",width:"100%"},"&[data-name]:hover::after":{backgroundColor:"rgba(255,255,255,0.6)",color:"black"}},image:{maxWidth:"100%"}},S=({src:t,value:e,name:o,onClick:a})=>n(v,{sx:p.container,"data-name":o,children:n("img",{src:t,"data-value":e,onClick:a,style:p.image})}),B=({list:t,onClick:e})=>n(w,{style:p.gallery,onClick:e,list:t,component:S}),j={input:{paddingRight:"0.2rem",minWidth:"8rem"},button:{padding:"0.5rem 1rem",margin:0,backgroundColor:"rgba(16, 16, 16, 0.8)",color:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(16, 16, 16, 0.5)","&:hover":{backgroundColor:"rgba(50, 50, 50, 0.8)",border:"1px solid rgba(16, 16, 16, 0.8)"}}};function z(a){var i=a,{onApply:t,applyLabel:e="Apply"}=i,o=k(i,["onApply","applyLabel"]);const[r,s]=x(""),l=U=>s(U.target.value),c=()=>t(r),m=n(D,{sx:j.button,variant:"contained",onClick:c,children:e});return n(R,f({value:r,onChange:l,placeholder:"Enter URL",margin:"none",InputProps:{endAdornment:m,sx:j.input},inputProps:{type:"url"},size:"small"},o))}const A={external:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",maxWidth:"100%",marginBottom:"0.5rem"}};function N({onSelect:t}){const e=y(r=>r["background-image"]),o=r=>{const{value:s}=r.target.dataset,l=`img:${s}`;t(l)},a=async r=>{const l=`img:${await $(r[0])}`;t(l)},i=r=>{if(!r)return;const s=`img:${r}`;t(s)};return g(W,{children:[g(v,{sx:A.external,children:[n(L,{onChange:a}),n(z,{onApply:i})]}),n(B,{list:e,onClick:o})]})}function E({onSelect:t}){const e=y(a=>a["background-skybox"]);return n(B,{list:e,onClick:a=>{const{value:i}=a.target.dataset,r=`sky:${i}`;t(r)}})}const H=["Color","Image","Skybox"].map(t=>({name:t})),V={Color:P,Image:N,Skybox:E},_=t=>t.startsWith("sky:")?"Skybox":t.startsWith("img:")?"Image":"Color";function nt({onAfterSelect:t}){var l;const e=_(C.background),[o,a]=x(e),i=c=>{C.background=c,t==null||t()},r=(c,m)=>a(m),s=(l=V[o])!=null?l:()=>null;return g("div",{className:"BackgroundPicker",children:[n(F,{sx:{textAlign:"center"},children:"Choose a background"}),n(I,{value:o,onChange:r,tabs:H}),n(G,{children:n(s,{onSelect:i})})]})}export{nt as default};
