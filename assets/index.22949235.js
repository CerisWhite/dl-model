var R=Object.defineProperty,V=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var w=(n,t,a)=>t in n?R(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,m=(n,t)=>{for(var a in t||(t={}))P.call(t,a)&&w(n,a,t[a]);if(S)for(var a of S(t))U.call(t,a)&&w(n,a,t[a]);return n},d=(n,t)=>V(n,E(t));var B=(n,t)=>{var a={};for(var o in n)P.call(n,o)&&t.indexOf(o)<0&&(a[o]=n[o]);if(n!=null&&S)for(var o of S(n))t.indexOf(o)<0&&U.call(n,o)&&(a[o]=n[o]);return a};import{av as e,aD as h,az as q,aB as y}from"./vendor.0af045b4.js";import{W as L,u as _,S as z}from"./lists.9f1cd60b.js";import{a as Q,b as Y,T as J}from"./TabBar.606fdd82.js";import{B as $}from"./Button.4b7951ea.js";import{L as K}from"./LoadSpinner.8aa50140.js";import{h as X,M as Z}from"./ModelIcon.fa2fda67.js";import{G as x}from"./Gallery.95fb88f8.js";import{s as nn,g as en}from"./aniFunction.6c22eeb1.js";import{h as p,a as tn,z as an,B as on}from"./index.f5af7c53.js";import{b as A}from"./useAppData.889f8996.js";import{S as T}from"./Selector.46220462.js";import{B as W}from"./Box.36edcd22.js";import{D as sn,a as cn}from"./DialogTitle.a02af59f.js";import"./ButtonBase.749220ee.js";import"./Popover.fb02a82b.js";import"./GlowToggle.50d2d622.js";import"./DialogContext.faaa0fa1.js";const b=()=>e("div",{className:"Stretcher"});function ln(l){var u=l,{icon:n="",subIcon:t="",title:a,subtitle:o="",onClick:s}=u,i=B(u,["icon","subIcon","title","subtitle","onClick"]);const c=n&&e("div",{className:"IconButton-icons"},e("img",{className:"IconButton-mainIcon",src:n,alt:a,loading:"lazy"}),t&&e("img",{className:"IconButton-subIcon",src:t,alt:t,loading:"lazy"})),r=e("div",{className:"IconButton-description"},o&&e("h5",{className:"IconButton-subtitle"},o),e("h3",{className:"IconButton-title"},a));return e($,m({variant:"outlined",className:"IconButton",onClick:s,startIcon:c},i),r)}function D({icon:n,user:t,name:a,fullName:o=a,subtitle:s="",code:i,onClick:l}){const u=X(t)?`img/icon/${t}.png`:"",c=n?`img/aniIcon/${n}.png`:u;return e(ln,{icon:c,subIcon:n&&u,title:a,subtitle:s,onClick:l,"data-code":i,"data-name":o})}function rn({icon:n,user:t,code:a,fullName:o,onClick:s}){return e(D,{icon:n,user:t,name:o,code:a,onClick:s})}function un({query:n,onSelect:t}){const[a,o]=h([]),[s,i]=h(!0);return q(()=>{i(!0),setTimeout(async()=>{const l=await nn(n);o(l),i(!1)})},[n]),e("div",{className:"AniSearchResult"},e(b,null),s?e(K,null):e(x,{list:a,component:rn,onClick:t}))}const mn=[{label:"Home Screen",name:"home"},{label:"In Quest",name:"quest"},{label:"Weapon Specific",name:"weapon"},{label:"Generic Skills",name:"genericSkill"},{label:"Unique Skills",name:"uniqueSkill"},{label:"Unique Combo",name:"uniqueCombo"},{label:"Unique Force Strike",name:"uniqueFS"},{label:"Unique Victory",name:"uniqueVictory"},{label:"Other Unique",name:"uniqueOther"},{label:"Misc",name:"misc"}];function O({tabs:n,value:t,onChange:a}){return e(Y,{variant:"scrollable",orientation:"vertical",className:"VerticalTabs",value:t,onChange:(s,i)=>a(i)},n.map(({label:s,name:i})=>e(Q,{label:s!=null?s:i,key:i,value:i})))}const dn={minHeight:"3rem"};function G(i){var l=i,{name:n,code:t,onClick:a,fullName:o}=l,s=B(l,["name","code","onClick","fullName"]);return e($,m({className:"AniSelect-Btn",variant:"contained","data-code":t,"data-name":o!=null?o:n,onClick:a,sx:dn},s),n)}const pn=["Male","Female"];function gn({value:n,onClick:t}){return e(T,{type:"text",options:pn,value:n,onClick:t})}function An({onSelect:n}){const{gender:t,setGender:a}=p(s=>s.advAni.home),o=A(s=>s["ani-home"]);return e("div",{className:"HomeAni"},e("h3",{className:"HomeAni-groupTitle"},"Common Animation"),e("div",{className:"AniSelect-simpleBtns"},o.common.map(({name:s,code:i})=>e(G,{name:s,code:i,onClick:n,key:s,className:"AniSelect-Btn"}))),e("hr",null),e("div",{className:"HomeAni-groupTitle"},e("h3",null,"Gender Specific"),e(gn,{value:t,onClick:a})),e("div",{className:"AniSelect-simpleBtns"},o[t].map(({name:s,code:i})=>e(G,{name:s,code:i,fullName:`${t} ${s}`,onClick:n,key:s,className:"AniSelect-Btn"}))))}function v({list:n,onClick:t}){return e(x,{list:n,component:G,onClick:t})}function vn({onSelect:n}){const t=A(a=>a["ani-quest"]);return e(v,{list:t,onClick:n})}const I=["Long","Close","Rapid"],fn=I.map(n=>`img/appIcon/gun_${n}.png`);function Sn({value:n,onClick:t}){return e(T,{type:"icon",options:I,icons:fn,labels:I,value:n,onClick:t})}const hn=L.map(n=>`img/appIcon/weapon_${n}.png`);function C({value:n,onClick:t}){return e(T,{type:"icon",options:L,icons:hn,value:n,onClick:t})}const yn={Long:"Long Range",Close:"Close Range",Rapid:"Rapid Fire"};function bn({onSelect:n}){const{type:t,setType:a,gunMode:o,setGunMode:s}=p(r=>r.advAni.weapon),i=A(r=>r["ani-weapon"]),l=A(r=>r["ani-gun"]),u=i[t].map(r=>d(m({},r),{fullName:`${t} ${r.name}`})),c=l[o].map(r=>d(m({},r),{fullName:`${yn[o]} Manacaster ${r.name}`}));return e("div",{className:"WeaponAni"},e(C,{value:t,onClick:a}),e(v,{list:u,onClick:n}),t==="Manacaster"&&e(y,null,e(Sn,{value:o,onClick:s}),e(v,{list:c,onClick:n})))}function Cn({onSelect:n}){const{type:t,setType:a}=p(i=>i.advAni.genericSkill),s=A(i=>i["ani-genericSkill"])[t].map(i=>d(m({},i),{fullName:`${t} ${i.name}`}));return e("div",{className:"GenericSkills"},e(C,{value:t,onClick:a}),e(v,{list:s,onClick:n}))}function F({list:n,onClick:t}){return e(x,{list:n,component:D,onClick:t})}const kn=n=>d(m({},n),{fullName:`${n.name} Victory`}),Nn=n=>d(m({},n),{fullName:`${n.name} ${n.subtitle||""} Combo`}),Bn=n=>d(m({},n),{fullName:`${n.name} ${n.subtitle||""} Force Strike`}),qn=n=>d(m({},n),{fullName:n.subtitle?`${n.subtitle} ${n.name}`:n.name}),$n={uniqueCombo:Nn,uniqueFS:Bn,uniqueVictory:kn,uniqueSkill:qn};function k({name:n,onSelect:t}){var r,f;const a=`ani-${n}`,o=(r=A(g=>g[a]))!=null?r:{},{setGroupWeaponType:s}=p(g=>g.advAni.groupByWeapon),i=g=>s(n,g),l=p(g=>g.advAni.groupByWeapon[n]);l!=null||i(Object.keys(o)[0]);const u=$n[n],c=u?(f=o[l])==null?void 0:f.map(u):o[l];return e("div",{className:"AniGroup"},e(C,{value:l,onClick:i}),e(F,{key:l,list:c,onClick:t}))}function xn({onSelect:n}){const t=A(a=>a["ani-misc"]);return e(v,{list:t,onClick:n})}function Tn({expanded:n,user:t,name:a,animations:o,onClick:s,onSelect:i}){return e(y,null,e("div",{className:`UniqueAniGroup ${n?"selected":""}`,"data-user":t,onClick:s},e(Z,{modelId:t,alt:a}),e("h3",null,a)),n&&e("div",{className:"UniqueAniGroup-details"},e(v,{list:o,onClick:i})))}function Gn({onSelect:n}){const t=A(c=>c["ani-uniqueOther"]),{type:a,setType:o,selected:s,setSelected:i}=p(c=>c.advAni.uniqueOther),l=t[a],u=c=>{const{user:r}=c.currentTarget.dataset;i(r===s?"":r)};return e(y,null,e("div",{className:"OtherUniqueAni"},e(C,{value:a,onClick:o}),e("hr",null),e("div",{className:"OtherUniqueAni-groups"},l.map(c=>e(Tn,d(m({expanded:s===c.user},c),{onClick:u,onSelect:n}))))))}const In={home:An,quest:vn,weapon:bn,genericSkill:Cn,uniqueSkill:n=>e(k,d(m({},n),{name:"uniqueSkill"})),uniqueVictory:n=>e(k,d(m({},n),{name:"uniqueVictory"})),uniqueFS:n=>e(k,d(m({},n),{name:"uniqueFS"})),uniqueCombo:n=>e(k,d(m({},n),{name:"uniqueCombo"})),uniqueOther:Gn,misc:xn};function Mn({onSelect:n}){var s;const{category:t,setCategory:a}=p(i=>i.advAni),o=(s=In[t])!=null?s:b;return e("div",{className:"AniSelect-categories"},e(O,{tabs:mn,value:t,onChange:a}),e("div",{className:"AniSelect-subCategory"},e(o,{onSelect:n})))}function jn(){const{source:n,setSource:t,sourceName:a,setSourceName:o}=p(c=>c.personalAni),{inputModel:s}=tn(),i=(c,r)=>{o(r),t(c)},l=async()=>{const c=await s();c&&i(...c)};q(()=>{a||setTimeout(async()=>{const c=await an(n);(c==null?void 0:c.id)&&o(c.name)})},[n]);const u=["b","w"].includes(n==null?void 0:n[0])?`img/icon/${n}.png`:`img/portrait/${n}.png`;return e("div",{className:"PersonalAni-source"},n&&e("img",{key:n,src:u,alt:n}),e("div",null,e("h3",null,a),e($,{variant:"outlined",onClick:l},"Change Source")))}function Pn({onSelect:n}){const t=!!indexedDB,{source:a}=p(i=>i.personalAni),[o,s]=h([]);return q(()=>{s([]),setTimeout(async()=>{var u;if(!a)return;const l=((u=on(a))!=null?u:t?await en(a):[]).map(c=>d(m({},c),{user:void 0}));s(l)})},[a]),e(F,{list:o,onClick:n})}function Un({onSelect:n}){return e("div",{className:"PersonalAnimation"},e(jn,null),e(Pn,{onSelect:n}))}function wn({onSelect:n}){const{category:t,setCategory:a}=p(i=>i.extraAni),o=A(i=>i["ani-extra"]),s=Object.keys(o).map(i=>({name:i}));return e("div",{className:"AniSelect-categories"},e(O,{tabs:s,value:t,onChange:a}),e("div",{className:"AniSelect-subCategory"},e(v,{list:o[t],onClick:n})))}const M={root:{display:"flex",flexDirection:"column",overflowY:"hidden",minHeight:"90vh",minWidth:"20rem","& svg":{color:"rgba(16, 16, 16, 0.8)"}},title:{textAlign:"center",padding:"0.5rem 2rem",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",borderBottom:"1px solid rgba(16, 16, 16, 0.4)",boxShadow:"0 0.2rem 0.3rem rgba(16, 16, 16, 0.4)","& h2":{padding:"0.2rem 1rem"},"& Searchbox":{minWidth:"15rem"}},content:{padding:"0.5rem 1rem"}};const Ln=["Adventurer","Personal","Extra"].map(n=>({name:n})),Wn={Adventurer:Mn,Personal:Un,Extra:wn};function ae({onSelect:n=()=>{},onAfterSelect:t}){var g;const{category:a,setCategory:o}=p(),s=!!indexedDB,[i,l]=h(""),u=_(i,500),c=(j,N)=>o(N),r=j=>{const{code:N,name:H}=j.currentTarget.dataset;n(N,H),t==null||t()},f=(g=Wn[a])!=null?g:b;return e(W,{className:"AniSelect",sx:M.root},e(W,{sx:M.title},e(sn,null,"Select an Animation"),s&&e(z,{placeholder:"Search",query:i,onChange:l})),i?e(un,{query:u,onSelect:r}):e(y,null,e(J,{value:a,onChange:c,tabs:Ln}),e(cn,{sx:M.content},e(b,null),e(f,{onSelect:r}))))}export{ae as default};
